import{r as c,a as Me,R as O,A as Ae,b as Ee,B as Ie,X as Q,Y as ee,T as te,c as Re,C as _e,L as Be,d as ne,e as Fe}from"./charts-CSEo9cJk.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var de={exports:{}},W={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var De=c,We=Symbol.for("react.element"),He=Symbol.for("react.fragment"),Le=Object.prototype.hasOwnProperty,$e=De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ge={key:!0,ref:!0,__self:!0,__source:!0};function ue(e,o,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),o.key!==void 0&&(i=""+o.key),o.ref!==void 0&&(a=o.ref);for(r in o)Le.call(o,r)&&!Ge.hasOwnProperty(r)&&(s[r]=o[r]);if(e&&e.defaultProps)for(r in o=e.defaultProps,o)s[r]===void 0&&(s[r]=o[r]);return{$$typeof:We,type:e,key:i,ref:a,props:s,_owner:$e.current}}W.Fragment=He;W.jsx=ue;W.jsxs=ue;de.exports=W;var t=de.exports,U={},oe=Me;U.createRoot=oe.createRoot,U.hydrateRoot=oe.hydrateRoot;function Oe(e,o,n){return Math.max(o,Math.min(n,e))}function Ue(e,o=20){if(!e||e.length===0)return[];const n=[...e].sort((i,a)=>i-a),r=n.reduce((i,a)=>i+a,0);if(r===0)return[];const s=[{population:0,wealth:0}];for(let i=1;i<=o;i++){const a=Math.floor(i/o*n.length),l=n.slice(0,a).reduce((u,d)=>u+d,0);s.push({population:i/o*100,wealth:l/r*100})}return s}const C=[{threshold:0,color:[220,38,38]},{threshold:100,color:[234,88,12]},{threshold:300,color:[100,116,139]},{threshold:800,color:[59,130,246]},{threshold:2e3,color:[6,182,212]},{threshold:5e3,color:[234,179,8]},{threshold:1e4,color:[251,191,36]}];function fe(e){const o=Math.max(0,e);let n=C[0],r=C[C.length-1];for(let d=0;d<C.length-1;d++)if(o>=C[d].threshold&&o<C[d+1].threshold){n=C[d],r=C[d+1];break}const s=r.threshold-n.threshold,i=s>0?(o-n.threshold)/s:1,a=Math.round(n.color[0]+(r.color[0]-n.color[0])*i),l=Math.round(n.color[1]+(r.color[1]-n.color[1])*i),u=Math.round(n.color[2]+(r.color[2]-n.color[2])*i);return`rgb(${a},${l},${u})`}const z={food:"#22c55e",housing:"#f59e0b",tech:"#6366f1",luxury:"#ec4899"},qe=800,ze=600,Ye=4;function Ve(e,o,n,r){for(const s of o)s.alive&&Ke(e,s,s.id===n,r)}function Ke(e,o,n,r){const{x:s,y:i,state:a,wealth:l,happiness:u,unrest:d,employed:h,isOwner:m,age:x}=o,f=Ye;e.save(),d>.5?(e.shadowColor="rgba(239,68,68,0.7)",e.shadowBlur=8):l>5e3&&(e.shadowColor="rgba(251,191,36,0.5)",e.shadowBlur=6);const g=fe(l);if(e.beginPath(),m||a==="owner"?(e.moveTo(s,i-f*1.4),e.lineTo(s+f*1,i),e.lineTo(s,i+f*1.4),e.lineTo(s-f*1,i),e.closePath()):a==="child"||x<18*52?e.arc(s,i,f*.65,0,Math.PI*2):a==="retired"?e.rect(s-f*.9,i-f*.9,f*1.8,f*1.8):e.arc(s,i,f,0,Math.PI*2),e.fillStyle=g,e.fill(),a==="unemployed"?(e.strokeStyle="#ef4444",e.lineWidth=1.5,e.setLineDash([2,2]),e.stroke(),e.setLineDash([])):(h||m)&&(e.strokeStyle="rgba(255,255,255,0.6)",e.lineWidth=1,e.stroke()),l<100&&a!=="child"){const v=.3+.3*Math.sin(r*.1);e.strokeStyle=`rgba(239,68,68,${v})`,e.lineWidth=2,e.setLineDash([]),e.beginPath(),e.arc(s,i,f+3,0,Math.PI*2),e.stroke()}n&&(e.strokeStyle="#ffffff",e.lineWidth=2,e.setLineDash([]),e.beginPath(),e.arc(s,i,f+4,0,Math.PI*2),e.stroke()),e.restore()}function Je(e,o,n,r=.12){e.save(),e.lineWidth=.5;for(const s of o){if(!s.alive||!s.employed||!s.employerId)continue;const i=n.find(a=>a.id===s.employerId);i&&(e.beginPath(),e.strokeStyle=`rgba(99,102,241,${r})`,e.moveTo(s.x,s.y),e.lineTo(i.x,i.y),e.stroke())}e.restore()}function Xe(e,o,n){for(const r of o)r.alive&&Ze(e,r,n)}function Ze(e,o,n){const{x:r,y:s,sector:i,employeeCount:a,radius:l,pulse:u,dominance:d,capital:h}=o,m=z[i]||"#94a3b8";e.save(),d>.4?(e.shadowColor=m,e.shadowBlur=15+d*20):h>2e3&&(e.shadowColor=m,e.shadowBlur=8);const x=l||10;if(e.beginPath(),se(e,r,s,x),e.fillStyle=m+"33",e.fill(),e.strokeStyle=m,e.lineWidth=2,e.stroke(),e.fillStyle=m,e.font=`${Math.max(8,x*.8)}px sans-serif`,e.textAlign="center",e.textBaseline="middle",e.fillText(Qe[i]||"?",r,s),a>0&&(e.fillStyle="rgba(0,0,0,0.7)",e.beginPath(),e.arc(r+x*.8,s-x*.8,6,0,Math.PI*2),e.fill(),e.fillStyle="#ffffff",e.font="7px sans-serif",e.fillText(a,r+x*.8,s-x*.8)),h<100){const f=.4+.4*Math.sin(n*.15);e.strokeStyle=`rgba(239,68,68,${f})`,e.lineWidth=2,e.beginPath(),se(e,r,s,x+4),e.stroke()}e.restore()}function se(e,o,n,r){e.beginPath();for(let s=0;s<6;s++){const i=Math.PI/3*s-Math.PI/6,a=o+r*Math.cos(i),l=n+r*Math.sin(i);s===0?e.moveTo(a,l):e.lineTo(a,l)}e.closePath()}const Qe={food:"ðŸŒ¾",housing:"ðŸ ",tech:"ðŸ’»",luxury:"ðŸ’Ž"};function et(e,o,n,r){e.save();for(const s of o){if(!s.alive)continue;const i=z[s.sector]||"#94a3b8",a=30+s.employeeCount*5,l=e.createRadialGradient(s.x,s.y,0,s.x,s.y,a);l.addColorStop(0,i+"15"),l.addColorStop(1,"transparent"),e.fillStyle=l,e.beginPath(),e.arc(s.x,s.y,a,0,Math.PI*2),e.fill()}e.restore()}const _=[];function tt(e,o){for(let n=0;n<6;n++){const r=Math.PI*2/6*n;_.push({type:"sparkle",x:e,y:o,vx:Math.cos(r)*2,vy:Math.sin(r)*2,life:1,color:"#22c55e",size:3})}}function nt(e,o){for(let n=0;n<8;n++){const r=Math.random()*Math.PI*2;_.push({type:"fade",x:e+(Math.random()-.5)*10,y:o+(Math.random()-.5)*10,vx:Math.cos(r)*1.5,vy:Math.sin(r)*1.5,life:1,color:"#ef4444",size:2})}}function ot(e){for(let o=_.length-1;o>=0;o--){const n=_[o];switch(e.save(),e.globalAlpha=n.life,n.type){case"sparkle":e.fillStyle=n.color,e.beginPath(),e.arc(n.x,n.y,n.size*n.life,0,Math.PI*2),e.fill(),n.x+=n.vx,n.y+=n.vy,n.vx*=.95,n.vy*=.95,n.life-=.04;break;case"fade":e.fillStyle=n.color,e.beginPath(),e.arc(n.x,n.y,n.size,0,Math.PI*2),e.fill(),n.x+=n.vx,n.y+=n.vy,n.life-=.06;break;case"wave":e.strokeStyle=n.color,e.lineWidth=1.5,e.beginPath(),e.arc(n.x,n.y,n.radius,0,Math.PI*2),e.stroke(),n.radius=n.radius+(n.maxRadius-n.radius)*.08,n.life-=.03;break}e.restore(),n.life<=0&&_.splice(o,1)}}function st({simState:e,onAgentClick:o,selectedAgentId:n}){const r=c.useRef(null),s=c.useRef(null),i=c.useRef(0),a=c.useRef(new Set),l=c.useCallback(()=>{const d=r.current;if(!d)return;const h=d.getContext("2d");i.current++;const m=i.current;if(h.fillStyle="#0a0a0f",h.fillRect(0,0,d.width,d.height),!e){h.fillStyle="#334155",h.font="14px monospace",h.textAlign="center",h.fillText("Initializing simulation...",d.width/2,d.height/2);return}const{agents:x=[],businesses:f=[]}=e,g=new Set(x.filter(b=>b.alive).map(b=>b.id)),v=a.current;for(const b of v)if(!g.has(b)){const w=x.find(k=>k.id===b);w&&nt(w.x,w.y)}for(const b of g)if(!v.has(b)){const w=x.find(k=>k.id===b);w&&tt(w.x,w.y)}a.current=g,et(h,f,d.width,d.height),Je(h,x,f),Xe(h,f,m),Ve(h,x,n,m),ot(h),s.current=requestAnimationFrame(l)},[e,n]);c.useEffect(()=>(s.current=requestAnimationFrame(l),()=>{s.current&&cancelAnimationFrame(s.current)}),[l]);const u=c.useCallback(d=>{if(!(e!=null&&e.agents)||!o)return;const h=r.current,m=h.getBoundingClientRect(),x=h.width/m.width,f=h.height/m.height,g=(d.clientX-m.left)*x,v=(d.clientY-m.top)*f;let b=null,w=12;for(const k of e.agents){if(!k.alive)continue;const T=Math.sqrt((k.x-g)**2+(k.y-v)**2);T<w&&(w=T,b=k)}o(b)},[e,o]);return t.jsx("canvas",{ref:r,width:qe,height:ze,className:"w-full h-full cursor-crosshair",style:{imageRendering:"pixelated",display:"block"},onClick:u})}function S({label:e,value:o,unit:n="",trend:r,color:s="#6366f1",history:i=[],format:a="number"}){const l=c.useMemo(()=>a==="percent"?(o*100).toFixed(1)+"%":a==="currency"?"$"+re(o):a==="index"?o.toFixed(1):re(o),[o,a]),u=i.slice(-40).map((d,h)=>({i:h,v:d}));return t.jsxs("div",{className:"bg-[#12121a] border border-[#1e1e2e] rounded-lg p-3 flex flex-col gap-1",children:[t.jsx("div",{className:"text-[#64748b] text-xs uppercase tracking-wider font-mono",children:e}),t.jsxs("div",{className:"flex items-end gap-2",children:[t.jsx("span",{className:"text-white text-xl font-bold font-mono",style:{color:s},children:l}),n&&t.jsx("span",{className:"text-[#64748b] text-xs mb-1",children:n}),r!==void 0&&t.jsxs("span",{className:`text-xs mb-1 ${r>=0?"text-green-400":"text-red-400"}`,children:[r>=0?"â†‘":"â†“"," ",Math.abs(r*100).toFixed(1),"%"]})]}),u.length>5&&t.jsx("div",{className:"h-8 w-full",children:t.jsx(O,{width:"100%",height:"100%",children:t.jsx(Ae,{data:u,margin:{top:0,right:0,bottom:0,left:0},children:t.jsx(Ee,{type:"monotone",dataKey:"v",stroke:s,fill:s+"22",strokeWidth:1,dot:!1,isAnimationActive:!1})})})})]})}function rt({prices:e,supply:o,demand:n}){return t.jsxs("div",{className:"bg-[#12121a] border border-[#1e1e2e] rounded-lg p-3",children:[t.jsx("div",{className:"text-[#64748b] text-xs uppercase tracking-wider font-mono mb-2",children:"Market Prices"}),t.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:Object.entries(e||{}).map(([r,s])=>{const i=(o==null?void 0:o[r])||0,a=(n==null?void 0:n[r])||0,l=a>i?"text-red-400":"text-green-400",u=a>i?"â†‘":"â†“";return t.jsxs("div",{className:"flex justify-between items-center text-xs",children:[t.jsx("span",{style:{color:z[r]},className:"font-mono capitalize",children:r}),t.jsxs("span",{className:`font-mono font-bold ${l}`,children:["$",s.toFixed(1)," ",u]})]},r)})})]})}function it({value:e}){const o=(e*100).toFixed(1),n=e>.5?"#ef4444":e>.35?"#f59e0b":"#22c55e";return t.jsxs("div",{className:"bg-[#12121a] border border-[#1e1e2e] rounded-lg p-3",children:[t.jsxs("div",{className:"text-[#64748b] text-xs uppercase tracking-wider font-mono mb-2",children:["Inequality (Gini) â€” ",o]}),t.jsx("div",{className:"w-full bg-[#1e1e2e] rounded-full h-2 mb-1",children:t.jsx("div",{className:"h-2 rounded-full transition-all duration-500",style:{width:`${Math.min(100,e*100)}%`,backgroundColor:n}})}),t.jsxs("div",{className:"flex justify-between text-[10px] text-[#475569]",children:[t.jsx("span",{children:"Perfect Equality (0)"}),t.jsx("span",{children:"Total Inequality (1)"})]})]})}function at({event:e}){return t.jsxs("div",{className:"bg-[#1e1e2e] border border-[#334155] rounded px-2 py-1 text-xs flex items-center gap-1",children:[t.jsx("span",{children:e.icon}),t.jsx("span",{className:"text-[#e2e8f0] font-mono",children:e.name})]})}function lt({metrics:e,market:o,activeEvents:n=[]}){if(!e)return t.jsx("div",{className:"text-[#475569] text-sm font-mono p-4",children:"Loading metrics..."});const{history:r={}}=e;return t.jsxs("div",{className:"flex flex-col gap-2 overflow-y-auto h-full",children:[n.length>0&&t.jsx("div",{className:"flex flex-wrap gap-1 px-1",children:n.map(s=>t.jsx(at,{event:s},s.id))}),t.jsxs("div",{className:"text-[#475569] text-xs font-mono px-1",children:["Year ",e.year," Â· Tick ",e.tick," Â· Pop ",e.population]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx(S,{label:"GDP",value:e.gdp,format:"currency",trend:e.gdpGrowth,color:"#6366f1",history:r.gdp||[]}),t.jsx(S,{label:"Unemployment",value:e.unemployment,format:"percent",color:e.unemployment>.15?"#ef4444":"#22c55e",history:r.unemployment||[]}),t.jsx(S,{label:"Inflation (CPI)",value:e.cpi,format:"index",color:e.cpi>120?"#f97316":"#e2e8f0",history:r.cpi||[]}),t.jsx(S,{label:"Avg Wage",value:e.avgWage,format:"currency",color:"#06b6d4"})]}),t.jsx(it,{value:e.gini}),t.jsx(rt,{prices:o==null?void 0:o.prices,supply:o==null?void 0:o.supply,demand:o==null?void 0:o.demand}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx(S,{label:"Poverty Rate",value:e.povertyRate,format:"percent",color:e.povertyRate>.25?"#ef4444":"#94a3b8"}),t.jsx(S,{label:"Social Unrest",value:e.socialUnrest,format:"percent",color:e.socialUnrest>.5?"#ef4444":"#94a3b8",history:r.unrest||[]}),t.jsx(S,{label:"Businesses",value:e.businessCount,color:"#f59e0b"}),t.jsx(S,{label:"Gov Debt",value:Math.abs(e.govDebt||0),format:"currency",color:(e.govDebt||0)>1e3?"#ef4444":"#64748b"})]})]})}function re(e){return e==null||isNaN(e)?"0":Math.abs(e)>=1e9?(e/1e9).toFixed(1)+"B":Math.abs(e)>=1e6?(e/1e6).toFixed(1)+"M":Math.abs(e)>=1e3?(e/1e3).toFixed(1)+"K":Math.round(e).toString()}const ct=[{id:"incomeTax",name:"Income Tax",category:"fiscal",type:"slider",min:0,max:.6,step:.01,format:"percent",icon:"ðŸ›ï¸",description:"Tax on worker wages. Funds public spending. Too high reduces work incentive.",tradeoff:"â†‘ Revenue but â†“ Worker take-home pay"},{id:"corporateTax",name:"Corporate Tax",category:"fiscal",type:"slider",min:0,max:.5,step:.01,format:"percent",icon:"ðŸ¢",description:"Tax on business profits. High rates may deter investment.",tradeoff:"â†‘ Revenue but â†“ Business investment"},{id:"minWage",name:"Minimum Wage",category:"labor",type:"slider",min:0,max:30,step:1,format:"currency",icon:"ðŸ’¼",description:"Floor on wages. Protects workers but may price out low-skill labor.",tradeoff:"â†‘ Worker wages but â†‘ Unemployment risk"},{id:"ubi",name:"Universal Basic Income",category:"welfare",type:"slider",min:0,max:500,step:10,format:"currency",icon:"ðŸŽ",description:"Unconditional payment to all citizens. Eliminates poverty floor. Very expensive.",tradeoff:"â†‘ Equality but â†‘â†‘ Government spending"},{id:"interestRate",name:"Interest Rate",category:"monetary",type:"slider",min:0,max:.2,step:.005,format:"percent",icon:"ðŸ¦",description:"Cost of borrowing money. High rates fight inflation but slow growth.",tradeoff:"â†‘ Fights inflation but â†“ Business investment"},{id:"antiMonopoly",name:"Anti-Monopoly Laws",category:"regulation",type:"toggle",icon:"âš–ï¸",description:"Break up businesses that dominate a market. Prevents price gouging.",tradeoff:"â†‘ Competition but â†“ Economies of scale"},{id:"educationFunding",name:"Education Spending",category:"public",type:"slider",min:0,max:1,step:.05,format:"percent",icon:"ðŸ“š",description:"Invests in workforce quality over time. Slow payoff, lasting effect.",tradeoff:"â†‘ Long-term productivity but â†‘ Government spending now"},{id:"unemploymentBenefit",name:"Unemployment Benefits",category:"welfare",type:"slider",min:0,max:300,step:10,format:"currency",icon:"ðŸ›¡ï¸",description:"Payments to unemployed workers. Maintains demand but may reduce job search urgency.",tradeoff:"â†‘ Stability but may â†‘ Unemployment duration"},{id:"priceControlFood",name:"Food Price Controls",category:"regulation",type:"toggle",icon:"ðŸŒ¾",description:"Caps food prices to protect the poor. May cause shortages if price is too low.",tradeoff:"â†‘ Affordability but â†“ Farm investment"},{id:"priceControlHousing",name:"Rent Controls",category:"regulation",type:"toggle",icon:"ðŸ ",description:"Limits housing rent increases. Helps existing tenants, discourages new supply.",tradeoff:"â†‘ Affordability but â†“ New housing construction"},{id:"printMoney",name:"Quantitative Easing",category:"monetary",type:"slider",min:0,max:50,step:1,format:"number",icon:"ðŸ–¨ï¸",description:"Inject money into the economy. Boosts demand but causes inflation.",tradeoff:"â†‘ Short-term demand but â†‘â†‘ Inflation risk"},{id:"publicHealthcare",name:"Public Healthcare",category:"public",type:"toggle",icon:"ðŸ¥",description:"Government-funded health. Improves health, reduces death rate, increases happiness.",tradeoff:"â†‘ Health + happiness but â†‘â†‘ Government spending"},{id:"wealthTax",name:"Wealth Tax",category:"fiscal",type:"slider",min:0,max:.05,step:.001,format:"percent",icon:"ðŸ’Ž",description:"Annual tax on total wealth above threshold. Directly reduces inequality.",tradeoff:"â†‘ Equality but â†“ Capital accumulation"},{id:"openBorders",name:"Open Immigration",category:"labor",type:"toggle",icon:"ðŸŒ",description:"Allow skilled immigrants. Boosts labor supply and productivity, may suppress wages.",tradeoff:"â†‘ Productivity but â†‘ Job competition"},{id:"subsidiesFarming",name:"Farm Subsidies",category:"fiscal",type:"toggle",icon:"ðŸšœ",description:"Government support for food production. Lowers food prices but costs taxpayers.",tradeoff:"â†‘ Food supply + lower prices but â†‘ Spending"},{id:"fourDayWeek",name:"4-Day Work Week",category:"weird",type:"toggle",icon:"ðŸ—“ï¸",description:"Mandate a 4-day work week for all businesses. Workers are happier and healthier â€” but businesses get 20% less output per worker.",tradeoff:"â†‘ Worker health & morale but â†“ Business productivity"},{id:"robotTax",name:"Robot Tax",category:"weird",type:"slider",min:0,max:.5,step:.05,format:"percent",icon:"ðŸ¤–",description:"Tax on automated production in the tech sector. Slows job displacement and funds redistribution.",tradeoff:"â†‘ Employment but â†“ Tech sector growth"},{id:"breadAndCircuses",name:"Bread & Circuses",category:"weird",type:"toggle",icon:"ðŸŽª",description:"Government-funded free food and entertainment for all. Romans used it to keep the masses pacified. Crushes unrest â€” briefly.",tradeoff:"â†“ Unrest now but â†‘ Gov spending + dependency risk"},{id:"mandatoryProfitShare",name:"Mandatory Profit Sharing",category:"weird",type:"slider",min:0,max:.3,step:.05,format:"percent",icon:"ðŸ¤",description:"Businesses must share a percentage of profits with all employees. Reduces inequality, may deter investment.",tradeoff:"â†‘ Worker wealth + lower Gini but â†“ Business capital"},{id:"landValueTax",name:"Land Value Tax",category:"weird",type:"slider",min:0,max:.05,step:.005,format:"percent",icon:"ðŸŒ",description:"Annual tax on land value only (not buildings). Georgist reform â€” discourages speculation, funds government efficiently.",tradeoff:"â†‘ Gov revenue + lower housing prices but unpopular with landowners"},{id:"banAdvertising",name:"Ban Advertising",category:"weird",type:"toggle",icon:"ðŸš«",description:"Outlaws all commercial advertising. Luxury demand collapses. People only buy what they actually need. Businesses struggle to grow.",tradeoff:"â†“ Luxury consumption + lower Gini but â†“ Business growth"},{id:"debtJubilee",name:"Debt Jubilee",category:"weird",type:"toggle",icon:"ðŸŽº",description:"One-time Biblical-style cancellation of all debts. Agents with negative wealth are reset to zero. Happens once then turns off.",tradeoff:"Massive one-time equality reset â€” may destabilize lenders"},{id:"lotteryRedistribution",name:"Wealth Lottery",category:"weird",type:"toggle",icon:"ðŸŽ°",description:'Each tick, a random wealthy citizen pays a "luck tax" directly to a random poor citizen. Chaotic but surprisingly equalizing.',tradeoff:"â†“ Extreme wealth concentration but unpredictable and arbitrary"},{id:"sumptuary",name:"Sumptuary Laws",category:"weird",type:"toggle",icon:"ðŸ‘‘",description:"Legal limits on luxury spending for the wealthy. Medieval kings used these. Luxury sector collapses but inequality drops.",tradeoff:"â†“ Inequality + â†“ Gini but luxury sector destruction"},{id:"degrowth",name:"Degrowth Policy",category:"weird",type:"toggle",icon:"ðŸŒ±",description:"Deliberately slow economic growth. Less GDP obsession means less stress, more stability, better health â€” but economists freak out.",tradeoff:"â†“ GDP growth + â†‘ Health & stability but controversial"},{id:"algoCentralPlanning",name:"Algorithmic Planning",category:"weird",type:"toggle",icon:"ðŸ§®",description:"An AI algorithm sets all prices and wages. Eliminates market volatility. Cold, efficient, and slightly dystopian.",tradeoff:"â†“ Price chaos but removes market discovery + creepy"},{id:"universalBankAccount",name:"Universal Bank Account",category:"weird",type:"toggle",icon:"ðŸ§",description:"Every citizen gets a free government bank account. Reduces financial exclusion, enables direct transfers, improves savings rates.",tradeoff:"â†‘ Financial inclusion + savings but â†‘ Gov infrastructure cost"}],dt={fiscal:{label:"Fiscal Policy",color:"#3b82f6"},monetary:{label:"Monetary Policy",color:"#f59e0b"},labor:{label:"Labor Market",color:"#22c55e"},welfare:{label:"Welfare",color:"#ec4899"},regulation:{label:"Regulation",color:"#8b5cf6"},public:{label:"Public Services",color:"#06b6d4"},weird:{label:"âš—ï¸ Weird Laws",color:"#f97316"}};function ut({policy:e,value:o,onChange:n}){const r=s=>e.format==="percent"?(s*100).toFixed(0)+"%":e.format==="currency"?"$"+s:s;return t.jsxs("div",{className:"group",children:[t.jsxs("div",{className:"flex justify-between items-center mb-1",children:[t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx("span",{className:"text-sm",children:e.icon}),t.jsx("span",{className:"text-xs text-[#e2e8f0] font-mono",children:e.name})]}),t.jsx("span",{className:"text-xs font-bold font-mono text-[#6366f1]",children:r(o)})]}),t.jsx("input",{type:"range",min:e.min,max:e.max,step:e.step,value:o,onChange:s=>n(e.id,parseFloat(s.target.value)),className:"w-full h-1.5 rounded-full appearance-none cursor-pointer",style:{background:`linear-gradient(to right, #6366f1 0%, #6366f1 ${(o-e.min)/(e.max-e.min)*100}%, #1e1e2e ${(o-e.min)/(e.max-e.min)*100}%, #1e1e2e 100%)`},title:e.description}),t.jsx("div",{className:"hidden group-hover:block text-[10px] text-[#475569] mt-1 leading-tight",children:e.tradeoff})]})}function ft({policy:e,value:o,onChange:n}){return t.jsxs("div",{className:"flex items-center justify-between group",children:[t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx("span",{className:"text-sm",children:e.icon}),t.jsx("span",{className:"text-xs text-[#e2e8f0] font-mono",children:e.name})]}),t.jsx("button",{onClick:()=>n(e.id,!o),className:`relative w-9 h-5 rounded-full transition-colors duration-200 flex-shrink-0 ${o?"bg-[#6366f1]":"bg-[#334155]"}`,children:t.jsx("span",{className:`absolute top-0.5 w-4 h-4 bg-white rounded-full shadow transition-transform duration-200 ${o?"translate-x-4":"translate-x-0.5"}`})})]})}function ht({policies:e,onPolicyChange:o}){const[n,r]=c.useState("fiscal"),[s,i]=c.useState(!0),a=ct.filter(l=>l.category===n);return t.jsxs("div",{className:"flex flex-col h-full",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h3",{className:"text-xs uppercase tracking-widest text-[#64748b] font-mono",children:"Policy Controls"}),t.jsx("button",{onClick:()=>i(!s),className:"text-[#475569] hover:text-[#e2e8f0] text-xs",children:s?"â–¼":"â–¶"})]}),s&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:Object.entries(dt).map(([l,u])=>t.jsx("button",{onClick:()=>r(l),className:`text-[10px] px-2 py-0.5 rounded font-mono transition-colors ${n===l?"text-white":"text-[#475569] hover:text-[#94a3b8]"}`,style:{backgroundColor:n===l?u.color+"33":"transparent",borderColor:u.color+"44",border:"1px solid"},children:u.label},l))}),t.jsx("div",{className:"flex flex-col gap-3 overflow-y-auto flex-1",children:a.map(l=>t.jsx("div",{children:l.type==="slider"?t.jsx(ut,{policy:l,value:(e==null?void 0:e[l.id])??0,onChange:o}):t.jsx(ft,{policy:l,value:(e==null?void 0:e[l.id])??!1,onChange:o})},l.id))})]})]})}const mt=[{label:"1Ã—",value:1,title:"Slow â€” watch individual agents"},{label:"5Ã—",value:5,title:"Normal play"},{label:"20Ã—",value:20,title:"Fast-forward"},{label:"Max",value:60,title:"Stress test"}];function pt({paused:e,speed:o,onPause:n,onResume:r,onReset:s,onSpeedChange:i,onScenarioOpen:a,onShockMe:l,scenarioName:u,year:d,narratorEnabled:h,narratorLoading:m,onNarratorToggle:x}){const[f,g]=c.useState(!1),v=()=>{navigator.clipboard&&(navigator.clipboard.writeText(window.location.href),g(!0),setTimeout(()=>g(!1),2e3))};return t.jsxs("header",{className:"flex items-center justify-between px-4 py-2 bg-[#0a0a0f] border-b border-[#1e1e2e] flex-wrap gap-2",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-lg",children:"ðŸ¾"}),t.jsx("span",{className:"text-[#e2e8f0] font-bold font-mono text-sm hidden sm:block",children:"EconSim"})]}),t.jsxs("button",{onClick:a,className:"text-xs font-mono text-[#6366f1] hover:text-[#818cf8] border border-[#6366f133] hover:border-[#6366f166] rounded px-2 py-1 transition-colors",children:[u||"Free Market"," â–¾"]}),d!==void 0&&t.jsxs("span",{className:"text-[#475569] text-xs font-mono",children:["Year ",d]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"flex items-center gap-0.5 bg-[#12121a] border border-[#1e1e2e] rounded px-1",children:mt.map(b=>t.jsx("button",{onClick:()=>i(b.value),title:b.title,className:`text-xs font-mono px-2 py-1 rounded transition-colors ${o===b.value?"bg-[#6366f1] text-white":"text-[#64748b] hover:text-[#e2e8f0]"}`,children:b.label},b.value))}),t.jsx("button",{onClick:e?r:n,className:`flex items-center gap-1 text-xs font-mono px-3 py-1.5 rounded border transition-colors
            border-[#1e1e2e] text-[#e2e8f0] hover:border-[#6366f1] hover:text-[#6366f1]`,children:e?"â–¶ Play":"â¸ Pause"}),t.jsx("button",{onClick:s,className:`text-xs font-mono px-3 py-1.5 rounded border border-[#1e1e2e] text-[#64748b]
            hover:border-[#ef4444] hover:text-[#ef4444] transition-colors`,title:"Reset simulation",children:"â†º Reset"}),t.jsx("button",{onClick:l,className:`text-xs font-mono px-3 py-1.5 rounded border border-[#f59e0b33] text-[#f59e0b]
            hover:bg-[#f59e0b11] transition-colors`,title:"Trigger a random economic event",children:"âš¡ Shock"}),t.jsx("button",{onClick:v,className:`text-xs font-mono px-3 py-1.5 rounded border border-[#1e1e2e] text-[#64748b]
            hover:border-[#22c55e] hover:text-[#22c55e] transition-colors`,title:"Copy shareable link",children:f?"âœ“ Copied!":"ðŸ”— Share"}),t.jsx("button",{onClick:x,disabled:m,className:`text-xs font-mono px-3 py-1.5 rounded border transition-colors ${h?"border-[#06b6d4] text-[#06b6d4] bg-[#06b6d411]":"border-[#1e1e2e] text-[#475569] hover:border-[#06b6d4] hover:text-[#06b6d4]"} ${m?"opacity-50 cursor-wait":""}`,title:h?"Disable narration":"Enable AI narration (loads ~40MB model)",children:m?"â³ Loadingâ€¦":h?"ðŸ”Š Voice On":"ðŸ”‡ Voice"})]})]})}const q={freeMarket:{id:"freeMarket",name:"Free Market Utopia",subtitle:"No rules. Pure capitalism.",description:"Zero regulation. No minimum wage, no taxes, no safety net. Watch monopolies form naturally and see who wins â€” and who gets left behind.",icon:"ðŸ¦…",difficulty:"Observe",color:"#3b82f6",isHistorical:!1,policies:{incomeTax:0,corporateTax:0,minWage:0,ubi:0,interestRate:.02,antiMonopoly:!1,educationFunding:0,unemploymentBenefit:0,priceControlFood:!1,priceControlHousing:!1,printMoney:0,publicHealthcare:!1,wealthTax:0,openBorders:!1,subsidiesFarming:!1},agentCount:200,businessCount:20,wealthMultiplier:1.2,wealthInequality:1.5,avgSkill:.5,lesson:"Natural monopolies emerge quickly. The rich get richer. But GDP grows fast at first."},debtSpiral:{id:"debtSpiral",name:"The Debt Spiral",subtitle:"Borrowed too much. Now what?",description:"The government spent heavily on social programs. Debt is high, deficit is growing. Austerity or default â€” pick your poison.",icon:"ðŸ’¸",difficulty:"Hard",color:"#ef4444",isHistorical:!1,policies:{incomeTax:.45,corporateTax:.35,minWage:15,ubi:200,interestRate:.12,antiMonopoly:!0,educationFunding:.8,unemploymentBenefit:150,priceControlFood:!1,priceControlHousing:!1,printMoney:5,publicHealthcare:!0,wealthTax:.02,openBorders:!1,subsidiesFarming:!1},agentCount:200,businessCount:18,wealthMultiplier:.8,wealthInequality:.8,avgSkill:.55,startGovDebt:5e3,lesson:"Cutting programs causes pain now. Keeping them causes pain later. The political economy of austerity."},techDisruption:{id:"techDisruption",name:"Tech Disruption",subtitle:"Automation is coming for jobs.",description:"A stable, balanced economy. Then a tech breakthrough hits â€” half the jobs can be automated. Will you adapt or collapse?",icon:"ðŸ¤–",difficulty:"Medium",color:"#8b5cf6",isHistorical:!1,policies:{incomeTax:.28,corporateTax:.21,minWage:12,ubi:0,interestRate:.05,antiMonopoly:!1,educationFunding:.5,unemploymentBenefit:80,priceControlFood:!1,priceControlHousing:!1,printMoney:0,publicHealthcare:!1,wealthTax:0,openBorders:!1,subsidiesFarming:!1},agentCount:200,businessCount:20,wealthMultiplier:1,wealthInequality:1,avgSkill:.5,scheduledEvents:[{type:"techBreakthrough",atTick:200}],lesson:"Automation creates wealth but destroys jobs. UBI or retraining â€” which policy saves more people?"},greatDepression:{id:"greatDepression",name:"The Great Depression",subtitle:"October 1929. The markets have collapsed.",description:'GDP has fallen 30%. Unemployment is climbing toward 25%. Banks are failing daily. Hoover says "be patient." Do you agree?',icon:"ðŸ“‰",difficulty:"Very Hard",color:"#78716c",isHistorical:!0,era:"1929â€“1939 Â· United States",durationYears:15,policies:{incomeTax:.02,corporateTax:.12,minWage:0,ubi:0,interestRate:.06,antiMonopoly:!1,educationFunding:.1,unemploymentBenefit:0,priceControlFood:!1,priceControlHousing:!1,printMoney:0,publicHealthcare:!1,wealthTax:0,openBorders:!1,subsidiesFarming:!1},agentCount:200,businessCount:12,wealthMultiplier:.35,wealthInequality:2,avgSkill:.4,scheduledEvents:[{type:"recession",atTick:1},{type:"financialBubble",atTick:80}],lesson:"Austerity deepened the Depression. FDR's New Deal proved government spending could restart demand."},weimarHyperinflation:{id:"weimarHyperinflation",name:"Weimar Hyperinflation",subtitle:"A loaf of bread costs a wheelbarrow of cash.",description:"Post-WWI Germany is printing money to pay reparations. Inflation is doubling daily. The middle class is being wiped out. Can you stabilize the currency before society collapses?",icon:"ðŸ’¹",difficulty:"Expert",color:"#dc2626",isHistorical:!0,era:"1921â€“1924 Â· Germany",durationYears:10,policies:{incomeTax:.15,corporateTax:.1,minWage:0,ubi:0,interestRate:.01,antiMonopoly:!1,educationFunding:.2,unemploymentBenefit:0,priceControlFood:!0,priceControlHousing:!1,printMoney:40,publicHealthcare:!1,wealthTax:0,openBorders:!1,subsidiesFarming:!1},agentCount:180,businessCount:15,wealthMultiplier:.5,wealthInequality:1.8,avgSkill:.45,scheduledEvents:[],lesson:"Stopping hyperinflation requires cold turkey: halt money printing, issue new credible currency, accept short-term pain."},stagflation1970s:{id:"stagflation1970s",name:"1970s Stagflation",subtitle:"Inflation up. Unemployment up. Nothing works.",description:"OPEC's oil embargo just hit. Prices are surging but the economy is stagnating. Your standard policy tools are pointing in opposite directions. What do you do?",icon:"â›½",difficulty:"Hard",color:"#d97706",isHistorical:!0,era:"1973â€“1982 Â· United States",durationYears:12,policies:{incomeTax:.3,corporateTax:.48,minWage:8,ubi:0,interestRate:.06,antiMonopoly:!1,educationFunding:.4,unemploymentBenefit:100,priceControlFood:!1,priceControlHousing:!1,printMoney:8,publicHealthcare:!1,wealthTax:0,openBorders:!1,subsidiesFarming:!1},agentCount:200,businessCount:18,wealthMultiplier:.85,wealthInequality:1.1,avgSkill:.5,scheduledEvents:[{type:"cropFailure",atTick:20},{type:"recession",atTick:150}],lesson:"Stagflation broke Keynesian consensus. Volcker's painful rate hikes eventually worked â€” but cost millions their jobs."},crisisOf2008:{id:"crisisOf2008",name:"2008 Financial Crisis",subtitle:"Lehman just failed. The banks are frozen.",description:"The US housing bubble has burst. Banks are insolvent. Credit is frozen. The global economy is in freefall. Bail out the banks, let them fail, or something else?",icon:"ðŸ¦",difficulty:"Hard",color:"#7c3aed",isHistorical:!0,era:"2008â€“2015 Â· Global",durationYears:10,policies:{incomeTax:.28,corporateTax:.35,minWage:10,ubi:0,interestRate:.05,antiMonopoly:!1,educationFunding:.4,unemploymentBenefit:100,priceControlFood:!1,priceControlHousing:!1,printMoney:0,publicHealthcare:!1,wealthTax:0,openBorders:!1,subsidiesFarming:!1},agentCount:200,businessCount:16,wealthMultiplier:.7,wealthInequality:1.6,avgSkill:.5,scheduledEvents:[{type:"financialBubble",atTick:1},{type:"recession",atTick:30}],lesson:"Bailouts prevented a depression but rewarded recklessness. The political consequences lasted a decade."},japanLostDecade:{id:"japanLostDecade",name:"Japan's Lost Decade",subtitle:"Zero rates. Zero growth. Zero inflation.",description:"Japan's asset bubble burst in 1991. Interest rates are near zero. Stimulus packages come and go. Nothing works. Can you escape the deflationary trap that trapped Japan for 20 years?",icon:"ðŸ—¾",difficulty:"Expert",color:"#0891b2",isHistorical:!0,era:"1991â€“2010 Â· Japan",durationYears:15,policies:{incomeTax:.33,corporateTax:.38,minWage:6,ubi:0,interestRate:.005,antiMonopoly:!1,educationFunding:.6,unemploymentBenefit:80,priceControlFood:!1,priceControlHousing:!1,printMoney:2,publicHealthcare:!0,wealthTax:0,openBorders:!1,subsidiesFarming:!1},agentCount:200,businessCount:20,wealthMultiplier:.9,wealthInequality:.9,avgSkill:.65,scheduledEvents:[{type:"financialBubble",atTick:1},{type:"recession",atTick:10}],lesson:"Half-measures and zombie banks prolonged Japan's stagnation for 20 years. Swift, decisive action matters."},nordicMiracle:{id:"nordicMiracle",name:"Build the Nordic Model",subtitle:"High taxes. High trust. High happiness.",description:"You're building a new nation. Can you achieve the Nordic balance: low inequality, high productivity, strong safety net, and sustained growth? This is what success looks like.",icon:"ðŸŒ",difficulty:"Blueprint",color:"#059669",isHistorical:!0,era:"Reference Model Â· Scandinavia",durationYears:20,policies:{incomeTax:.45,corporateTax:.25,minWage:18,ubi:0,interestRate:.03,antiMonopoly:!0,educationFunding:.9,unemploymentBenefit:200,priceControlFood:!1,priceControlHousing:!1,printMoney:0,publicHealthcare:!0,wealthTax:.01,openBorders:!1,subsidiesFarming:!0},agentCount:200,businessCount:22,wealthMultiplier:1,wealthInequality:.7,avgSkill:.6,avgEducation:.65,scheduledEvents:[],lesson:"The Nordic model requires high institutional trust, universal services, AND open competitive markets. All three."}},he=Object.values(q),xt=he.filter(e=>!e.isHistorical),bt=he.filter(e=>e.isHistorical);function gt({scenario:e,onSelect:o,current:n}){const r=n===e.id;return t.jsx("button",{onClick:()=>o(e.id),className:`w-full text-left p-4 rounded-xl border transition-all ${r?"":"border-[#1e1e2e] bg-[#12121a] hover:border-[#334155]"}`,style:{borderColor:r?e.color:void 0,backgroundColor:r?e.color+"10":void 0},children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("span",{className:"text-2xl",children:e.icon}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-0.5",children:[t.jsx("span",{className:"text-white font-bold text-sm",children:e.name}),t.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded font-mono",style:{backgroundColor:e.color+"22",color:e.color},children:e.difficulty}),e.durationYears&&t.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded font-mono bg-[#1e1e2e] text-[#64748b]",children:[e.durationYears,"yr challenge"]})]}),e.era&&t.jsx("div",{className:"text-[10px] font-mono text-[#475569] mb-1",children:e.era}),t.jsx("p",{className:"text-[#64748b] text-xs leading-relaxed",children:e.description}),t.jsxs("div",{className:"mt-2 text-[10px] font-mono text-[#475569] border-l-2 pl-2",style:{borderColor:e.color+"55"},children:["ðŸ’¡ ",e.lesson]})]})]})})}function ie({title:e,subtitle:o,scenarios:n,current:r,onSelect:s}){return t.jsxs("div",{children:[t.jsxs("div",{className:"mb-3",children:[t.jsx("h3",{className:"text-white font-bold text-sm",children:e}),o&&t.jsx("p",{className:"text-[#475569] text-xs mt-0.5",children:o})]}),t.jsx("div",{className:"flex flex-col gap-2",children:n.map(i=>t.jsx(gt,{scenario:i,current:r,onSelect:s},i.id))})]})}function yt({current:e,onSelect:o,onClose:n}){return t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/75 backdrop-blur-sm",children:t.jsxs("div",{className:"bg-[#0d0d14] border border-[#1e1e2e] rounded-2xl p-6 max-w-2xl w-full mx-4 max-h-[92vh] overflow-y-auto shadow-2xl",children:[t.jsxs("div",{className:"flex items-start justify-between mb-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-white font-bold text-xl font-mono",children:"Choose Scenario"}),t.jsx("p",{className:"text-[#64748b] text-sm mt-1",children:"Sandbox: experiment freely. Historical Crises: can you do better than history did?"})]}),t.jsx("button",{onClick:n,className:"text-[#475569] hover:text-white text-xl ml-4 flex-shrink-0",children:"âœ•"})]}),t.jsxs("div",{className:"flex flex-col gap-6",children:[t.jsx(ie,{title:"ðŸ§ª Sandbox",subtitle:"No time limit. Experiment with policy freely.",scenarios:xt,current:e,onSelect:r=>{o(r),n()}}),t.jsx("div",{className:"border-t border-[#1e1e2e] pt-6",children:t.jsx(ie,{title:"ðŸ“œ Historical Crises â€” Can You Do Better?",subtitle:"Real economic crises, simulated. Each has objectives and a report card. Your outcome is compared to what actually happened.",scenarios:bt,current:e,onSelect:r=>{o(r),n()}})})]}),t.jsx("div",{className:"mt-4 text-center text-[#334155] text-xs font-mono",children:"Changing scenario resets the simulation"})]})})}const vt={monopoly_forming:{title:"Monopoly Alert",emoji:"ðŸ¢",body:"One business now controls over 60% of its market. Without competition, prices rise and quality drops.",realWorld:"Standard Oil controlled 91% of US oil in 1904. The Sherman Antitrust Act (1890) broke it up. Today, similar debates surround Big Tech.",color:"#ef4444"},high_inequality:{title:"Inequality Spike",emoji:"ðŸ“Š",body:"Wealth concentration is extreme. The Gini coefficient measures this: 0 = perfect equality, 1 = one person owns everything.",realWorld:"The US Gini is ~0.41. Scandinavia: ~0.28. Brazil: ~0.53. High inequality correlates with lower social mobility and higher crime.",color:"#f59e0b"},high_unemployment:{title:"Unemployment Crisis",emoji:"ðŸ“‰",body:"Mass unemployment creates a vicious cycle: fewer workers â†’ less spending â†’ fewer sales â†’ more layoffs.",realWorld:"Keynes' insight: in a recession, government spending can break this cycle by creating demand when the private sector won't.",color:"#ef4444"},inflation_spiral:{title:"Inflation Warning",emoji:"ðŸ”¥",body:"Prices are rising faster than wages. Your money buys less each day. The purchasing power of savings erodes.",realWorld:"Zimbabwe's hyperinflation (2008) reached 89.7 sextillion % monthly. The cure: independent central banks that raise rates.",color:"#f97316"},min_wage_tradeoff:{title:"Minimum Wage Tradeoff",emoji:"âš–ï¸",body:"A higher minimum wage raised living standards â€” but some businesses can no longer afford to hire.",realWorld:"Seattle's $15 minimum wage (2015) study: restaurant employment rose in some areas, fell in others. Context matters enormously.",color:"#6366f1"},budget_surplus:{title:"Fiscal Surplus!",emoji:"ðŸ’°",body:"Tax revenue exceeds spending. The government can pay down debt or invest in future growth.",realWorld:"The US ran surpluses 1998-2001. Norway's oil fund (built from surpluses) now exceeds $1.4 trillion.",color:"#22c55e"},stagnation:{title:"Stagflation Risk",emoji:"ðŸ˜°",body:"The economy is shrinking AND unemployment is rising â€” the worst of both worlds. Traditional policy tools conflict.",realWorld:"The 1970s oil crisis created stagflation. Volcker killed it (1980) by raising interest rates to 20% â€” causing a painful recession.",color:"#8b5cf6"},poverty_trap:{title:"Poverty Trap",emoji:"ðŸª¤",body:"Workers in poverty can't afford better nutrition, education, or healthcare â€” which keeps them in poverty.",realWorld:"The poverty trap: every dollar earned reduces welfare by $1. Effective marginal tax rates for the poor can exceed 80%.",color:"#ef4444"},dutch_disease:{title:"Resource Dependency",emoji:"â›½",body:"One sector dominates, crowding out others. High-earning sectors attract all workers, leaving other industries struggling.",realWorld:`The "Dutch Disease": Netherlands' 1960s natural gas discovery boosted the guilder, making exports uncompetitive.`,color:"#f59e0b"},ubi_effect:{title:"UBI Effect Observed",emoji:"ðŸŽ¯",body:"Universal Basic Income is reducing poverty and providing security. Some people are taking more risks â€” starting businesses.",realWorld:"Finland's UBI experiment (2017-18): recipients reported better wellbeing, mental health improved. Employment was neutral.",color:"#22c55e"}};function wt({insight:e,onDismiss:o}){const[n,r]=c.useState(!1);if(c.useEffect(()=>{e&&r(!0)},[e]),!e||!n)return null;const s=vt[e.id]||{title:e.title,emoji:"ðŸ’¡",body:e.body,realWorld:e.realWorld,color:"#6366f1"},i=()=>{r(!1),setTimeout(()=>o==null?void 0:o(),300)};return t.jsx("div",{className:`fixed bottom-6 right-6 z-40 max-w-sm transition-all duration-300 ${n?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:t.jsx("div",{className:"bg-[#0d0d14] border rounded-xl p-4 shadow-2xl",style:{borderColor:s.color+"66"},children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("span",{className:"text-2xl flex-shrink-0",children:s.emoji}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsx("h4",{className:"text-white font-bold text-sm",children:s.title}),t.jsx("button",{onClick:i,className:"text-[#475569] hover:text-white text-sm ml-2",children:"âœ•"})]}),t.jsx("p",{className:"text-[#94a3b8] text-xs leading-relaxed mb-2",children:s.body}),t.jsxs("div",{className:"text-[10px] text-[#64748b] leading-relaxed border-l-2 pl-2 italic",style:{borderColor:s.color+"66"},children:["ðŸŒ ",s.realWorld]}),t.jsxs("div",{className:"text-[9px] text-[#334155] mt-2 font-mono",children:["Year ",e.year," Â· ",e.id]})]})]})})})}const jt={working:"Employed",unemployed:"Unemployed",child:"Child",retired:"Retired",owner:"Business Owner",dead:"Deceased"},kt={working:"#22c55e",unemployed:"#ef4444",child:"#94a3b8",retired:"#64748b",owner:"#f59e0b",dead:"#374151"};function Nt({agent:e,onClose:o}){if(!e)return null;const n=Math.floor(e.age/52),r=fe(e.wealth);return t.jsxs("div",{className:"fixed top-20 left-1/2 -translate-x-1/2 z-40 bg-[#0d0d14] border border-[#1e1e2e] rounded-xl p-4 shadow-2xl max-w-xs w-full",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-4 h-4 rounded-full border border-white/20",style:{backgroundColor:r}}),t.jsxs("span",{className:"text-white font-bold font-mono text-sm",children:["Agent #",e.id]})]}),t.jsx("button",{onClick:o,className:"text-[#475569] hover:text-white text-sm",children:"âœ•"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1.5 text-xs mb-3",children:[t.jsx(N,{label:"Age",value:`${n} yrs`}),t.jsx(N,{label:"Status",value:jt[e.state]||e.state,color:kt[e.state]}),t.jsx(N,{label:"Wealth",value:`$${Math.round(e.wealth)}`,color:r}),t.jsx(N,{label:"Wage",value:e.wage>0?`$${e.wage.toFixed(1)}/tick`:"â€”"}),t.jsx(N,{label:"Skill",value:`${(e.skill*100).toFixed(0)}%`}),t.jsx(N,{label:"Education",value:`${(e.education*100).toFixed(0)}%`}),t.jsx(N,{label:"Health",value:`${(e.health*100).toFixed(0)}%`}),t.jsx(N,{label:"Happiness",value:`${(e.happiness*100).toFixed(0)}%`,color:e.happiness>.6?"#22c55e":e.happiness<.3?"#ef4444":"#e2e8f0"}),e.jobSector&&t.jsx(N,{label:"Sector",value:e.jobSector}),t.jsx(N,{label:"Class",value:e.socialClass,color:e.socialClass==="rich"?"#f59e0b":e.socialClass==="poor"?"#ef4444":"#e2e8f0"})]}),e.events&&e.events.length>0&&t.jsxs("div",{children:[t.jsx("div",{className:"text-[#475569] text-[10px] uppercase tracking-wider font-mono mb-1.5",children:"Life History"}),t.jsx("ul",{className:"space-y-0.5 max-h-24 overflow-y-auto",children:e.events.map((s,i)=>t.jsxs("li",{className:"text-[10px] text-[#64748b] font-mono leading-tight",children:["â€¢ ",s]},i))})]})]})}function N({label:e,value:o,color:n}){return t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"text-[#475569] font-mono",children:e}),t.jsx("span",{className:"font-mono font-medium",style:{color:n||"#e2e8f0"},children:o})]})}function Ct(e){return e<100?"<$100":e<300?"$100-300":e<800?"$300-800":e<2e3?"$800-2K":e<5e3?"$2K-5K":">$5K"}const ae=["<$100","$100-300","$300-800","$800-2K","$2K-5K",">$5K"],St=["#ef4444","#f97316","#eab308","#22c55e","#06b6d4","#f59e0b"];function Tt({agents:e}){const o=c.useMemo(()=>{if(!(e!=null&&e.length))return[];const r={};ae.forEach(s=>{r[s]=0});for(const s of e){if(!s.alive)continue;const i=Ct(s.wealth);r[i]=(r[i]||0)+1}return ae.map((s,i)=>({name:s,count:r[s]||0,fill:St[i]}))},[e]),n=c.useMemo(()=>{if(!(e!=null&&e.length))return[];const r=e.filter(s=>s.alive).map(s=>Math.max(0,s.wealth));return Ue(r,20)},[e]);return t.jsxs("div",{className:"flex flex-col gap-3",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-[#64748b] text-xs uppercase tracking-wider font-mono mb-2",children:"Wealth Distribution"}),t.jsx("div",{className:"h-28",children:t.jsx(O,{width:"100%",height:"100%",children:t.jsxs(Ie,{data:o,margin:{top:0,right:0,bottom:0,left:-20},children:[t.jsx(Q,{dataKey:"name",tick:{fontSize:8,fill:"#475569",fontFamily:"monospace"},axisLine:!1,tickLine:!1}),t.jsx(ee,{tick:{fontSize:8,fill:"#475569",fontFamily:"monospace"},axisLine:!1,tickLine:!1}),t.jsx(te,{contentStyle:{background:"#12121a",border:"1px solid #1e1e2e",fontSize:10},labelStyle:{color:"#e2e8f0"},itemStyle:{color:"#6366f1"}}),t.jsx(Re,{dataKey:"count",radius:[2,2,0,0],children:o.map((r,s)=>t.jsx(_e,{fill:r.fill},s))})]})})})]}),n.length>2&&t.jsxs("div",{children:[t.jsx("div",{className:"text-[#64748b] text-xs uppercase tracking-wider font-mono mb-2",children:"Lorenz Curve"}),t.jsx("div",{className:"h-24",children:t.jsx(O,{width:"100%",height:"100%",children:t.jsxs(Be,{data:n,margin:{top:0,right:0,bottom:0,left:-20},children:[t.jsx(Q,{dataKey:"population",tick:{fontSize:8,fill:"#475569"},axisLine:!1,tickLine:!1,tickFormatter:r=>r+"%"}),t.jsx(ee,{tick:{fontSize:8,fill:"#475569"},axisLine:!1,tickLine:!1,tickFormatter:r=>r+"%"}),t.jsx(ne,{data:[{population:0,perfect:0},{population:100,perfect:100}],type:"linear",dataKey:"perfect",stroke:"#334155",strokeWidth:1,dot:!1,strokeDasharray:"3 3"}),t.jsx(ne,{type:"monotone",dataKey:"wealth",stroke:"#6366f1",strokeWidth:1.5,dot:!1,isAnimationActive:!1}),t.jsx(te,{contentStyle:{background:"#12121a",border:"1px solid #1e1e2e",fontSize:10},formatter:r=>r.toFixed(1)+"%"})]})})}),t.jsx("div",{className:"text-[10px] text-[#334155] text-center font-mono",children:"Area between lines = Gini coefficient"})]})]})}function Pt({objectives:e=[],scenarioDurationYears:o,year:n,scenarioName:r}){if(!e.length)return t.jsxs("div",{className:"text-[#334155] text-xs font-mono p-2 text-center",children:["No objectives in sandbox mode.",t.jsx("br",{}),t.jsx("span",{className:"text-[#475569]",children:"Pick a Historical Crisis for a timed challenge."})]});const s=o?Math.max(0,o-(n||0)):null,i=e.filter(a=>a.completed).length;return t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"text-[#64748b] text-xs font-mono",children:[i,"/",e.length," objectives met"]}),s!==null&&t.jsxs("div",{className:`text-xs font-mono font-bold ${s<3?"text-[#ef4444]":"text-[#94a3b8]"}`,children:[s,"yr left"]})]}),o&&t.jsx("div",{className:"w-full bg-[#1e1e2e] rounded-full h-1",children:t.jsx("div",{className:"h-1 rounded-full transition-all duration-500 bg-[#6366f1]",style:{width:`${Math.min(100,(n||0)/o*100)}%`}})}),e.map(a=>{const l=a.completed?"#22c55e":a.met?"#f59e0b":"#ef4444",u=a.completed?"Complete":a.met?"Activeâ€¦":"Not met";return t.jsxs("div",{className:"bg-[#12121a] border rounded-lg p-3",style:{borderColor:l+"44"},children:[t.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1.5",children:[t.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-mono text-[#e2e8f0]",children:[t.jsx("span",{children:a.icon}),t.jsx("span",{children:a.label})]}),t.jsx("span",{className:"text-[10px] font-mono flex-shrink-0",style:{color:l},children:u})]}),t.jsx("div",{className:"text-[10px] text-[#475569] mb-1.5",children:a.description}),t.jsx("div",{className:"w-full bg-[#0a0a0f] rounded-full h-1.5 mb-1",children:t.jsx("div",{className:"h-1.5 rounded-full transition-all duration-500",style:{width:`${Math.round(a.progress*100)}%`,backgroundColor:l}})}),a.met&&!a.completed&&a.sustainProgress>0&&t.jsxs("div",{className:"text-[9px] text-[#475569] font-mono",children:["Sustaining: ",Math.round(a.sustainProgress*100),"%"]}),!a.completed&&t.jsxs("div",{className:"text-[9px] text-[#334155] mt-1 leading-tight italic",children:["ðŸ’¡ ",a.tip]})]},a.id)})]})}function Mt(e){const o=e.id,n=e.effectOverride||{},r=[];return n.demandMultiplier!==void 0&&r.push(n.demandMultiplier>.7?"â†‘ GDP recovery":"â†“ GDP contraction"),n.wealthCrashPhase!==void 0&&r.push(n.wealthCrashPhase>.5?"â†— Softer crash":"â†˜ Hard crash"),n.deathRateMultiplier!==void 0&&r.push(n.deathRateMultiplier>2?"â†‘â†‘ Deaths":"â†‘ Fewer deaths"),n.techProductivityMultiplier!==void 0&&(r.push(n.techProductivityMultiplier>1.5?"â†‘ GDP spike":"â†’ Moderate growth"),r.push(n.otherJobsAutomatedRate>.1?"â†“â†“ Jobs lost":"â†“ Some jobs lost")),n.foodSupplyMultiplier!==void 0&&r.push(n.foodPriceMultiplier>1.8?"â†‘â†‘ Food prices":"â†‘ Food prices"),e.govDebtPenalty&&r.push(`â†‘ Debt +${e.govDebtPenalty}`),o==="do_nothing"&&(r.push("â†’ Default market response"),r.push("? Outcome uncertain")),r}function At({choice:e,selected:o,onSelect:n}){const r=Mt(e),s=e.id==="do_nothing";return t.jsx("button",{onClick:()=>n(e.id),className:`w-full text-left p-4 rounded-xl border-2 transition-all ${o?"border-[#6366f1] bg-[#6366f111]":s?"border-[#334155] border-dashed bg-[#12121a] hover:border-[#475569]":"border-[#1e1e2e] bg-[#12121a] hover:border-[#334155] hover:bg-[#1a1a28]"}`,children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("span",{className:"text-2xl flex-shrink-0 mt-0.5",children:e.emoji}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"font-bold text-white text-sm mb-1",children:e.label}),t.jsx("p",{className:"text-[#94a3b8] text-xs leading-relaxed mb-2",children:e.description}),t.jsxs("div",{className:"flex items-start gap-1.5 mb-2",children:[t.jsx("span",{className:"text-[#f59e0b] text-[10px] flex-shrink-0 mt-0.5",children:"âš "}),t.jsx("span",{className:"text-[#f59e0b] text-[10px] leading-relaxed",children:e.tradeoff})]}),r.length>0&&t.jsx("div",{className:"flex flex-wrap gap-1",children:r.map((i,a)=>t.jsx("span",{className:`text-[9px] font-mono px-1.5 py-0.5 rounded ${i.startsWith("â†‘")||i.startsWith("â†—")?"bg-[#22c55e22] text-[#22c55e]":i.startsWith("â†“")||i.startsWith("â†˜")?"bg-[#ef444422] text-[#ef4444]":"bg-[#1e1e2e] text-[#64748b]"}`,children:i},a))})]})]})})}function Et({event:e,onChoose:o}){var u,d;const[n,r]=c.useState(null),[s,i]=c.useState(!1);if(!e)return null;const a=()=>{if(n){if(!s){i(!0);return}o(e.id,n)}},l=(u=e.choices)==null?void 0:u.find(h=>h.id===n);return t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:t.jsxs("div",{className:"bg-[#0d0d14] border border-[#334155] rounded-2xl p-6 max-w-xl w-full mx-4 max-h-[90vh] overflow-y-auto shadow-2xl",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("span",{className:"text-4xl",children:e.icon}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-white font-bold text-lg",children:e.name}),t.jsx("p",{className:"text-[#94a3b8] text-sm",children:e.description})]})]}),t.jsxs("div",{className:"border-t border-[#1e1e2e] pt-4 mb-4",children:[t.jsx("p",{className:"text-[#64748b] text-xs font-mono uppercase tracking-wider mb-3",children:"âš¡ Simulation paused â€” your decision required"}),t.jsx("div",{className:"flex flex-col gap-2",children:(d=e.choices)==null?void 0:d.map(h=>t.jsx(At,{choice:h,selected:n===h.id,onSelect:r},h.id))})]}),s&&l&&t.jsxs("div",{className:"mb-4 p-3 bg-[#1e1e2e] rounded-lg border border-[#334155]",children:[t.jsx("div",{className:"text-[#64748b] text-[10px] uppercase tracking-wider font-mono mb-1",children:"ðŸ“š What history did"}),t.jsx("p",{className:"text-[#94a3b8] text-xs leading-relaxed italic",children:l.historicalNote})]}),t.jsx("button",{onClick:a,disabled:!n,className:`w-full py-3 rounded-xl font-mono font-bold text-sm transition-colors ${n?"bg-[#6366f1] hover:bg-[#818cf8] text-white":"bg-[#1e1e2e] text-[#475569] cursor-not-allowed"}`,children:n?s?"â–¶ Apply and continue":"Confirm â€” see what history did â†’":"Select a response"})]})})}const It={greatDepression:{summary:"The US experienced 10 years of contraction. GDP fell 46% peak-to-trough. Unemployment peaked at 25% in 1933. Deflation wiped out savings.",turningPoint:"FDR's New Deal (1933): bank reform, work programs (CCC, WPA), agricultural relief, and abandoning the gold standard.",whatWorked:"Government spending restarted demand. Banking reform restored confidence. Devaluing the dollar stopped deflation.",whatFailed:"Initial Hoover austerity and Smoot-Hawley tariffs deepened the slump. Balanced-budget orthodoxy was catastrophically wrong.",historicalGrade:"D+",metrics:{gdpChangePercent:-46,peakUnemployment:25,inflationAvg:-6,gini:.63,povertyRate:35,recoveryYears:10},quote:'"The only thing we have to fear is fear itself." â€” FDR, 1933'},weimarHyperinflation:{summary:"Germany printed money to pay WWI reparations. By Nov 1923 a loaf of bread cost 200 billion marks. The middle class was wiped out.",turningPoint:"The Rentenmark (Nov 1923): a new currency backed by land assets, issued by an independent body. Printing stopped cold.",whatWorked:"Completely stopping money creation. Issuing a credible new currency. International loans (Dawes Plan) stabilized reparations.",whatFailed:"There was no painless exit. Savings were permanently destroyed. The political fallout helped fuel the rise of extremism.",historicalGrade:"C",metrics:{gdpChangePercent:-25,peakUnemployment:30,inflationAvg:29500,gini:.7,povertyRate:45,recoveryYears:6},quote:'"Inflation is the most important single factor in the politico-economic history of the Weimar Republic." â€” Adam Fergusson'},stagflation1970s:{summary:"OPEC oil embargo (1973) triggered both high inflation AND high unemployment simultaneously â€” violating Keynesian assumptions.",turningPoint:"Volcker Shock (1979â€“82): Federal Reserve raised rates to 20%, deliberately causing a recession to break inflationary expectations.",whatWorked:"Aggressive interest rate hikes eventually tamed inflation. Supply-side reforms improved productivity.",whatFailed:"Wage-price controls (Nixon 1971) temporarily masked inflation then made it worse. Easy money in the early 70s was a mistake.",historicalGrade:"C+",metrics:{gdpChangePercent:-3,peakUnemployment:13,inflationAvg:11,gini:.4,povertyRate:15,recoveryYears:8},quote:'"Inflation is always and everywhere a monetary phenomenon." â€” Milton Friedman'},crisisOf2008:{summary:"US housing bubble collapsed. Lehman Brothers failed Sep 2008. Global credit froze. Worst recession since the Great Depression.",turningPoint:"TARP bank bailouts ($700B), Fed QE programs ($4T), Obama stimulus ($787B). Slow but sustained recovery 2009â€“2019.",whatWorked:"Massive fiscal stimulus, quantitative easing, and bank recapitalization prevented a second Great Depression.",whatFailed:"Austerity in Europe caused a double-dip recession. Too little debt relief for homeowners prolonged household balance sheet repair.",historicalGrade:"B-",metrics:{gdpChangePercent:-4.3,peakUnemployment:10,inflationAvg:1.5,gini:.47,povertyRate:15,recoveryYears:6},quote:'"We came very close to a complete collapse of the financial system." â€” Ben Bernanke'},japanLostDecade:{summary:"Japan's asset bubble burst in 1991. Despite near-zero rates and stimulus, GDP stagnated for 20+ years. Deflation became entrenched.",turningPoint:"Abenomics (2012): aggressive QE, fiscal stimulus, structural reforms. Partially effective â€” ended deflation but growth remained weak.",whatWorked:"Eventually: currency devaluation, quantitative easing at scale, negative interest rates.",whatFailed:"Years of half-measures and zombie bank forbearance. Failure to force bad debt write-offs kept the economy in stasis.",historicalGrade:"D",metrics:{gdpChangePercent:10,peakUnemployment:5.5,inflationAvg:-.2,gini:.34,povertyRate:16,recoveryYears:20},quote:`"Japan's experience suggests that it's very hard to escape deflation once it becomes entrenched." â€” Ben Bernanke`},nordicMiracle:{summary:"Nordic countries (esp. Sweden 1990s) combined high taxes, strong unions, universal welfare, and open markets into sustained prosperity.",turningPoint:"Sweden's 1990s bank crisis resolution: swift bank nationalization, transparent debt writedowns, then re-privatization. Full recovery in 3 years.",whatWorked:"Universal education and healthcare create a productive workforce. Strong safety nets allow risk-taking. Transparent institutions reduce corruption.",whatFailed:"Model requires high trust, homogeneity, and strong institutions to function. Difficult to replicate in larger, more diverse economies.",historicalGrade:"A",metrics:{gdpChangePercent:35,peakUnemployment:8,inflationAvg:2.1,gini:.27,povertyRate:8,recoveryYears:3},quote:`"The Nordic model is not socialism. It's a highly competitive market economy with strong social insurance." â€” Daron Acemoglu`}};function Rt(e){return It[e]||null}const me={"A+":"#22c55e",A:"#22c55e",B:"#84cc16",C:"#eab308",D:"#f97316",F:"#ef4444"};function L({label:e,score:o}){const n=o>=70?"#22c55e":o>=45?"#eab308":"#ef4444";return t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-1 text-xs font-mono",children:[t.jsx("span",{className:"text-[#94a3b8]",children:e}),t.jsxs("span",{style:{color:n},children:[o,"/100"]})]}),t.jsx("div",{className:"w-full bg-[#1e1e2e] rounded-full h-1.5",children:t.jsx("div",{className:"h-1.5 rounded-full transition-all duration-700",style:{width:`${o}%`,backgroundColor:n}})})]})}function _t({obj:e}){const o=e.completed?"âœ…":e.met?"ðŸ”„":"âŒ",n=e.completed?"#22c55e":e.met?"#f59e0b":"#ef4444";return t.jsxs("div",{className:"flex items-start gap-2 py-1.5 border-b border-[#1e1e2e] last:border-0",children:[t.jsx("span",{className:"text-sm flex-shrink-0 mt-0.5",children:o}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("span",{className:"text-xs font-mono text-[#e2e8f0]",children:[e.icon," ",e.label]}),t.jsx("span",{className:"text-xs font-mono",style:{color:n},children:e.completed?"Done":e.met?"In progress":`${Math.round(e.progress*100)}%`})]}),t.jsx("div",{className:"text-[10px] text-[#475569] mt-0.5",children:e.description})]})]})}function Bt({playerOutcome:e,historicalOutcome:o}){var r;if(!o)return null;const n=[{label:"GDP Change",player:`${e.gdpChangePercent>0?"+":""}${e.gdpChangePercent}%`,history:`${o.metrics.gdpChangePercent}%`,betterIfHigher:!0,playerVal:e.gdpChangePercent,histVal:o.metrics.gdpChangePercent},{label:"Peak Unemployment",player:`${e.peakUnemployment}%`,history:`${o.metrics.peakUnemployment}%`,betterIfHigher:!1,playerVal:e.peakUnemployment,histVal:o.metrics.peakUnemployment},{label:"Avg Inflation",player:`${e.inflationAvg}%`,history:`${o.metrics.inflationAvg}%`,betterIfHigher:null,playerVal:Math.abs(e.inflationAvg),histVal:Math.abs(o.metrics.inflationAvg)},{label:"Gini Coefficient",player:e.gini.toFixed(2),history:o.metrics.gini.toFixed(2),betterIfHigher:!1,playerVal:e.gini,histVal:o.metrics.gini},{label:"Poverty Rate",player:`${e.povertyRate}%`,history:`${o.metrics.povertyRate}%`,betterIfHigher:!1,playerVal:e.povertyRate,histVal:o.metrics.povertyRate}];return t.jsxs("div",{children:[t.jsx("div",{className:"text-[#64748b] text-xs uppercase tracking-wider font-mono mb-3",children:"You vs History"}),t.jsxs("div",{className:"bg-[#0d0d14] rounded-xl overflow-hidden border border-[#1e1e2e]",children:[t.jsxs("div",{className:"grid grid-cols-3 text-[10px] font-mono text-[#475569] px-3 py-1.5 border-b border-[#1e1e2e]",children:[t.jsx("span",{children:"Metric"}),t.jsx("span",{className:"text-center text-[#6366f1]",children:"You"}),t.jsx("span",{className:"text-center",children:"History"})]}),n.map(s=>{let i="#e2e8f0";return s.betterIfHigher===!0?i=s.playerVal>=s.histVal?"#22c55e":"#ef4444":s.betterIfHigher===!1&&(i=s.playerVal<=s.histVal?"#22c55e":"#ef4444"),t.jsxs("div",{className:"grid grid-cols-3 px-3 py-1.5 text-xs font-mono border-b border-[#0a0a0f] last:border-0",children:[t.jsx("span",{className:"text-[#64748b]",children:s.label}),t.jsx("span",{className:"text-center font-bold",style:{color:i},children:s.player}),t.jsx("span",{className:"text-center text-[#475569]",children:s.history})]},s.label)})]}),t.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs font-mono text-[#475569] px-1",children:[t.jsxs("span",{children:["History's grade: ",t.jsx("span",{style:{color:me[o.historicalGrade]||"#94a3b8"},className:"font-bold",children:o.historicalGrade})]}),t.jsxs("span",{className:"text-[10px] italic",children:['"',(r=o.quote)==null?void 0:r.slice(0,50),'â€¦"']})]})]})}function Ft({report:e,onRetry:o,onNextScenario:n}){var a;if(!e)return null;const r=Rt(e.scenarioId),s=me[e.grade]||"#94a3b8",i=r&&e.finalScore>({"A+":95,A:85,B:70,C:55,D:40,F:20}[r.historicalGrade]||50);return t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/85 backdrop-blur-sm",children:t.jsxs("div",{className:"bg-[#0d0d14] border border-[#1e1e2e] rounded-2xl p-6 max-w-lg w-full mx-4 max-h-[92vh] overflow-y-auto shadow-2xl",children:[t.jsxs("div",{className:"text-center mb-5",children:[t.jsx("div",{className:"text-6xl font-bold font-mono mb-1",style:{color:s},children:e.grade}),t.jsx("div",{className:"text-white font-bold text-lg",children:e.scenarioName}),t.jsxs("div",{className:"text-[#64748b] text-sm",children:["Year ",e.year," Â· Score ",e.finalScore,"/100"]}),i&&t.jsx("div",{className:"mt-2 text-[#22c55e] text-sm font-mono",children:"ðŸ† You did better than history!"})]}),t.jsxs("div",{className:"bg-[#12121a] rounded-xl p-4 mb-4 flex flex-col gap-2.5",children:[t.jsx(L,{label:"Equality",score:e.domains.equality.score}),t.jsx(L,{label:"Growth",score:e.domains.growth.score}),t.jsx(L,{label:"Stability",score:e.domains.stability.score})]}),((a=e.objectives)==null?void 0:a.length)>0&&t.jsxs("div",{className:"bg-[#12121a] rounded-xl p-4 mb-4",children:[t.jsx("div",{className:"text-[#64748b] text-xs uppercase tracking-wider font-mono mb-2",children:"Objectives"}),e.objectives.map(l=>t.jsx(_t,{obj:l},l.id))]}),r&&t.jsxs("div",{className:"bg-[#12121a] rounded-xl p-4 mb-4",children:[t.jsx(Bt,{playerOutcome:e.playerOutcome,historicalOutcome:r}),t.jsxs("div",{className:"mt-3 border-t border-[#1e1e2e] pt-3",children:[t.jsx("div",{className:"text-[10px] text-[#475569] font-mono uppercase tracking-wider mb-1",children:"What worked in history"}),t.jsx("p",{className:"text-[#64748b] text-xs leading-relaxed",children:r.whatWorked})]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:o,className:"flex-1 py-3 rounded-xl border border-[#1e1e2e] text-[#94a3b8] hover:border-[#6366f1] hover:text-[#6366f1] font-mono text-sm transition-colors",children:"â†º Try Again"}),t.jsx("button",{onClick:n,className:"flex-1 py-3 rounded-xl bg-[#6366f1] hover:bg-[#818cf8] text-white font-mono font-bold text-sm transition-colors",children:"Next Challenge â†’"})]})]})})}function Dt(e,o){const n={incomeTax:[0,.6],corporateTax:[0,.5],minWage:[0,50],ubi:[0,1e3],interestRate:[0,.2],educationFunding:[0,1],unemploymentBenefit:[0,500],printMoney:[0,100],wealthTax:[0,.05],robotTax:[0,.5],mandatoryProfitShare:[0,.3],landValueTax:[0,.05]};if(e in n){const[r,s]=n[e];return Oe(Number(o),r,s)}return o}const pe="ecomsim_save";function Wt(e){try{localStorage.setItem(pe+"_scenario",e)}catch{}}function Ht(){try{return localStorage.getItem(pe+"_scenario")||"freeMarket"}catch{return"freeMarket"}}const Lt="modulepreload",$t=function(e){return"/ecomsim/"+e},le={},Gt=function(o,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(u=>{if(u=$t(u),u in le)return;le[u]=!0;const d=u.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":Lt,d||(m.as="script"),m.crossOrigin="",m.href=u,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((x,f)=>{m.addEventListener("load",x),m.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return o().catch(i)})};let M=null,D=!1,$=[],G=null;const Ot="af_sky",Ut="onnx-community/Kokoro-82M-v1.0-ONNX",A={monopoly_forming:"Warning. One company now dominates the market. Without competition, prices are rising and innovation is slowing.",high_inequality:"Inequality has reached extreme levels. The Gini coefficient indicates the top few now own most of the wealth.",high_unemployment:"Mass unemployment is spreading. A vicious cycle: fewer workers means less spending, which means even more layoffs.",inflation_spiral:"Inflation warning. Prices are rising faster than wages. Your population's purchasing power is eroding.",min_wage_tradeoff:"Minimum wage tradeoff observed. Living standards improved, but some small businesses can no longer afford to hire.",budget_surplus:"Fiscal surplus achieved. Tax revenue now exceeds government spending.",stagnation:"Stagflation risk. The economy is shrinking while unemployment rises â€” the classic policy dilemma.",poverty_trap:"Poverty trap forming. Workers in poverty cannot afford education or healthcare, keeping them trapped.",ubi_effect:"Universal Basic Income is reducing poverty. Some residents are using the security to start new businesses.",policy_fourDayWeek_on:"The four-day work week is now law. Workers rejoice. Friday afternoons are sacred. Economists nervously check productivity spreadsheets.",policy_fourDayWeek_off:"The four-day work week has been repealed. Monday through Friday, back to the grind.",policy_robotTax_on:"A robot tax has been introduced. For every job automated away, the tech sector must pay. Silicon Valley is not pleased.",policy_breadAndCircuses_on:"Bread and circuses for all! The government is handing out free food and entertainment. Unrest is falling. Economists are horrified.",policy_breadAndCircuses_off:"The bread and circuses program has ended. Let's see how long the calm lasts.",policy_mandatoryProfitShare_on:"Mandatory profit sharing is now law. Businesses must distribute a cut of profits to every worker. Workers approve. Shareholders do not.",policy_mandatoryProfitShare_off:"Mandatory profit sharing repealed. The windfall stays with the owners again.",policy_landValueTax_on:"A land value tax has been enacted. Henry George would be proud. Landowners are furious. Economists say this is actually the most efficient tax possible.",policy_banAdvertising_on:"Advertising is banned. No more billboards, no more commercials, no more targeted manipulation. The luxury sector is experiencing an identity crisis.",policy_banAdvertising_off:"The advertising ban is lifted. The bombardment of commercial messages resumes immediately.",policy_debtJubilee_on:"DEBT JUBILEE! All debts are cancelled â€” right now, this instant. It is a Biblical reset. The slate is wiped clean. This happens only once.",policy_lotteryRedistribution_on:"The wealth lottery is running. Random rich citizens are paying a luck tax directly to random poor ones. It's chaotic. It's arbitrary. It's weirdly effective.",policy_lotteryRedistribution_off:"The wealth lottery has ended. The rich breathe a sigh of relief.",policy_sumptuary_on:"Sumptuary laws are in effect. The wealthy may no longer spend freely on luxury goods. Medieval rulers used this to maintain social order. It also destroyed the luxury economy.",policy_sumptuary_off:"Sumptuary laws repealed. The luxury market roars back to life.",policy_degrowth_on:"Degrowth policy enacted. The government has officially stopped chasing GDP growth. Economists are having a meltdown. Everyone else is working less and feeling healthier.",policy_degrowth_off:"Degrowth policy abandoned. Back to the infinite growth imperative.",policy_algoCentralPlanning_on:"Algorithmic central planning is online. An AI now sets all prices. The market volatility disappears. So does the spontaneous order. It is efficient. It is cold. It is watching.",policy_algoCentralPlanning_off:"The algorithm has been shut down. Prices will now rediscover chaos on their own.",policy_universalBankAccount_on:"Universal bank accounts issued to every citizen. No one is unbanked. The poorest residents finally have somewhere safe to store their savings.",policy_universalBankAccount_off:"Universal bank accounts discontinued. Financial exclusion returns for the poorest citizens.",pandemic:"A pandemic has struck. Health is dropping, businesses are closing, and workers are staying home.",cropFailure:"Crop failure. Poor harvests are causing food prices to spike. The poorest citizens are suffering most.",techBreakthrough:"Technology breakthrough! Productivity in the tech sector has doubled â€” but automation is threatening other jobs.",financialBubble:"A financial bubble is growing. Asset prices are inflating rapidly â€” and history suggests what comes next.",corruption:"Corruption scandal. Government tax revenue is being diverted. Public services are beginning to collapse.",immigrationWave:"An immigration wave has arrived. Skilled workers are boosting productivity, but job competition is increasing.",recession:"Recession begins. Consumer demand is falling, businesses are struggling, and unemployment is rising.",boom:"Economic boom! Consumer confidence has surged. Businesses are hiring and wages are growing."};async function xe(){if(M)return M;if(D)return new Promise(e=>$.push(e));D=!0;try{const{KokoroTTS:e}=await Gt(async()=>{const{KokoroTTS:o}=await import("./kokoro-CqRZUw5m.js");return{KokoroTTS:o}},[]);return M=await e.from_pretrained(Ut,{dtype:"q4",device:"wasm"}),$.forEach(o=>o(M)),$=[],D=!1,M}catch(e){return console.warn("[Narrator] Failed to load Kokoro TTS:",e),D=!1,null}}function qt(){return G||(G=new(window.AudioContext||window.webkitAudioContext)),G}let B=null;async function E(e,o={}){if(e){be();try{const n=await xe();if(!n)return;const r=await n.generate(e,{voice:o.voice||Ot}),s=qt(),i=s.createBuffer(1,r.audio.length,r.sampling_rate);i.copyToChannel(r.audio,0);const a=s.createBufferSource();return a.buffer=i,o.rate&&(a.playbackRate.value=o.rate),a.connect(s.destination),a.start(),B=a,new Promise(l=>{a.onended=()=>{B=null,l()}})}catch(n){console.warn("[Narrator] Narration error:",n)}}}function be(){if(B){try{B.stop()}catch{}B=null}}function zt(e){const o=A[e];o&&E(o)}function Yt(e){const o=A[e];o&&E(o)}function Vt(e,o){const n=`policy_${e}_on`,r=`policy_${e}_off`;if(o===!0||o===!1){const s=o?A[n]:A[r];s&&E(s);return}o>0&&A[n]&&E(A[n])}function Kt(){xe()}function Jt(){return M!==null}function Xt(){const[e,o]=c.useState(!1),[n,r]=c.useState(!1),[s,i]=c.useState(!1),a=c.useRef(!1),l=c.useCallback(async()=>{o(!0),a.current=!0,r(!0),Kt();const f=setInterval(()=>{Jt()&&(i(!0),r(!1),clearInterval(f),E("Economy simulator narrator ready."))},500);setTimeout(()=>clearInterval(f),3e4)},[]),u=c.useCallback(()=>{o(!1),a.current=!1,be()},[]),d=c.useCallback(f=>{a.current&&zt(f)},[]),h=c.useCallback(f=>{a.current&&Yt(f)},[]),m=c.useCallback(f=>{a.current&&E(f)},[]),x=c.useCallback((f,g)=>{a.current&&Vt(f,g)},[]);return{enabled:e,loading:n,ready:s,enable:l,disable:u,onInsight:d,onEvent:h,speak:m,onPolicy:x}}const ce=["dashboard","objectives","policies","histogram"];function Zt(){var J,X;const e=Xt(),o=c.useRef(null),[n,r]=c.useState(null),[s,i]=c.useState(!1),[a,l]=c.useState(5),[u,d]=c.useState(Ht()),[h,m]=c.useState(!1),[x,f]=c.useState(null),[g,v]=c.useState(null),[b,w]=c.useState("dashboard"),[k,T]=c.useState(null),[Y,I]=c.useState(null);c.useEffect(()=>{const p=new Worker(new URL("/ecomsim/assets/simWorker-hi0oD3Rw.js",import.meta.url),{type:"module"});return p.addEventListener("message",j=>{const{type:R,state:P,event:F,insight:Z,report:Pe}=j.data;switch(R){case"STATE_UPDATE":r(P);break;case"EVENT":e.onEvent(F==null?void 0:F.type);break;case"CHOICE_REQUIRED":T(F),i(!0);break;case"INSIGHT":f(Z),e.onInsight(Z.id);break;case"SCENARIO_COMPLETE":I(Pe),i(!0);break}}),p.postMessage({type:"INIT",scenarioId:u}),o.current=p,()=>p.terminate()},[]);const y=c.useCallback(p=>{var j;(j=o.current)==null||j.postMessage(p)},[]),ge=c.useCallback(()=>{i(!0),y({type:"PAUSE"})},[y]),ye=c.useCallback(()=>{i(!1),y({type:"RESUME"})},[y]),H=c.useCallback(()=>{r(null),f(null),v(null),T(null),I(null),y({type:"RESET",scenarioId:u}),i(!1)},[y,u]),ve=c.useCallback(p=>{l(p),y({type:"SET_SPEED",speed:p})},[y]),we=c.useCallback((p,j)=>{const R=Dt(p,j);y({type:"SET_POLICY",policy:p,value:R}),r(P=>P&&{...P,policies:{...P.policies,[p]:R}}),e.onPolicy(p,R)},[y,e]),je=c.useCallback(p=>{var j;d(p),Wt(p),r(null),f(null),v(null),T(null),I(null),y({type:"RESET",scenarioId:p}),i(!1),(j=q[p])!=null&&j.isHistorical&&w("objectives")},[y]),ke=c.useCallback(()=>{y({type:"SET_POLICY",policy:"_forceShock",value:!0})},[y]),Ne=c.useCallback((p,j)=>{T(null),y({type:"RESOLVE_CHOICE",eventId:p,choiceId:j}),i(!1)},[y]),Ce=c.useCallback(()=>{I(null),H()},[H]),Se=c.useCallback(()=>{I(null),m(!0)},[]),V=((J=q[u])==null?void 0:J.name)||"Free Market",K=((X=n==null?void 0:n.objectives)==null?void 0:X.length)>0,Te=K?ce:ce.filter(p=>p!=="objectives");return t.jsxs("div",{className:"h-screen flex flex-col bg-[#0a0a0f] text-[#e2e8f0] overflow-hidden font-mono",children:[t.jsx(pt,{paused:s,speed:a,onPause:ge,onResume:ye,onReset:H,onSpeedChange:ve,onScenarioOpen:()=>m(!0),onShockMe:ke,scenarioName:V,year:n==null?void 0:n.year,narratorEnabled:e.enabled,narratorLoading:e.loading,onNarratorToggle:e.enabled?e.disable:e.enable}),t.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[t.jsxs("div",{className:"flex-1 relative bg-[#0a0a0f]",children:[t.jsx(st,{simState:n,onAgentClick:v,selectedAgentId:g==null?void 0:g.id}),g&&t.jsx(Nt,{agent:g,onClose:()=>v(null)})]}),t.jsxs("div",{className:"w-72 flex flex-col border-l border-[#1e1e2e] bg-[#0a0a0f]",children:[t.jsx("div",{className:"flex border-b border-[#1e1e2e]",children:Te.map(p=>t.jsx("button",{onClick:()=>w(p),className:`flex-1 py-2 text-xs font-mono capitalize transition-colors ${b===p?"text-[#6366f1] border-b border-[#6366f1]":"text-[#475569] hover:text-[#94a3b8]"}`,children:p==="objectives"&&K?`ðŸŽ¯ ${n.objectives.filter(j=>j.completed).length}/${n.objectives.length}`:p},p))}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-3",children:[b==="dashboard"&&t.jsx(lt,{metrics:n==null?void 0:n.metrics,market:n==null?void 0:n.market,activeEvents:n==null?void 0:n.activeEvents}),b==="objectives"&&t.jsx(Pt,{objectives:n==null?void 0:n.objectives,scenarioDurationYears:n==null?void 0:n.scenarioDurationYears,year:n==null?void 0:n.year,scenarioName:V}),b==="policies"&&t.jsx(ht,{policies:n==null?void 0:n.policies,onPolicyChange:we}),b==="histogram"&&t.jsx(Tt,{agents:n==null?void 0:n.agents})]})]})]}),x&&t.jsx(wt,{insight:x,onDismiss:()=>f(null)}),k&&t.jsx(Et,{event:k,onChoose:Ne}),Y&&t.jsx(Ft,{report:Y,onRetry:Ce,onNextScenario:Se}),h&&t.jsx(yt,{current:u,onSelect:je,onClose:()=>m(!1)})]})}U.createRoot(document.getElementById("root")).render(t.jsx(Fe.StrictMode,{children:t.jsx(Zt,{})}));

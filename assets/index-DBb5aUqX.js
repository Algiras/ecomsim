import{r as c,a as Ie,R as z,A as Me,b as _e,B as Ee,X as Q,Y as ee,T as te,c as Ae,C as Re,L as Be,d as ne,e as We}from"./charts-CSEo9cJk.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var de={exports:{}},D={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fe=c,De=Symbol.for("react.element"),He=Symbol.for("react.fragment"),Le=Object.prototype.hasOwnProperty,$e=Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ge={key:!0,ref:!0,__self:!0,__source:!0};function ue(e,o,n){var a,i={},s=null,r=null;n!==void 0&&(s=""+n),o.key!==void 0&&(s=""+o.key),o.ref!==void 0&&(r=o.ref);for(a in o)Le.call(o,a)&&!Ge.hasOwnProperty(a)&&(i[a]=o[a]);if(e&&e.defaultProps)for(a in o=e.defaultProps,o)i[a]===void 0&&(i[a]=o[a]);return{$$typeof:De,type:e,key:s,ref:r,props:i,_owner:$e.current}}D.Fragment=He;D.jsx=ue;D.jsxs=ue;de.exports=D;var t=de.exports,O={},oe=Ie;O.createRoot=oe.createRoot,O.hydrateRoot=oe.hydrateRoot;function ze(e,o,n){return Math.max(o,Math.min(n,e))}function Oe(e,o=20){if(!e||e.length===0)return[];const n=[...e].sort((s,r)=>s-r),a=n.reduce((s,r)=>s+r,0);if(a===0)return[];const i=[{population:0,wealth:0}];for(let s=1;s<=o;s++){const r=Math.floor(s/o*n.length),l=n.slice(0,r).reduce((u,d)=>u+d,0);i.push({population:s/o*100,wealth:l/a*100})}return i}const C=[{threshold:0,color:[220,38,38]},{threshold:100,color:[234,88,12]},{threshold:300,color:[100,116,139]},{threshold:800,color:[59,130,246]},{threshold:2e3,color:[6,182,212]},{threshold:5e3,color:[234,179,8]},{threshold:1e4,color:[251,191,36]}];function fe(e){const o=Math.max(0,e);let n=C[0],a=C[C.length-1];for(let d=0;d<C.length-1;d++)if(o>=C[d].threshold&&o<C[d+1].threshold){n=C[d],a=C[d+1];break}const i=a.threshold-n.threshold,s=i>0?(o-n.threshold)/i:1,r=Math.round(n.color[0]+(a.color[0]-n.color[0])*s),l=Math.round(n.color[1]+(a.color[1]-n.color[1])*s),u=Math.round(n.color[2]+(a.color[2]-n.color[2])*s);return`rgb(${r},${l},${u})`}const q={food:"#22c55e",housing:"#f59e0b",tech:"#6366f1",luxury:"#ec4899"},Ue=800,qe=600,Ye=4;function Ve(e,o,n,a){for(const i of o)i.alive&&Ke(e,i,i.id===n,a)}function Ke(e,o,n,a){const{x:i,y:s,state:r,wealth:l,happiness:u,unrest:d,employed:h,isOwner:m,age:g}=o,f=Ye;e.save(),d>.5?(e.shadowColor="rgba(239,68,68,0.7)",e.shadowBlur=8):l>5e3&&(e.shadowColor="rgba(251,191,36,0.5)",e.shadowBlur=6);const x=fe(l);if(e.beginPath(),m||r==="owner"?(e.moveTo(i,s-f*1.4),e.lineTo(i+f*1,s),e.lineTo(i,s+f*1.4),e.lineTo(i-f*1,s),e.closePath()):r==="child"||g<18*52?e.arc(i,s,f*.65,0,Math.PI*2):r==="retired"?e.rect(i-f*.9,s-f*.9,f*1.8,f*1.8):e.arc(i,s,f,0,Math.PI*2),e.fillStyle=x,e.fill(),r==="unemployed"?(e.strokeStyle="#ef4444",e.lineWidth=1.5,e.setLineDash([2,2]),e.stroke(),e.setLineDash([])):(h||m)&&(e.strokeStyle="rgba(255,255,255,0.6)",e.lineWidth=1,e.stroke()),l<100&&r!=="child"){const v=.3+.3*Math.sin(a*.1);e.strokeStyle=`rgba(239,68,68,${v})`,e.lineWidth=2,e.setLineDash([]),e.beginPath(),e.arc(i,s,f+3,0,Math.PI*2),e.stroke()}n&&(e.strokeStyle="#ffffff",e.lineWidth=2,e.setLineDash([]),e.beginPath(),e.arc(i,s,f+4,0,Math.PI*2),e.stroke()),e.restore()}function Je(e,o,n,a=.12){e.save(),e.lineWidth=.5;for(const i of o){if(!i.alive||!i.employed||!i.employerId)continue;const s=n.find(r=>r.id===i.employerId);s&&(e.beginPath(),e.strokeStyle=`rgba(99,102,241,${a})`,e.moveTo(i.x,i.y),e.lineTo(s.x,s.y),e.stroke())}e.restore()}function Xe(e,o,n){for(const a of o)a.alive&&Ze(e,a,n)}function Ze(e,o,n){const{x:a,y:i,sector:s,employeeCount:r,radius:l,pulse:u,dominance:d,capital:h}=o,m=q[s]||"#94a3b8";e.save(),d>.4?(e.shadowColor=m,e.shadowBlur=15+d*20):h>2e3&&(e.shadowColor=m,e.shadowBlur=8);const g=l||10;if(e.beginPath(),ie(e,a,i,g),e.fillStyle=m+"33",e.fill(),e.strokeStyle=m,e.lineWidth=2,e.stroke(),e.fillStyle=m,e.font=`${Math.max(8,g*.8)}px sans-serif`,e.textAlign="center",e.textBaseline="middle",e.fillText(Qe[s]||"?",a,i),r>0&&(e.fillStyle="rgba(0,0,0,0.7)",e.beginPath(),e.arc(a+g*.8,i-g*.8,6,0,Math.PI*2),e.fill(),e.fillStyle="#ffffff",e.font="7px sans-serif",e.fillText(r,a+g*.8,i-g*.8)),h<100){const f=.4+.4*Math.sin(n*.15);e.strokeStyle=`rgba(239,68,68,${f})`,e.lineWidth=2,e.beginPath(),ie(e,a,i,g+4),e.stroke()}e.restore()}function ie(e,o,n,a){e.beginPath();for(let i=0;i<6;i++){const s=Math.PI/3*i-Math.PI/6,r=o+a*Math.cos(s),l=n+a*Math.sin(s);i===0?e.moveTo(r,l):e.lineTo(r,l)}e.closePath()}const Qe={food:"ðŸŒ¾",housing:"ðŸ ",tech:"ðŸ’»",luxury:"ðŸ’Ž"};function et(e,o,n,a){e.save();for(const i of o){if(!i.alive)continue;const s=q[i.sector]||"#94a3b8",r=30+i.employeeCount*5,l=e.createRadialGradient(i.x,i.y,0,i.x,i.y,r);l.addColorStop(0,s+"15"),l.addColorStop(1,"transparent"),e.fillStyle=l,e.beginPath(),e.arc(i.x,i.y,r,0,Math.PI*2),e.fill()}e.restore()}const R=[];function tt(e,o){for(let n=0;n<6;n++){const a=Math.PI*2/6*n;R.push({type:"sparkle",x:e,y:o,vx:Math.cos(a)*2,vy:Math.sin(a)*2,life:1,color:"#22c55e",size:3})}}function nt(e,o){for(let n=0;n<8;n++){const a=Math.random()*Math.PI*2;R.push({type:"fade",x:e+(Math.random()-.5)*10,y:o+(Math.random()-.5)*10,vx:Math.cos(a)*1.5,vy:Math.sin(a)*1.5,life:1,color:"#ef4444",size:2})}}function ot(e){for(let o=R.length-1;o>=0;o--){const n=R[o];switch(e.save(),e.globalAlpha=n.life,n.type){case"sparkle":e.fillStyle=n.color,e.beginPath(),e.arc(n.x,n.y,n.size*n.life,0,Math.PI*2),e.fill(),n.x+=n.vx,n.y+=n.vy,n.vx*=.95,n.vy*=.95,n.life-=.04;break;case"fade":e.fillStyle=n.color,e.beginPath(),e.arc(n.x,n.y,n.size,0,Math.PI*2),e.fill(),n.x+=n.vx,n.y+=n.vy,n.life-=.06;break;case"wave":e.strokeStyle=n.color,e.lineWidth=1.5,e.beginPath(),e.arc(n.x,n.y,n.radius,0,Math.PI*2),e.stroke(),n.radius=n.radius+(n.maxRadius-n.radius)*.08,n.life-=.03;break}e.restore(),n.life<=0&&R.splice(o,1)}}function it({simState:e,onAgentClick:o,selectedAgentId:n}){const a=c.useRef(null),i=c.useRef(null),s=c.useRef(0),r=c.useRef(new Set),l=c.useCallback(()=>{const d=a.current;if(!d)return;const h=d.getContext("2d");s.current++;const m=s.current;if(h.fillStyle="#0a0a0f",h.fillRect(0,0,d.width,d.height),!e){h.fillStyle="#334155",h.font="14px monospace",h.textAlign="center",h.fillText("Initializing simulation...",d.width/2,d.height/2);return}const{agents:g=[],businesses:f=[]}=e,x=new Set(g.filter(b=>b.alive).map(b=>b.id)),v=r.current;for(const b of v)if(!x.has(b)){const w=g.find(j=>j.id===b);w&&nt(w.x,w.y)}for(const b of x)if(!v.has(b)){const w=g.find(j=>j.id===b);w&&tt(w.x,w.y)}r.current=x,et(h,f,d.width,d.height),Je(h,g,f),Xe(h,f,m),Ve(h,g,n,m),ot(h),i.current=requestAnimationFrame(l)},[e,n]);c.useEffect(()=>(i.current=requestAnimationFrame(l),()=>{i.current&&cancelAnimationFrame(i.current)}),[l]);const u=c.useCallback(d=>{if(!(e!=null&&e.agents)||!o)return;const h=a.current,m=h.getBoundingClientRect(),g=h.width/m.width,f=h.height/m.height,x=(d.clientX-m.left)*g,v=(d.clientY-m.top)*f;let b=null,w=12;for(const j of e.agents){if(!j.alive)continue;const S=Math.sqrt((j.x-x)**2+(j.y-v)**2);S<w&&(w=S,b=j)}o(b)},[e,o]);return t.jsx("canvas",{ref:a,width:Ue,height:qe,className:"w-full h-full cursor-crosshair",style:{imageRendering:"pixelated",display:"block"},onClick:u})}function T({label:e,value:o,unit:n="",trend:a,color:i="#6366f1",history:s=[],format:r="number"}){const l=c.useMemo(()=>r==="percent"?(o*100).toFixed(1)+"%":r==="currency"?"$"+ae(o):r==="index"?o.toFixed(1):ae(o),[o,r]),u=s.slice(-40).map((d,h)=>({i:h,v:d}));return t.jsxs("div",{className:"bg-[#12121a] border border-[#1e1e2e] rounded-lg p-3 flex flex-col gap-1",children:[t.jsx("div",{className:"text-[#64748b] text-xs uppercase tracking-wider font-mono",children:e}),t.jsxs("div",{className:"flex items-end gap-2",children:[t.jsx("span",{className:"text-white text-xl font-bold font-mono",style:{color:i},children:l}),n&&t.jsx("span",{className:"text-[#64748b] text-xs mb-1",children:n}),a!==void 0&&t.jsxs("span",{className:`text-xs mb-1 ${a>=0?"text-green-400":"text-red-400"}`,children:[a>=0?"â†‘":"â†“"," ",Math.abs(a*100).toFixed(1),"%"]})]}),u.length>5&&t.jsx("div",{className:"h-8 w-full",children:t.jsx(z,{width:"100%",height:"100%",children:t.jsx(Me,{data:u,margin:{top:0,right:0,bottom:0,left:0},children:t.jsx(_e,{type:"monotone",dataKey:"v",stroke:i,fill:i+"22",strokeWidth:1,dot:!1,isAnimationActive:!1})})})})]})}function at({prices:e,supply:o,demand:n}){return t.jsxs("div",{className:"bg-[#12121a] border border-[#1e1e2e] rounded-lg p-3",children:[t.jsx("div",{className:"text-[#64748b] text-xs uppercase tracking-wider font-mono mb-2",children:"Market Prices"}),t.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:Object.entries(e||{}).map(([a,i])=>{const s=(o==null?void 0:o[a])||0,r=(n==null?void 0:n[a])||0,l=r>s?"text-red-400":"text-green-400",u=r>s?"â†‘":"â†“";return t.jsxs("div",{className:"flex justify-between items-center text-xs",children:[t.jsx("span",{style:{color:q[a]},className:"font-mono capitalize",children:a}),t.jsxs("span",{className:`font-mono font-bold ${l}`,children:["$",i.toFixed(1)," ",u]})]},a)})})]})}function st({value:e}){const o=(e*100).toFixed(1),n=e>.5?"#ef4444":e>.35?"#f59e0b":"#22c55e";return t.jsxs("div",{className:"bg-[#12121a] border border-[#1e1e2e] rounded-lg p-3",children:[t.jsxs("div",{className:"text-[#64748b] text-xs uppercase tracking-wider font-mono mb-2",children:["Inequality (Gini) â€” ",o]}),t.jsx("div",{className:"w-full bg-[#1e1e2e] rounded-full h-2 mb-1",children:t.jsx("div",{className:"h-2 rounded-full transition-all duration-500",style:{width:`${Math.min(100,e*100)}%`,backgroundColor:n}})}),t.jsxs("div",{className:"flex justify-between text-[10px] text-[#475569]",children:[t.jsx("span",{children:"Perfect Equality (0)"}),t.jsx("span",{children:"Total Inequality (1)"})]})]})}function rt({event:e}){return t.jsxs("div",{className:"bg-[#1e1e2e] border border-[#334155] rounded px-2 py-1 text-xs flex items-center gap-1",children:[t.jsx("span",{children:e.icon}),t.jsx("span",{className:"text-[#e2e8f0] font-mono",children:e.name})]})}function lt({metrics:e,market:o,activeEvents:n=[]}){if(!e)return t.jsx("div",{className:"text-[#475569] text-sm font-mono p-4",children:"Loading metrics..."});const{history:a={}}=e;return t.jsxs("div",{className:"flex flex-col gap-2 overflow-y-auto h-full",children:[n.length>0&&t.jsx("div",{className:"flex flex-wrap gap-1 px-1",children:n.map(i=>t.jsx(rt,{event:i},i.id))}),t.jsxs("div",{className:"text-[#475569] text-xs font-mono px-1",children:["Year ",e.year," Â· Tick ",e.tick," Â· Pop ",e.population]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx(T,{label:"GDP",value:e.gdp,format:"currency",trend:e.gdpGrowth,color:"#6366f1",history:a.gdp||[]}),t.jsx(T,{label:"Unemployment",value:e.unemployment,format:"percent",color:e.unemployment>.15?"#ef4444":"#22c55e",history:a.unemployment||[]}),t.jsx(T,{label:"Inflation (CPI)",value:e.cpi,format:"index",color:e.cpi>120?"#f97316":"#e2e8f0",history:a.cpi||[]}),t.jsx(T,{label:"Avg Wage",value:e.avgWage,format:"currency",color:"#06b6d4"})]}),t.jsx(st,{value:e.gini}),t.jsx(at,{prices:o==null?void 0:o.prices,supply:o==null?void 0:o.supply,demand:o==null?void 0:o.demand}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx(T,{label:"Poverty Rate",value:e.povertyRate,format:"percent",color:e.povertyRate>.25?"#ef4444":"#94a3b8"}),t.jsx(T,{label:"Social Unrest",value:e.socialUnrest,format:"percent",color:e.socialUnrest>.5?"#ef4444":"#94a3b8",history:a.unrest||[]}),t.jsx(T,{label:"Businesses",value:e.businessCount,color:"#f59e0b"}),t.jsx(T,{label:"Gov Debt",value:Math.abs(e.govDebt||0),format:"currency",color:(e.govDebt||0)>1e3?"#ef4444":"#64748b"})]})]})}function ae(e){return e==null||isNaN(e)?"0":Math.abs(e)>=1e9?(e/1e9).toFixed(1)+"B":Math.abs(e)>=1e6?(e/1e6).toFixed(1)+"M":Math.abs(e)>=1e3?(e/1e3).toFixed(1)+"K":Math.round(e).toString()}const ct=[{id:"incomeTax",name:"Income Tax",category:"fiscal",type:"slider",min:0,max:.6,step:.01,format:"percent",icon:"ðŸ›ï¸",description:"Tax on worker wages. Funds public spending. Too high reduces work incentive.",tradeoff:"â†‘ Revenue but â†“ Worker take-home pay"},{id:"corporateTax",name:"Corporate Tax",category:"fiscal",type:"slider",min:0,max:.5,step:.01,format:"percent",icon:"ðŸ¢",description:"Tax on business profits. High rates may deter investment.",tradeoff:"â†‘ Revenue but â†“ Business investment"},{id:"minWage",name:"Minimum Wage",category:"labor",type:"slider",min:0,max:30,step:1,format:"currency",icon:"ðŸ’¼",description:"Floor on wages. Protects workers but may price out low-skill labor.",tradeoff:"â†‘ Worker wages but â†‘ Unemployment risk"},{id:"ubi",name:"Universal Basic Income",category:"welfare",type:"slider",min:0,max:500,step:10,format:"currency",icon:"ðŸŽ",description:"Unconditional payment to all citizens. Eliminates poverty floor. Very expensive.",tradeoff:"â†‘ Equality but â†‘â†‘ Government spending"},{id:"interestRate",name:"Interest Rate",category:"monetary",type:"slider",min:0,max:.2,step:.005,format:"percent",icon:"ðŸ¦",description:"Cost of borrowing money. High rates fight inflation but slow growth.",tradeoff:"â†‘ Fights inflation but â†“ Business investment"},{id:"antiMonopoly",name:"Anti-Monopoly Laws",category:"regulation",type:"toggle",icon:"âš–ï¸",description:"Break up businesses that dominate a market. Prevents price gouging.",tradeoff:"â†‘ Competition but â†“ Economies of scale"},{id:"educationFunding",name:"Education Spending",category:"public",type:"slider",min:0,max:1,step:.05,format:"percent",icon:"ðŸ“š",description:"Invests in workforce quality over time. Slow payoff, lasting effect.",tradeoff:"â†‘ Long-term productivity but â†‘ Government spending now"},{id:"unemploymentBenefit",name:"Unemployment Benefits",category:"welfare",type:"slider",min:0,max:300,step:10,format:"currency",icon:"ðŸ›¡ï¸",description:"Payments to unemployed workers. Maintains demand but may reduce job search urgency.",tradeoff:"â†‘ Stability but may â†‘ Unemployment duration"},{id:"priceControlFood",name:"Food Price Controls",category:"regulation",type:"toggle",icon:"ðŸŒ¾",description:"Caps food prices to protect the poor. May cause shortages if price is too low.",tradeoff:"â†‘ Affordability but â†“ Farm investment"},{id:"priceControlHousing",name:"Rent Controls",category:"regulation",type:"toggle",icon:"ðŸ ",description:"Limits housing rent increases. Helps existing tenants, discourages new supply.",tradeoff:"â†‘ Affordability but â†“ New housing construction"},{id:"printMoney",name:"Quantitative Easing",category:"monetary",type:"slider",min:0,max:50,step:1,format:"number",icon:"ðŸ–¨ï¸",description:"Inject money into the economy. Boosts demand but causes inflation.",tradeoff:"â†‘ Short-term demand but â†‘â†‘ Inflation risk"},{id:"publicHealthcare",name:"Public Healthcare",category:"public",type:"toggle",icon:"ðŸ¥",description:"Government-funded health. Improves health, reduces death rate, increases happiness.",tradeoff:"â†‘ Health + happiness but â†‘â†‘ Government spending"},{id:"wealthTax",name:"Wealth Tax",category:"fiscal",type:"slider",min:0,max:.05,step:.001,format:"percent",icon:"ðŸ’Ž",description:"Annual tax on total wealth above threshold. Directly reduces inequality.",tradeoff:"â†‘ Equality but â†“ Capital accumulation"},{id:"openBorders",name:"Open Immigration",category:"labor",type:"toggle",icon:"ðŸŒ",description:"Allow skilled immigrants. Boosts labor supply and productivity, may suppress wages.",tradeoff:"â†‘ Productivity but â†‘ Job competition"},{id:"subsidiesFarming",name:"Farm Subsidies",category:"fiscal",type:"toggle",icon:"ðŸšœ",description:"Government support for food production. Lowers food prices but costs taxpayers.",tradeoff:"â†‘ Food supply + lower prices but â†‘ Spending"},{id:"fourDayWeek",name:"4-Day Work Week",category:"weird",type:"toggle",icon:"ðŸ—“ï¸",description:"Mandate a 4-day work week for all businesses. Workers are happier and healthier â€” but businesses get 20% less output per worker.",tradeoff:"â†‘ Worker health & morale but â†“ Business productivity"},{id:"robotTax",name:"Robot Tax",category:"weird",type:"slider",min:0,max:.5,step:.05,format:"percent",icon:"ðŸ¤–",description:"Tax on automated production in the tech sector. Slows job displacement and funds redistribution.",tradeoff:"â†‘ Employment but â†“ Tech sector growth"},{id:"breadAndCircuses",name:"Bread & Circuses",category:"weird",type:"toggle",icon:"ðŸŽª",description:"Government-funded free food and entertainment for all. Romans used it to keep the masses pacified. Crushes unrest â€” briefly.",tradeoff:"â†“ Unrest now but â†‘ Gov spending + dependency risk"},{id:"mandatoryProfitShare",name:"Mandatory Profit Sharing",category:"weird",type:"slider",min:0,max:.3,step:.05,format:"percent",icon:"ðŸ¤",description:"Businesses must share a percentage of profits with all employees. Reduces inequality, may deter investment.",tradeoff:"â†‘ Worker wealth + lower Gini but â†“ Business capital"},{id:"landValueTax",name:"Land Value Tax",category:"weird",type:"slider",min:0,max:.05,step:.005,format:"percent",icon:"ðŸŒ",description:"Annual tax on land value only (not buildings). Georgist reform â€” discourages speculation, funds government efficiently.",tradeoff:"â†‘ Gov revenue + lower housing prices but unpopular with landowners"},{id:"banAdvertising",name:"Ban Advertising",category:"weird",type:"toggle",icon:"ðŸš«",description:"Outlaws all commercial advertising. Luxury demand collapses. People only buy what they actually need. Businesses struggle to grow.",tradeoff:"â†“ Luxury consumption + lower Gini but â†“ Business growth"},{id:"debtJubilee",name:"Debt Jubilee",category:"weird",type:"toggle",icon:"ðŸŽº",description:"One-time Biblical-style cancellation of all debts. Agents with negative wealth are reset to zero. Happens once then turns off.",tradeoff:"Massive one-time equality reset â€” may destabilize lenders"},{id:"lotteryRedistribution",name:"Wealth Lottery",category:"weird",type:"toggle",icon:"ðŸŽ°",description:'Each tick, a random wealthy citizen pays a "luck tax" directly to a random poor citizen. Chaotic but surprisingly equalizing.',tradeoff:"â†“ Extreme wealth concentration but unpredictable and arbitrary"},{id:"sumptuary",name:"Sumptuary Laws",category:"weird",type:"toggle",icon:"ðŸ‘‘",description:"Legal limits on luxury spending for the wealthy. Medieval kings used these. Luxury sector collapses but inequality drops.",tradeoff:"â†“ Inequality + â†“ Gini but luxury sector destruction"},{id:"degrowth",name:"Degrowth Policy",category:"weird",type:"toggle",icon:"ðŸŒ±",description:"Deliberately slow economic growth. Less GDP obsession means less stress, more stability, better health â€” but economists freak out.",tradeoff:"â†“ GDP growth + â†‘ Health & stability but controversial"},{id:"algoCentralPlanning",name:"Algorithmic Planning",category:"weird",type:"toggle",icon:"ðŸ§®",description:"An AI algorithm sets all prices and wages. Eliminates market volatility. Cold, efficient, and slightly dystopian.",tradeoff:"â†“ Price chaos but removes market discovery + creepy"},{id:"universalBankAccount",name:"Universal Bank Account",category:"weird",type:"toggle",icon:"ðŸ§",description:"Every citizen gets a free government bank account. Reduces financial exclusion, enables direct transfers, improves savings rates.",tradeoff:"â†‘ Financial inclusion + savings but â†‘ Gov infrastructure cost"},{id:"helicopterMoney",name:"Helicopter Money",category:"chaos",type:"slider",min:0,max:500,step:10,format:"currency",icon:"ðŸš",description:"Drop cash directly into every citizen's pocket every tick. Milton Friedman's thought experiment. Pure demand stimulus â€” with pure inflation consequences.",tradeoff:"â†‘â†‘ Demand and spending but â†‘â†‘â†‘ Inflation â€” eventually hyperinflation"},{id:"maximumWage",name:"Maximum Wage",category:"chaos",type:"slider",min:0,max:500,step:10,format:"currency",icon:"ðŸ”’",description:"Hard cap on how much anyone can earn. Income above the limit is confiscated. No CEO mega-salaries allowed. Brain drain incoming.",tradeoff:"â†“ Inequality and Gini but â†‘ Risk of skill emigration and talent suppression"},{id:"wealthConfiscation",name:"Wealth Confiscation",category:"chaos",type:"slider",min:0,max:.5,step:.05,format:"percent",icon:"ðŸª“",description:"Seize a portion of all wealth above $1000. Not a tax â€” an outright seizure. The rich will not be happy. Capital flight begins immediately.",tradeoff:"â†“â†“ Gini immediately but â†‘ Capital flight, investment collapse, and rich agent rage"},{id:"nationalizeIndustries",name:"Nationalize Industries",category:"chaos",type:"toggle",icon:"ðŸ­",description:'The government takes over all private businesses. Workers get flat wages. Production is "planned." The invisible hand is replaced by a five-year plan.',tradeoff:"â†“ Unemployment but â†“â†“ Productivity, â†‘ Gov costs, and businesses stop innovating"},{id:"punitiveTargiffs",name:"Punitive Tariffs",category:"chaos",type:"slider",min:0,max:2,step:.1,format:"percent",icon:"ðŸš§",description:'Slap a massive surcharge on all goods. "Protecting" the economy. In practice: prices skyrocket, consumers suffer, trading partners retaliate.',tradeoff:"â†‘â†‘ Prices (inflation) and â†“ Real wages â€” the Smoot-Hawley special"},{id:"guaranteedJobs",name:"Guaranteed Jobs Program",category:"chaos",type:"toggle",icon:"ðŸ‘·",description:"The government employs every unemployed citizen at minimum wage. Unemployment vanishes on paper. The government payroll explodes.",tradeoff:"â†“ Unemployment to 0% but â†‘â†‘â†‘ Government spending and budget deficit"}],dt={fiscal:{label:"Fiscal Policy",color:"#3b82f6"},monetary:{label:"Monetary Policy",color:"#f59e0b"},labor:{label:"Labor Market",color:"#22c55e"},welfare:{label:"Welfare",color:"#ec4899"},regulation:{label:"Regulation",color:"#8b5cf6"},public:{label:"Public Services",color:"#06b6d4"},weird:{label:"âš—ï¸ Weird Laws",color:"#f97316"},chaos:{label:"ðŸ’£ Chaos Levers",color:"#dc2626"}};function ut({policy:e,value:o,onChange:n}){const a=i=>e.format==="percent"?(i*100).toFixed(0)+"%":e.format==="currency"?"$"+i:i;return t.jsxs("div",{className:"group",children:[t.jsxs("div",{className:"flex justify-between items-center mb-1",children:[t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx("span",{className:"text-sm",children:e.icon}),t.jsx("span",{className:"text-xs text-[#e2e8f0] font-mono",children:e.name})]}),t.jsx("span",{className:"text-xs font-bold font-mono text-[#6366f1]",children:a(o)})]}),t.jsx("input",{type:"range",min:e.min,max:e.max,step:e.step,value:o,onChange:i=>n(e.id,parseFloat(i.target.value)),className:"w-full h-1.5 rounded-full appearance-none cursor-pointer",style:{background:`linear-gradient(to right, #6366f1 0%, #6366f1 ${(o-e.min)/(e.max-e.min)*100}%, #1e1e2e ${(o-e.min)/(e.max-e.min)*100}%, #1e1e2e 100%)`},title:e.description}),t.jsx("div",{className:"hidden group-hover:block text-[10px] text-[#475569] mt-1 leading-tight",children:e.tradeoff})]})}function ft({policy:e,value:o,onChange:n}){return t.jsxs("div",{className:"flex items-center justify-between group",children:[t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx("span",{className:"text-sm",children:e.icon}),t.jsx("span",{className:"text-xs text-[#e2e8f0] font-mono",children:e.name})]}),t.jsx("button",{onClick:()=>n(e.id,!o),className:`relative w-9 h-5 rounded-full transition-colors duration-200 flex-shrink-0 ${o?"bg-[#6366f1]":"bg-[#334155]"}`,children:t.jsx("span",{className:`absolute top-0.5 w-4 h-4 bg-white rounded-full shadow transition-transform duration-200 ${o?"translate-x-4":"translate-x-0.5"}`})})]})}function ht({policies:e,onPolicyChange:o}){const[n,a]=c.useState("fiscal"),[i,s]=c.useState(!0),r=ct.filter(l=>l.category===n);return t.jsxs("div",{className:"flex flex-col h-full",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h3",{className:"text-xs uppercase tracking-widest text-[#64748b] font-mono",children:"Policy Controls"}),t.jsx("button",{onClick:()=>s(!i),className:"text-[#475569] hover:text-[#e2e8f0] text-xs",children:i?"â–¼":"â–¶"})]}),i&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:Object.entries(dt).map(([l,u])=>t.jsx("button",{onClick:()=>a(l),className:`text-[10px] px-2 py-0.5 rounded font-mono transition-colors ${n===l?"text-white":"text-[#475569] hover:text-[#94a3b8]"}`,style:{backgroundColor:n===l?u.color+"33":"transparent",borderColor:u.color+"44",border:"1px solid"},children:u.label},l))}),t.jsx("div",{className:"flex flex-col gap-3 overflow-y-auto flex-1",children:r.map(l=>t.jsx("div",{children:l.type==="slider"?t.jsx(ut,{policy:l,value:(e==null?void 0:e[l.id])??0,onChange:o}):t.jsx(ft,{policy:l,value:(e==null?void 0:e[l.id])??!1,onChange:o})},l.id))})]})]})}const mt=[{label:"1Ã—",value:1,title:"Slow â€” watch individual agents"},{label:"5Ã—",value:5,title:"Normal play"},{label:"20Ã—",value:20,title:"Fast-forward"},{label:"Max",value:60,title:"Stress test"}];function pt({paused:e,speed:o,onPause:n,onResume:a,onReset:i,onSpeedChange:s,onScenarioOpen:r,onShockMe:l,scenarioName:u,year:d,narratorEnabled:h,narratorLoading:m,onNarratorToggle:g}){const[f,x]=c.useState(!1),v=()=>{navigator.clipboard&&(navigator.clipboard.writeText(window.location.href),x(!0),setTimeout(()=>x(!1),2e3))};return t.jsxs("header",{className:"flex items-center justify-between px-4 py-2 bg-[#0a0a0f] border-b border-[#1e1e2e] flex-wrap gap-2",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-lg",children:"ðŸ¾"}),t.jsx("span",{className:"text-[#e2e8f0] font-bold font-mono text-sm hidden sm:block",children:"EconSim"})]}),t.jsxs("button",{onClick:r,className:"text-xs font-mono text-[#6366f1] hover:text-[#818cf8] border border-[#6366f133] hover:border-[#6366f166] rounded px-2 py-1 transition-colors",children:[u||"Free Market"," â–¾"]}),d!==void 0&&t.jsxs("span",{className:"text-[#475569] text-xs font-mono",children:["Year ",d]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"flex items-center gap-0.5 bg-[#12121a] border border-[#1e1e2e] rounded px-1",children:mt.map(b=>t.jsx("button",{onClick:()=>s(b.value),title:b.title,className:`text-xs font-mono px-2 py-1 rounded transition-colors ${o===b.value?"bg-[#6366f1] text-white":"text-[#64748b] hover:text-[#e2e8f0]"}`,children:b.label},b.value))}),t.jsx("button",{onClick:e?a:n,className:`flex items-center gap-1 text-xs font-mono px-3 py-1.5 rounded border transition-colors
            border-[#1e1e2e] text-[#e2e8f0] hover:border-[#6366f1] hover:text-[#6366f1]`,children:e?"â–¶ Play":"â¸ Pause"}),t.jsx("button",{onClick:i,className:`text-xs font-mono px-3 py-1.5 rounded border border-[#1e1e2e] text-[#64748b]
            hover:border-[#ef4444] hover:text-[#ef4444] transition-colors`,title:"Reset simulation",children:"â†º Reset"}),t.jsx("button",{onClick:l,className:`text-xs font-mono px-3 py-1.5 rounded border border-[#f59e0b33] text-[#f59e0b]
            hover:bg-[#f59e0b11] transition-colors`,title:"Trigger a random economic event",children:"âš¡ Shock"}),t.jsx("button",{onClick:v,className:`text-xs font-mono px-3 py-1.5 rounded border border-[#1e1e2e] text-[#64748b]
            hover:border-[#22c55e] hover:text-[#22c55e] transition-colors`,title:"Copy shareable link",children:f?"âœ“ Copied!":"ðŸ”— Share"}),t.jsx("button",{onClick:g,disabled:m,className:`text-xs font-mono px-3 py-1.5 rounded border transition-colors ${h?"border-[#06b6d4] text-[#06b6d4] bg-[#06b6d411]":"border-[#1e1e2e] text-[#475569] hover:border-[#06b6d4] hover:text-[#06b6d4]"} ${m?"opacity-50 cursor-wait":""}`,title:h?"Disable narration":"Enable AI narration (loads ~40MB model)",children:m?"â³ Loadingâ€¦":h?"ðŸ”Š Voice On":"ðŸ”‡ Voice"})]})]})}const U={freeMarket:{id:"freeMarket",name:"Free Market Utopia",subtitle:"No rules. Pure capitalism.",description:"Zero regulation. No minimum wage, no taxes, no safety net. Watch monopolies form naturally and see who wins â€” and who gets left behind.",icon:"ðŸ¦…",difficulty:"Observe",color:"#3b82f6",isHistorical:!1,policies:{incomeTax:0,corporateTax:0,minWage:0,ubi:0,interestRate:.02,antiMonopoly:!1,educationFunding:0,unemploymentBenefit:0,priceControlFood:!1,priceControlHousing:!1,printMoney:0,publicHealthcare:!1,wealthTax:0,openBorders:!1,subsidiesFarming:!1},agentCount:200,businessCount:20,wealthMultiplier:1.2,wealthInequality:1.5,avgSkill:.5,lesson:"Natural monopolies emerge quickly. The rich get richer. But GDP grows fast at first."},debtSpiral:{id:"debtSpiral",name:"The Debt Spiral",subtitle:"Borrowed too much. Now what?",description:"The government spent heavily on social programs. Debt is high, deficit is growing. Austerity or default â€” pick your poison.",icon:"ðŸ’¸",difficulty:"Hard",color:"#ef4444",isHistorical:!1,policies:{incomeTax:.45,corporateTax:.35,minWage:15,ubi:200,interestRate:.12,antiMonopoly:!0,educationFunding:.8,unemploymentBenefit:150,priceControlFood:!1,priceControlHousing:!1,printMoney:5,publicHealthcare:!0,wealthTax:.02,openBorders:!1,subsidiesFarming:!1},agentCount:200,businessCount:18,wealthMultiplier:.8,wealthInequality:.8,avgSkill:.55,startGovDebt:5e3,lesson:"Cutting programs causes pain now. Keeping them causes pain later. The political economy of austerity."},techDisruption:{id:"techDisruption",name:"Tech Disruption",subtitle:"Automation is coming for jobs.",description:"A stable, balanced economy. Then a tech breakthrough hits â€” half the jobs can be automated. Will you adapt or collapse?",icon:"ðŸ¤–",difficulty:"Medium",color:"#8b5cf6",isHistorical:!1,policies:{incomeTax:.28,corporateTax:.21,minWage:12,ubi:0,interestRate:.05,antiMonopoly:!1,educationFunding:.5,unemploymentBenefit:80,priceControlFood:!1,priceControlHousing:!1,printMoney:0,publicHealthcare:!1,wealthTax:0,openBorders:!1,subsidiesFarming:!1},agentCount:200,businessCount:20,wealthMultiplier:1,wealthInequality:1,avgSkill:.5,scheduledEvents:[{type:"techBreakthrough",atTick:200}],lesson:"Automation creates wealth but destroys jobs. UBI or retraining â€” which policy saves more people?"},greatDepression:{id:"greatDepression",name:"The Great Depression",subtitle:"October 1929. The markets have collapsed.",description:'GDP has fallen 30%. Unemployment is climbing toward 25%. Banks are failing daily. Hoover says "be patient." Do you agree?',icon:"ðŸ“‰",difficulty:"Very Hard",color:"#78716c",isHistorical:!0,era:"1929â€“1939 Â· United States",durationYears:15,policies:{incomeTax:.02,corporateTax:.12,minWage:0,ubi:0,interestRate:.06,antiMonopoly:!1,educationFunding:.1,unemploymentBenefit:0,priceControlFood:!1,priceControlHousing:!1,printMoney:0,publicHealthcare:!1,wealthTax:0,openBorders:!1,subsidiesFarming:!1},agentCount:200,businessCount:12,wealthMultiplier:.35,wealthInequality:2,avgSkill:.4,scheduledEvents:[{type:"recession",atTick:1},{type:"financialBubble",atTick:80}],lesson:"Austerity deepened the Depression. FDR's New Deal proved government spending could restart demand."},weimarHyperinflation:{id:"weimarHyperinflation",name:"Weimar Hyperinflation",subtitle:"A loaf of bread costs a wheelbarrow of cash.",description:"Post-WWI Germany is printing money to pay reparations. Inflation is doubling daily. The middle class is being wiped out. Can you stabilize the currency before society collapses?",icon:"ðŸ’¹",difficulty:"Expert",color:"#dc2626",isHistorical:!0,era:"1921â€“1924 Â· Germany",durationYears:10,policies:{incomeTax:.15,corporateTax:.1,minWage:0,ubi:0,interestRate:.01,antiMonopoly:!1,educationFunding:.2,unemploymentBenefit:0,priceControlFood:!0,priceControlHousing:!1,printMoney:40,publicHealthcare:!1,wealthTax:0,openBorders:!1,subsidiesFarming:!1},agentCount:180,businessCount:15,wealthMultiplier:.5,wealthInequality:1.8,avgSkill:.45,scheduledEvents:[],lesson:"Stopping hyperinflation requires cold turkey: halt money printing, issue new credible currency, accept short-term pain."},stagflation1970s:{id:"stagflation1970s",name:"1970s Stagflation",subtitle:"Inflation up. Unemployment up. Nothing works.",description:"OPEC's oil embargo just hit. Prices are surging but the economy is stagnating. Your standard policy tools are pointing in opposite directions. What do you do?",icon:"â›½",difficulty:"Hard",color:"#d97706",isHistorical:!0,era:"1973â€“1982 Â· United States",durationYears:12,policies:{incomeTax:.3,corporateTax:.48,minWage:8,ubi:0,interestRate:.06,antiMonopoly:!1,educationFunding:.4,unemploymentBenefit:100,priceControlFood:!1,priceControlHousing:!1,printMoney:8,publicHealthcare:!1,wealthTax:0,openBorders:!1,subsidiesFarming:!1},agentCount:200,businessCount:18,wealthMultiplier:.85,wealthInequality:1.1,avgSkill:.5,scheduledEvents:[{type:"cropFailure",atTick:20},{type:"recession",atTick:150}],lesson:"Stagflation broke Keynesian consensus. Volcker's painful rate hikes eventually worked â€” but cost millions their jobs."},crisisOf2008:{id:"crisisOf2008",name:"2008 Financial Crisis",subtitle:"Lehman just failed. The banks are frozen.",description:"The US housing bubble has burst. Banks are insolvent. Credit is frozen. The global economy is in freefall. Bail out the banks, let them fail, or something else?",icon:"ðŸ¦",difficulty:"Hard",color:"#7c3aed",isHistorical:!0,era:"2008â€“2015 Â· Global",durationYears:10,policies:{incomeTax:.28,corporateTax:.35,minWage:10,ubi:0,interestRate:.05,antiMonopoly:!1,educationFunding:.4,unemploymentBenefit:100,priceControlFood:!1,priceControlHousing:!1,printMoney:0,publicHealthcare:!1,wealthTax:0,openBorders:!1,subsidiesFarming:!1},agentCount:200,businessCount:16,wealthMultiplier:.7,wealthInequality:1.6,avgSkill:.5,scheduledEvents:[{type:"financialBubble",atTick:1},{type:"recession",atTick:30}],lesson:"Bailouts prevented a depression but rewarded recklessness. The political consequences lasted a decade."},japanLostDecade:{id:"japanLostDecade",name:"Japan's Lost Decade",subtitle:"Zero rates. Zero growth. Zero inflation.",description:"Japan's asset bubble burst in 1991. Interest rates are near zero. Stimulus packages come and go. Nothing works. Can you escape the deflationary trap that trapped Japan for 20 years?",icon:"ðŸ—¾",difficulty:"Expert",color:"#0891b2",isHistorical:!0,era:"1991â€“2010 Â· Japan",durationYears:15,policies:{incomeTax:.33,corporateTax:.38,minWage:6,ubi:0,interestRate:.005,antiMonopoly:!1,educationFunding:.6,unemploymentBenefit:80,priceControlFood:!1,priceControlHousing:!1,printMoney:2,publicHealthcare:!0,wealthTax:0,openBorders:!1,subsidiesFarming:!1},agentCount:200,businessCount:20,wealthMultiplier:.9,wealthInequality:.9,avgSkill:.65,scheduledEvents:[{type:"financialBubble",atTick:1},{type:"recession",atTick:10}],lesson:"Half-measures and zombie banks prolonged Japan's stagnation for 20 years. Swift, decisive action matters."},nordicMiracle:{id:"nordicMiracle",name:"Build the Nordic Model",subtitle:"High taxes. High trust. High happiness.",description:"You're building a new nation. Can you achieve the Nordic balance: low inequality, high productivity, strong safety net, and sustained growth? This is what success looks like.",icon:"ðŸŒ",difficulty:"Blueprint",color:"#059669",isHistorical:!0,era:"Reference Model Â· Scandinavia",durationYears:20,policies:{incomeTax:.45,corporateTax:.25,minWage:18,ubi:0,interestRate:.03,antiMonopoly:!0,educationFunding:.9,unemploymentBenefit:200,priceControlFood:!1,priceControlHousing:!1,printMoney:0,publicHealthcare:!0,wealthTax:.01,openBorders:!1,subsidiesFarming:!0},agentCount:200,businessCount:22,wealthMultiplier:1,wealthInequality:.7,avgSkill:.6,avgEducation:.65,scheduledEvents:[],lesson:"The Nordic model requires high institutional trust, universal services, AND open competitive markets. All three."}},he=Object.values(U),gt=he.filter(e=>!e.isHistorical),bt=he.filter(e=>e.isHistorical);function xt({scenario:e,onSelect:o,current:n}){const a=n===e.id;return t.jsx("button",{onClick:()=>o(e.id),className:`w-full text-left p-4 rounded-xl border transition-all ${a?"":"border-[#1e1e2e] bg-[#12121a] hover:border-[#334155]"}`,style:{borderColor:a?e.color:void 0,backgroundColor:a?e.color+"10":void 0},children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("span",{className:"text-2xl",children:e.icon}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-0.5",children:[t.jsx("span",{className:"text-white font-bold text-sm",children:e.name}),t.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded font-mono",style:{backgroundColor:e.color+"22",color:e.color},children:e.difficulty}),e.durationYears&&t.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded font-mono bg-[#1e1e2e] text-[#64748b]",children:[e.durationYears,"yr challenge"]})]}),e.era&&t.jsx("div",{className:"text-[10px] font-mono text-[#475569] mb-1",children:e.era}),t.jsx("p",{className:"text-[#64748b] text-xs leading-relaxed",children:e.description}),t.jsxs("div",{className:"mt-2 text-[10px] font-mono text-[#475569] border-l-2 pl-2",style:{borderColor:e.color+"55"},children:["ðŸ’¡ ",e.lesson]})]})]})})}function se({title:e,subtitle:o,scenarios:n,current:a,onSelect:i}){return t.jsxs("div",{children:[t.jsxs("div",{className:"mb-3",children:[t.jsx("h3",{className:"text-white font-bold text-sm",children:e}),o&&t.jsx("p",{className:"text-[#475569] text-xs mt-0.5",children:o})]}),t.jsx("div",{className:"flex flex-col gap-2",children:n.map(s=>t.jsx(xt,{scenario:s,current:a,onSelect:i},s.id))})]})}function yt({current:e,onSelect:o,onClose:n}){return t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/75 backdrop-blur-sm",children:t.jsxs("div",{className:"bg-[#0d0d14] border border-[#1e1e2e] rounded-2xl p-6 max-w-2xl w-full mx-4 max-h-[92vh] overflow-y-auto shadow-2xl",children:[t.jsxs("div",{className:"flex items-start justify-between mb-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-white font-bold text-xl font-mono",children:"Choose Scenario"}),t.jsx("p",{className:"text-[#64748b] text-sm mt-1",children:"Sandbox: experiment freely. Historical Crises: can you do better than history did?"})]}),t.jsx("button",{onClick:n,className:"text-[#475569] hover:text-white text-xl ml-4 flex-shrink-0",children:"âœ•"})]}),t.jsxs("div",{className:"flex flex-col gap-6",children:[t.jsx(se,{title:"ðŸ§ª Sandbox",subtitle:"No time limit. Experiment with policy freely.",scenarios:gt,current:e,onSelect:a=>{o(a),n()}}),t.jsx("div",{className:"border-t border-[#1e1e2e] pt-6",children:t.jsx(se,{title:"ðŸ“œ Historical Crises â€” Can You Do Better?",subtitle:"Real economic crises, simulated. Each has objectives and a report card. Your outcome is compared to what actually happened.",scenarios:bt,current:e,onSelect:a=>{o(a),n()}})})]}),t.jsx("div",{className:"mt-4 text-center text-[#334155] text-xs font-mono",children:"Changing scenario resets the simulation"})]})})}const vt={monopoly_forming:{title:"Monopoly Alert",emoji:"ðŸ¢",body:"One business now controls over 60% of its market. Without competition, prices rise and quality drops.",realWorld:"Standard Oil controlled 91% of US oil in 1904. The Sherman Antitrust Act (1890) broke it up. Today, similar debates surround Big Tech.",color:"#ef4444"},high_inequality:{title:"Inequality Spike",emoji:"ðŸ“Š",body:"Wealth concentration is extreme. The Gini coefficient measures this: 0 = perfect equality, 1 = one person owns everything.",realWorld:"The US Gini is ~0.41. Scandinavia: ~0.28. Brazil: ~0.53. High inequality correlates with lower social mobility and higher crime.",color:"#f59e0b"},high_unemployment:{title:"Unemployment Crisis",emoji:"ðŸ“‰",body:"Mass unemployment creates a vicious cycle: fewer workers â†’ less spending â†’ fewer sales â†’ more layoffs.",realWorld:"Keynes' insight: in a recession, government spending can break this cycle by creating demand when the private sector won't.",color:"#ef4444"},inflation_spiral:{title:"Inflation Warning",emoji:"ðŸ”¥",body:"Prices are rising faster than wages. Your money buys less each day. The purchasing power of savings erodes.",realWorld:"Zimbabwe's hyperinflation (2008) reached 89.7 sextillion % monthly. The cure: independent central banks that raise rates.",color:"#f97316"},min_wage_tradeoff:{title:"Minimum Wage Tradeoff",emoji:"âš–ï¸",body:"A higher minimum wage raised living standards â€” but some businesses can no longer afford to hire.",realWorld:"Seattle's $15 minimum wage (2015) study: restaurant employment rose in some areas, fell in others. Context matters enormously.",color:"#6366f1"},budget_surplus:{title:"Fiscal Surplus!",emoji:"ðŸ’°",body:"Tax revenue exceeds spending. The government can pay down debt or invest in future growth.",realWorld:"The US ran surpluses 1998-2001. Norway's oil fund (built from surpluses) now exceeds $1.4 trillion.",color:"#22c55e"},stagnation:{title:"Stagflation Risk",emoji:"ðŸ˜°",body:"The economy is shrinking AND unemployment is rising â€” the worst of both worlds. Traditional policy tools conflict.",realWorld:"The 1970s oil crisis created stagflation. Volcker killed it (1980) by raising interest rates to 20% â€” causing a painful recession.",color:"#8b5cf6"},poverty_trap:{title:"Poverty Trap",emoji:"ðŸª¤",body:"Workers in poverty can't afford better nutrition, education, or healthcare â€” which keeps them in poverty.",realWorld:"The poverty trap: every dollar earned reduces welfare by $1. Effective marginal tax rates for the poor can exceed 80%.",color:"#ef4444"},dutch_disease:{title:"Resource Dependency",emoji:"â›½",body:"One sector dominates, crowding out others. High-earning sectors attract all workers, leaving other industries struggling.",realWorld:`The "Dutch Disease": Netherlands' 1960s natural gas discovery boosted the guilder, making exports uncompetitive.`,color:"#f59e0b"},ubi_effect:{title:"UBI Effect Observed",emoji:"ðŸŽ¯",body:"Universal Basic Income is reducing poverty and providing security. Some people are taking more risks â€” starting businesses.",realWorld:"Finland's UBI experiment (2017-18): recipients reported better wellbeing, mental health improved. Employment was neutral.",color:"#22c55e"}};function wt({insight:e,onDismiss:o}){const[n,a]=c.useState(!1);if(c.useEffect(()=>{e&&a(!0)},[e]),!e||!n)return null;const i=vt[e.id]||{title:e.title,emoji:"ðŸ’¡",body:e.body,realWorld:e.realWorld,color:"#6366f1"},s=()=>{a(!1),setTimeout(()=>o==null?void 0:o(),300)};return t.jsx("div",{className:`fixed bottom-6 right-6 z-40 max-w-sm transition-all duration-300 ${n?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:t.jsx("div",{className:"bg-[#0d0d14] border rounded-xl p-4 shadow-2xl",style:{borderColor:i.color+"66"},children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("span",{className:"text-2xl flex-shrink-0",children:i.emoji}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsx("h4",{className:"text-white font-bold text-sm",children:i.title}),t.jsx("button",{onClick:s,className:"text-[#475569] hover:text-white text-sm ml-2",children:"âœ•"})]}),t.jsx("p",{className:"text-[#94a3b8] text-xs leading-relaxed mb-2",children:i.body}),t.jsxs("div",{className:"text-[10px] text-[#64748b] leading-relaxed border-l-2 pl-2 italic",style:{borderColor:i.color+"66"},children:["ðŸŒ ",i.realWorld]}),t.jsxs("div",{className:"text-[9px] text-[#334155] mt-2 font-mono",children:["Year ",e.year," Â· ",e.id]})]})]})})})}const kt={working:"Employed",unemployed:"Unemployed",child:"Child",retired:"Retired",owner:"Business Owner",dead:"Deceased"},jt={working:"#22c55e",unemployed:"#ef4444",child:"#94a3b8",retired:"#64748b",owner:"#f59e0b",dead:"#374151"};function Nt({agent:e,onClose:o}){if(!e)return null;const n=Math.floor(e.age/52),a=fe(e.wealth);return t.jsxs("div",{className:"fixed top-20 left-1/2 -translate-x-1/2 z-40 bg-[#0d0d14] border border-[#1e1e2e] rounded-xl p-4 shadow-2xl max-w-xs w-full",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-4 h-4 rounded-full border border-white/20",style:{backgroundColor:a}}),t.jsxs("span",{className:"text-white font-bold font-mono text-sm",children:["Agent #",e.id]})]}),t.jsx("button",{onClick:o,className:"text-[#475569] hover:text-white text-sm",children:"âœ•"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1.5 text-xs mb-3",children:[t.jsx(N,{label:"Age",value:`${n} yrs`}),t.jsx(N,{label:"Status",value:kt[e.state]||e.state,color:jt[e.state]}),t.jsx(N,{label:"Wealth",value:`$${Math.round(e.wealth)}`,color:a}),t.jsx(N,{label:"Wage",value:e.wage>0?`$${e.wage.toFixed(1)}/tick`:"â€”"}),t.jsx(N,{label:"Skill",value:`${(e.skill*100).toFixed(0)}%`}),t.jsx(N,{label:"Education",value:`${(e.education*100).toFixed(0)}%`}),t.jsx(N,{label:"Health",value:`${(e.health*100).toFixed(0)}%`}),t.jsx(N,{label:"Happiness",value:`${(e.happiness*100).toFixed(0)}%`,color:e.happiness>.6?"#22c55e":e.happiness<.3?"#ef4444":"#e2e8f0"}),e.jobSector&&t.jsx(N,{label:"Sector",value:e.jobSector}),t.jsx(N,{label:"Class",value:e.socialClass,color:e.socialClass==="rich"?"#f59e0b":e.socialClass==="poor"?"#ef4444":"#e2e8f0"})]}),e.events&&e.events.length>0&&t.jsxs("div",{children:[t.jsx("div",{className:"text-[#475569] text-[10px] uppercase tracking-wider font-mono mb-1.5",children:"Life History"}),t.jsx("ul",{className:"space-y-0.5 max-h-24 overflow-y-auto",children:e.events.map((i,s)=>t.jsxs("li",{className:"text-[10px] text-[#64748b] font-mono leading-tight",children:["â€¢ ",i]},s))})]})]})}function N({label:e,value:o,color:n}){return t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"text-[#475569] font-mono",children:e}),t.jsx("span",{className:"font-mono font-medium",style:{color:n||"#e2e8f0"},children:o})]})}function Ct(e){return e<100?"<$100":e<300?"$100-300":e<800?"$300-800":e<2e3?"$800-2K":e<5e3?"$2K-5K":">$5K"}const re=["<$100","$100-300","$300-800","$800-2K","$2K-5K",">$5K"],Tt=["#ef4444","#f97316","#eab308","#22c55e","#06b6d4","#f59e0b"];function St({agents:e}){const o=c.useMemo(()=>{if(!(e!=null&&e.length))return[];const a={};re.forEach(i=>{a[i]=0});for(const i of e){if(!i.alive)continue;const s=Ct(i.wealth);a[s]=(a[s]||0)+1}return re.map((i,s)=>({name:i,count:a[i]||0,fill:Tt[s]}))},[e]),n=c.useMemo(()=>{if(!(e!=null&&e.length))return[];const a=e.filter(i=>i.alive).map(i=>Math.max(0,i.wealth));return Oe(a,20)},[e]);return t.jsxs("div",{className:"flex flex-col gap-3",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-[#64748b] text-xs uppercase tracking-wider font-mono mb-2",children:"Wealth Distribution"}),t.jsx("div",{className:"h-28",children:t.jsx(z,{width:"100%",height:"100%",children:t.jsxs(Ee,{data:o,margin:{top:0,right:0,bottom:0,left:-20},children:[t.jsx(Q,{dataKey:"name",tick:{fontSize:8,fill:"#475569",fontFamily:"monospace"},axisLine:!1,tickLine:!1}),t.jsx(ee,{tick:{fontSize:8,fill:"#475569",fontFamily:"monospace"},axisLine:!1,tickLine:!1}),t.jsx(te,{contentStyle:{background:"#12121a",border:"1px solid #1e1e2e",fontSize:10},labelStyle:{color:"#e2e8f0"},itemStyle:{color:"#6366f1"}}),t.jsx(Ae,{dataKey:"count",radius:[2,2,0,0],children:o.map((a,i)=>t.jsx(Re,{fill:a.fill},i))})]})})})]}),n.length>2&&t.jsxs("div",{children:[t.jsx("div",{className:"text-[#64748b] text-xs uppercase tracking-wider font-mono mb-2",children:"Lorenz Curve"}),t.jsx("div",{className:"h-24",children:t.jsx(z,{width:"100%",height:"100%",children:t.jsxs(Be,{data:n,margin:{top:0,right:0,bottom:0,left:-20},children:[t.jsx(Q,{dataKey:"population",tick:{fontSize:8,fill:"#475569"},axisLine:!1,tickLine:!1,tickFormatter:a=>a+"%"}),t.jsx(ee,{tick:{fontSize:8,fill:"#475569"},axisLine:!1,tickLine:!1,tickFormatter:a=>a+"%"}),t.jsx(ne,{data:[{population:0,perfect:0},{population:100,perfect:100}],type:"linear",dataKey:"perfect",stroke:"#334155",strokeWidth:1,dot:!1,strokeDasharray:"3 3"}),t.jsx(ne,{type:"monotone",dataKey:"wealth",stroke:"#6366f1",strokeWidth:1.5,dot:!1,isAnimationActive:!1}),t.jsx(te,{contentStyle:{background:"#12121a",border:"1px solid #1e1e2e",fontSize:10},formatter:a=>a.toFixed(1)+"%"})]})})}),t.jsx("div",{className:"text-[10px] text-[#334155] text-center font-mono",children:"Area between lines = Gini coefficient"})]})]})}function Pt({objectives:e=[],scenarioDurationYears:o,year:n,scenarioName:a}){if(!e.length)return t.jsxs("div",{className:"text-[#334155] text-xs font-mono p-2 text-center",children:["No objectives in sandbox mode.",t.jsx("br",{}),t.jsx("span",{className:"text-[#475569]",children:"Pick a Historical Crisis for a timed challenge."})]});const i=o?Math.max(0,o-(n||0)):null,s=e.filter(r=>r.completed).length;return t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"text-[#64748b] text-xs font-mono",children:[s,"/",e.length," objectives met"]}),i!==null&&t.jsxs("div",{className:`text-xs font-mono font-bold ${i<3?"text-[#ef4444]":"text-[#94a3b8]"}`,children:[i,"yr left"]})]}),o&&t.jsx("div",{className:"w-full bg-[#1e1e2e] rounded-full h-1",children:t.jsx("div",{className:"h-1 rounded-full transition-all duration-500 bg-[#6366f1]",style:{width:`${Math.min(100,(n||0)/o*100)}%`}})}),e.map(r=>{const l=r.completed?"#22c55e":r.met?"#f59e0b":"#ef4444",u=r.completed?"Complete":r.met?"Activeâ€¦":"Not met";return t.jsxs("div",{className:"bg-[#12121a] border rounded-lg p-3",style:{borderColor:l+"44"},children:[t.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1.5",children:[t.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-mono text-[#e2e8f0]",children:[t.jsx("span",{children:r.icon}),t.jsx("span",{children:r.label})]}),t.jsx("span",{className:"text-[10px] font-mono flex-shrink-0",style:{color:l},children:u})]}),t.jsx("div",{className:"text-[10px] text-[#475569] mb-1.5",children:r.description}),t.jsx("div",{className:"w-full bg-[#0a0a0f] rounded-full h-1.5 mb-1",children:t.jsx("div",{className:"h-1.5 rounded-full transition-all duration-500",style:{width:`${Math.round(r.progress*100)}%`,backgroundColor:l}})}),r.met&&!r.completed&&r.sustainProgress>0&&t.jsxs("div",{className:"text-[9px] text-[#475569] font-mono",children:["Sustaining: ",Math.round(r.sustainProgress*100),"%"]}),!r.completed&&t.jsxs("div",{className:"text-[9px] text-[#334155] mt-1 leading-tight italic",children:["ðŸ’¡ ",r.tip]})]},r.id)})]})}function It(e){const o=e.id,n=e.effectOverride||{},a=[];return n.demandMultiplier!==void 0&&a.push(n.demandMultiplier>.7?"â†‘ GDP recovery":"â†“ GDP contraction"),n.wealthCrashPhase!==void 0&&a.push(n.wealthCrashPhase>.5?"â†— Softer crash":"â†˜ Hard crash"),n.deathRateMultiplier!==void 0&&a.push(n.deathRateMultiplier>2?"â†‘â†‘ Deaths":"â†‘ Fewer deaths"),n.techProductivityMultiplier!==void 0&&(a.push(n.techProductivityMultiplier>1.5?"â†‘ GDP spike":"â†’ Moderate growth"),a.push(n.otherJobsAutomatedRate>.1?"â†“â†“ Jobs lost":"â†“ Some jobs lost")),n.foodSupplyMultiplier!==void 0&&a.push(n.foodPriceMultiplier>1.8?"â†‘â†‘ Food prices":"â†‘ Food prices"),e.govDebtPenalty&&a.push(`â†‘ Debt +${e.govDebtPenalty}`),o==="do_nothing"&&(a.push("â†’ Default market response"),a.push("? Outcome uncertain")),a}function Mt({choice:e,selected:o,onSelect:n}){const a=It(e),i=e.id==="do_nothing";return t.jsx("button",{onClick:()=>n(e.id),className:`w-full text-left p-4 rounded-xl border-2 transition-all ${o?"border-[#6366f1] bg-[#6366f111]":i?"border-[#334155] border-dashed bg-[#12121a] hover:border-[#475569]":"border-[#1e1e2e] bg-[#12121a] hover:border-[#334155] hover:bg-[#1a1a28]"}`,children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("span",{className:"text-2xl flex-shrink-0 mt-0.5",children:e.emoji}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"font-bold text-white text-sm mb-1",children:e.label}),t.jsx("p",{className:"text-[#94a3b8] text-xs leading-relaxed mb-2",children:e.description}),t.jsxs("div",{className:"flex items-start gap-1.5 mb-2",children:[t.jsx("span",{className:"text-[#f59e0b] text-[10px] flex-shrink-0 mt-0.5",children:"âš "}),t.jsx("span",{className:"text-[#f59e0b] text-[10px] leading-relaxed",children:e.tradeoff})]}),a.length>0&&t.jsx("div",{className:"flex flex-wrap gap-1",children:a.map((s,r)=>t.jsx("span",{className:`text-[9px] font-mono px-1.5 py-0.5 rounded ${s.startsWith("â†‘")||s.startsWith("â†—")?"bg-[#22c55e22] text-[#22c55e]":s.startsWith("â†“")||s.startsWith("â†˜")?"bg-[#ef444422] text-[#ef4444]":"bg-[#1e1e2e] text-[#64748b]"}`,children:s},r))})]})]})})}function _t({event:e,onChoose:o}){var u,d;const[n,a]=c.useState(null),[i,s]=c.useState(!1);if(!e)return null;const r=()=>{if(n){if(!i){s(!0);return}o(e.id,n)}},l=(u=e.choices)==null?void 0:u.find(h=>h.id===n);return t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:t.jsxs("div",{className:"bg-[#0d0d14] border border-[#334155] rounded-2xl p-6 max-w-xl w-full mx-4 max-h-[90vh] overflow-y-auto shadow-2xl",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("span",{className:"text-4xl",children:e.icon}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-white font-bold text-lg",children:e.name}),t.jsx("p",{className:"text-[#94a3b8] text-sm",children:e.description})]})]}),t.jsxs("div",{className:"border-t border-[#1e1e2e] pt-4 mb-4",children:[t.jsx("p",{className:"text-[#64748b] text-xs font-mono uppercase tracking-wider mb-3",children:"âš¡ Simulation paused â€” your decision required"}),t.jsx("div",{className:"flex flex-col gap-2",children:(d=e.choices)==null?void 0:d.map(h=>t.jsx(Mt,{choice:h,selected:n===h.id,onSelect:a},h.id))})]}),i&&l&&t.jsxs("div",{className:"mb-4 p-3 bg-[#1e1e2e] rounded-lg border border-[#334155]",children:[t.jsx("div",{className:"text-[#64748b] text-[10px] uppercase tracking-wider font-mono mb-1",children:"ðŸ“š What history did"}),t.jsx("p",{className:"text-[#94a3b8] text-xs leading-relaxed italic",children:l.historicalNote})]}),t.jsx("button",{onClick:r,disabled:!n,className:`w-full py-3 rounded-xl font-mono font-bold text-sm transition-colors ${n?"bg-[#6366f1] hover:bg-[#818cf8] text-white":"bg-[#1e1e2e] text-[#475569] cursor-not-allowed"}`,children:n?i?"â–¶ Apply and continue":"Confirm â€” see what history did â†’":"Select a response"})]})})}const Et={greatDepression:{summary:"The US experienced 10 years of contraction. GDP fell 46% peak-to-trough. Unemployment peaked at 25% in 1933. Deflation wiped out savings.",turningPoint:"FDR's New Deal (1933): bank reform, work programs (CCC, WPA), agricultural relief, and abandoning the gold standard.",whatWorked:"Government spending restarted demand. Banking reform restored confidence. Devaluing the dollar stopped deflation.",whatFailed:"Initial Hoover austerity and Smoot-Hawley tariffs deepened the slump. Balanced-budget orthodoxy was catastrophically wrong.",historicalGrade:"D+",metrics:{gdpChangePercent:-46,peakUnemployment:25,inflationAvg:-6,gini:.63,povertyRate:35,recoveryYears:10},quote:'"The only thing we have to fear is fear itself." â€” FDR, 1933'},weimarHyperinflation:{summary:"Germany printed money to pay WWI reparations. By Nov 1923 a loaf of bread cost 200 billion marks. The middle class was wiped out.",turningPoint:"The Rentenmark (Nov 1923): a new currency backed by land assets, issued by an independent body. Printing stopped cold.",whatWorked:"Completely stopping money creation. Issuing a credible new currency. International loans (Dawes Plan) stabilized reparations.",whatFailed:"There was no painless exit. Savings were permanently destroyed. The political fallout helped fuel the rise of extremism.",historicalGrade:"C",metrics:{gdpChangePercent:-25,peakUnemployment:30,inflationAvg:29500,gini:.7,povertyRate:45,recoveryYears:6},quote:'"Inflation is the most important single factor in the politico-economic history of the Weimar Republic." â€” Adam Fergusson'},stagflation1970s:{summary:"OPEC oil embargo (1973) triggered both high inflation AND high unemployment simultaneously â€” violating Keynesian assumptions.",turningPoint:"Volcker Shock (1979â€“82): Federal Reserve raised rates to 20%, deliberately causing a recession to break inflationary expectations.",whatWorked:"Aggressive interest rate hikes eventually tamed inflation. Supply-side reforms improved productivity.",whatFailed:"Wage-price controls (Nixon 1971) temporarily masked inflation then made it worse. Easy money in the early 70s was a mistake.",historicalGrade:"C+",metrics:{gdpChangePercent:-3,peakUnemployment:13,inflationAvg:11,gini:.4,povertyRate:15,recoveryYears:8},quote:'"Inflation is always and everywhere a monetary phenomenon." â€” Milton Friedman'},crisisOf2008:{summary:"US housing bubble collapsed. Lehman Brothers failed Sep 2008. Global credit froze. Worst recession since the Great Depression.",turningPoint:"TARP bank bailouts ($700B), Fed QE programs ($4T), Obama stimulus ($787B). Slow but sustained recovery 2009â€“2019.",whatWorked:"Massive fiscal stimulus, quantitative easing, and bank recapitalization prevented a second Great Depression.",whatFailed:"Austerity in Europe caused a double-dip recession. Too little debt relief for homeowners prolonged household balance sheet repair.",historicalGrade:"B-",metrics:{gdpChangePercent:-4.3,peakUnemployment:10,inflationAvg:1.5,gini:.47,povertyRate:15,recoveryYears:6},quote:'"We came very close to a complete collapse of the financial system." â€” Ben Bernanke'},japanLostDecade:{summary:"Japan's asset bubble burst in 1991. Despite near-zero rates and stimulus, GDP stagnated for 20+ years. Deflation became entrenched.",turningPoint:"Abenomics (2012): aggressive QE, fiscal stimulus, structural reforms. Partially effective â€” ended deflation but growth remained weak.",whatWorked:"Eventually: currency devaluation, quantitative easing at scale, negative interest rates.",whatFailed:"Years of half-measures and zombie bank forbearance. Failure to force bad debt write-offs kept the economy in stasis.",historicalGrade:"D",metrics:{gdpChangePercent:10,peakUnemployment:5.5,inflationAvg:-.2,gini:.34,povertyRate:16,recoveryYears:20},quote:`"Japan's experience suggests that it's very hard to escape deflation once it becomes entrenched." â€” Ben Bernanke`},nordicMiracle:{summary:"Nordic countries (esp. Sweden 1990s) combined high taxes, strong unions, universal welfare, and open markets into sustained prosperity.",turningPoint:"Sweden's 1990s bank crisis resolution: swift bank nationalization, transparent debt writedowns, then re-privatization. Full recovery in 3 years.",whatWorked:"Universal education and healthcare create a productive workforce. Strong safety nets allow risk-taking. Transparent institutions reduce corruption.",whatFailed:"Model requires high trust, homogeneity, and strong institutions to function. Difficult to replicate in larger, more diverse economies.",historicalGrade:"A",metrics:{gdpChangePercent:35,peakUnemployment:8,inflationAvg:2.1,gini:.27,povertyRate:8,recoveryYears:3},quote:`"The Nordic model is not socialism. It's a highly competitive market economy with strong social insurance." â€” Daron Acemoglu`}};function At(e){return Et[e]||null}const me={"A+":"#22c55e",A:"#22c55e",B:"#84cc16",C:"#eab308",D:"#f97316",F:"#ef4444"};function L({label:e,score:o}){const n=o>=70?"#22c55e":o>=45?"#eab308":"#ef4444";return t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-1 text-xs font-mono",children:[t.jsx("span",{className:"text-[#94a3b8]",children:e}),t.jsxs("span",{style:{color:n},children:[o,"/100"]})]}),t.jsx("div",{className:"w-full bg-[#1e1e2e] rounded-full h-1.5",children:t.jsx("div",{className:"h-1.5 rounded-full transition-all duration-700",style:{width:`${o}%`,backgroundColor:n}})})]})}function Rt({obj:e}){const o=e.completed?"âœ…":e.met?"ðŸ”„":"âŒ",n=e.completed?"#22c55e":e.met?"#f59e0b":"#ef4444";return t.jsxs("div",{className:"flex items-start gap-2 py-1.5 border-b border-[#1e1e2e] last:border-0",children:[t.jsx("span",{className:"text-sm flex-shrink-0 mt-0.5",children:o}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("span",{className:"text-xs font-mono text-[#e2e8f0]",children:[e.icon," ",e.label]}),t.jsx("span",{className:"text-xs font-mono",style:{color:n},children:e.completed?"Done":e.met?"In progress":`${Math.round(e.progress*100)}%`})]}),t.jsx("div",{className:"text-[10px] text-[#475569] mt-0.5",children:e.description})]})]})}function Bt({playerOutcome:e,historicalOutcome:o}){var a;if(!o)return null;const n=[{label:"GDP Change",player:`${e.gdpChangePercent>0?"+":""}${e.gdpChangePercent}%`,history:`${o.metrics.gdpChangePercent}%`,betterIfHigher:!0,playerVal:e.gdpChangePercent,histVal:o.metrics.gdpChangePercent},{label:"Peak Unemployment",player:`${e.peakUnemployment}%`,history:`${o.metrics.peakUnemployment}%`,betterIfHigher:!1,playerVal:e.peakUnemployment,histVal:o.metrics.peakUnemployment},{label:"Avg Inflation",player:`${e.inflationAvg}%`,history:`${o.metrics.inflationAvg}%`,betterIfHigher:null,playerVal:Math.abs(e.inflationAvg),histVal:Math.abs(o.metrics.inflationAvg)},{label:"Gini Coefficient",player:e.gini.toFixed(2),history:o.metrics.gini.toFixed(2),betterIfHigher:!1,playerVal:e.gini,histVal:o.metrics.gini},{label:"Poverty Rate",player:`${e.povertyRate}%`,history:`${o.metrics.povertyRate}%`,betterIfHigher:!1,playerVal:e.povertyRate,histVal:o.metrics.povertyRate}];return t.jsxs("div",{children:[t.jsx("div",{className:"text-[#64748b] text-xs uppercase tracking-wider font-mono mb-3",children:"You vs History"}),t.jsxs("div",{className:"bg-[#0d0d14] rounded-xl overflow-hidden border border-[#1e1e2e]",children:[t.jsxs("div",{className:"grid grid-cols-3 text-[10px] font-mono text-[#475569] px-3 py-1.5 border-b border-[#1e1e2e]",children:[t.jsx("span",{children:"Metric"}),t.jsx("span",{className:"text-center text-[#6366f1]",children:"You"}),t.jsx("span",{className:"text-center",children:"History"})]}),n.map(i=>{let s="#e2e8f0";return i.betterIfHigher===!0?s=i.playerVal>=i.histVal?"#22c55e":"#ef4444":i.betterIfHigher===!1&&(s=i.playerVal<=i.histVal?"#22c55e":"#ef4444"),t.jsxs("div",{className:"grid grid-cols-3 px-3 py-1.5 text-xs font-mono border-b border-[#0a0a0f] last:border-0",children:[t.jsx("span",{className:"text-[#64748b]",children:i.label}),t.jsx("span",{className:"text-center font-bold",style:{color:s},children:i.player}),t.jsx("span",{className:"text-center text-[#475569]",children:i.history})]},i.label)})]}),t.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs font-mono text-[#475569] px-1",children:[t.jsxs("span",{children:["History's grade: ",t.jsx("span",{style:{color:me[o.historicalGrade]||"#94a3b8"},className:"font-bold",children:o.historicalGrade})]}),t.jsxs("span",{className:"text-[10px] italic",children:['"',(a=o.quote)==null?void 0:a.slice(0,50),'â€¦"']})]})]})}function Wt({report:e,onRetry:o,onNextScenario:n}){var r;if(!e)return null;const a=At(e.scenarioId),i=me[e.grade]||"#94a3b8",s=a&&e.finalScore>({"A+":95,A:85,B:70,C:55,D:40,F:20}[a.historicalGrade]||50);return t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/85 backdrop-blur-sm",children:t.jsxs("div",{className:"bg-[#0d0d14] border border-[#1e1e2e] rounded-2xl p-6 max-w-lg w-full mx-4 max-h-[92vh] overflow-y-auto shadow-2xl",children:[t.jsxs("div",{className:"text-center mb-5",children:[t.jsx("div",{className:"text-6xl font-bold font-mono mb-1",style:{color:i},children:e.grade}),t.jsx("div",{className:"text-white font-bold text-lg",children:e.scenarioName}),t.jsxs("div",{className:"text-[#64748b] text-sm",children:["Year ",e.year," Â· Score ",e.finalScore,"/100"]}),s&&t.jsx("div",{className:"mt-2 text-[#22c55e] text-sm font-mono",children:"ðŸ† You did better than history!"})]}),t.jsxs("div",{className:"bg-[#12121a] rounded-xl p-4 mb-4 flex flex-col gap-2.5",children:[t.jsx(L,{label:"Equality",score:e.domains.equality.score}),t.jsx(L,{label:"Growth",score:e.domains.growth.score}),t.jsx(L,{label:"Stability",score:e.domains.stability.score})]}),((r=e.objectives)==null?void 0:r.length)>0&&t.jsxs("div",{className:"bg-[#12121a] rounded-xl p-4 mb-4",children:[t.jsx("div",{className:"text-[#64748b] text-xs uppercase tracking-wider font-mono mb-2",children:"Objectives"}),e.objectives.map(l=>t.jsx(Rt,{obj:l},l.id))]}),a&&t.jsxs("div",{className:"bg-[#12121a] rounded-xl p-4 mb-4",children:[t.jsx(Bt,{playerOutcome:e.playerOutcome,historicalOutcome:a}),t.jsxs("div",{className:"mt-3 border-t border-[#1e1e2e] pt-3",children:[t.jsx("div",{className:"text-[10px] text-[#475569] font-mono uppercase tracking-wider mb-1",children:"What worked in history"}),t.jsx("p",{className:"text-[#64748b] text-xs leading-relaxed",children:a.whatWorked})]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:o,className:"flex-1 py-3 rounded-xl border border-[#1e1e2e] text-[#94a3b8] hover:border-[#6366f1] hover:text-[#6366f1] font-mono text-sm transition-colors",children:"â†º Try Again"}),t.jsx("button",{onClick:n,className:"flex-1 py-3 rounded-xl bg-[#6366f1] hover:bg-[#818cf8] text-white font-mono font-bold text-sm transition-colors",children:"Next Challenge â†’"})]})]})})}function Ft(e,o){const n={incomeTax:[0,.6],corporateTax:[0,.5],minWage:[0,50],ubi:[0,1e3],interestRate:[0,.2],educationFunding:[0,1],unemploymentBenefit:[0,500],printMoney:[0,100],wealthTax:[0,.05],robotTax:[0,.5],mandatoryProfitShare:[0,.3],landValueTax:[0,.05],helicopterMoney:[0,500],maximumWage:[0,500],wealthConfiscation:[0,.5],punitiveTargiffs:[0,2]};if(e in n){const[a,i]=n[e];return ze(Number(o),a,i)}return o}const pe="ecomsim_save";function Dt(e){try{localStorage.setItem(pe+"_scenario",e)}catch{}}function Ht(){try{return localStorage.getItem(pe+"_scenario")||"freeMarket"}catch{return"freeMarket"}}const Lt="modulepreload",$t=function(e){return"/ecomsim/"+e},le={},Gt=function(o,n,a){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),l=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));i=Promise.allSettled(n.map(u=>{if(u=$t(u),u in le)return;le[u]=!0;const d=u.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":Lt,d||(m.as="script"),m.crossOrigin="",m.href=u,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((g,f)=>{m.addEventListener("load",g),m.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(r){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=r,window.dispatchEvent(l),!l.defaultPrevented)throw r}return i.then(r=>{for(const l of r||[])l.status==="rejected"&&s(l.reason);return o().catch(s)})};let I=null,F=!1,$=[],G=null;const zt="af_sky",Ot="onnx-community/Kokoro-82M-v1.0-ONNX",M={monopoly_forming:"Warning. One company now dominates the market. Without competition, prices are rising and innovation is slowing.",high_inequality:"Inequality has reached extreme levels. The Gini coefficient indicates the top few now own most of the wealth.",high_unemployment:"Mass unemployment is spreading. A vicious cycle: fewer workers means less spending, which means even more layoffs.",inflation_spiral:"Inflation warning. Prices are rising faster than wages. Your population's purchasing power is eroding.",min_wage_tradeoff:"Minimum wage tradeoff observed. Living standards improved, but some small businesses can no longer afford to hire.",budget_surplus:"Fiscal surplus achieved. Tax revenue now exceeds government spending.",stagnation:"Stagflation risk. The economy is shrinking while unemployment rises â€” the classic policy dilemma.",poverty_trap:"Poverty trap forming. Workers in poverty cannot afford education or healthcare, keeping them trapped.",ubi_effect:"Universal Basic Income is reducing poverty. Some residents are using the security to start new businesses.",policy_fourDayWeek_on:"The four-day work week is now law. Workers rejoice. Friday afternoons are sacred. Economists nervously check productivity spreadsheets.",policy_fourDayWeek_off:"The four-day work week has been repealed. Monday through Friday, back to the grind.",policy_robotTax_on:"A robot tax has been introduced. For every job automated away, the tech sector must pay. Silicon Valley is not pleased.",policy_breadAndCircuses_on:"Bread and circuses for all! The government is handing out free food and entertainment. Unrest is falling. Economists are horrified.",policy_breadAndCircuses_off:"The bread and circuses program has ended. Let's see how long the calm lasts.",policy_mandatoryProfitShare_on:"Mandatory profit sharing is now law. Businesses must distribute a cut of profits to every worker. Workers approve. Shareholders do not.",policy_mandatoryProfitShare_off:"Mandatory profit sharing repealed. The windfall stays with the owners again.",policy_landValueTax_on:"A land value tax has been enacted. Henry George would be proud. Landowners are furious. Economists say this is actually the most efficient tax possible.",policy_banAdvertising_on:"Advertising is banned. No more billboards, no more commercials, no more targeted manipulation. The luxury sector is experiencing an identity crisis.",policy_banAdvertising_off:"The advertising ban is lifted. The bombardment of commercial messages resumes immediately.",policy_debtJubilee_on:"DEBT JUBILEE! All debts are cancelled â€” right now, this instant. It is a Biblical reset. The slate is wiped clean. This happens only once.",policy_lotteryRedistribution_on:"The wealth lottery is running. Random rich citizens are paying a luck tax directly to random poor ones. It's chaotic. It's arbitrary. It's weirdly effective.",policy_lotteryRedistribution_off:"The wealth lottery has ended. The rich breathe a sigh of relief.",policy_sumptuary_on:"Sumptuary laws are in effect. The wealthy may no longer spend freely on luxury goods. Medieval rulers used this to maintain social order. It also destroyed the luxury economy.",policy_sumptuary_off:"Sumptuary laws repealed. The luxury market roars back to life.",policy_degrowth_on:"Degrowth policy enacted. The government has officially stopped chasing GDP growth. Economists are having a meltdown. Everyone else is working less and feeling healthier.",policy_degrowth_off:"Degrowth policy abandoned. Back to the infinite growth imperative.",policy_algoCentralPlanning_on:"Algorithmic central planning is online. An AI now sets all prices. The market volatility disappears. So does the spontaneous order. It is efficient. It is cold. It is watching.",policy_algoCentralPlanning_off:"The algorithm has been shut down. Prices will now rediscover chaos on their own.",policy_universalBankAccount_on:"Universal bank accounts issued to every citizen. No one is unbanked. The poorest residents finally have somewhere safe to store their savings.",policy_universalBankAccount_off:"Universal bank accounts discontinued. Financial exclusion returns for the poorest citizens.",policy_helicopterMoney_on:"Helicopter money is airborne. Cash is literally raining from the sky. Every citizen is richer â€” briefly. Inflation is watching from below, grinning.",policy_helicopterMoney_off:"The helicopter has landed. The free money spigot is closed. Prices remain elevated.",policy_maximumWage_on:"A maximum wage is now law. No one earns above the cap. Executives are furious. Economists are concerned about brain drain. The people are delighted.",policy_maximumWage_off:"Maximum wage repealed. Compensation limits removed. The talent exodus risk is over.",policy_wealthConfiscation_on:"Wealth confiscation is in effect. Government agents are seizing assets above the threshold. The rich are moving money offshore as fast as they can.",policy_wealthConfiscation_off:"Wealth confiscation has ended. Assets are safe again â€” for now.",policy_nationalizeIndustries_on:"All industries are now nationalized. The government owns the means of production. Five-year plans are being drafted. Entrepreneurs are unemployed. Productivity is in freefall.",policy_nationalizeIndustries_off:"Privatization has begun. Industries are returning to private hands. Markets are chaotic but slowly returning to life.",policy_punitiveTargiffs_on:"Punitive tariffs are in place. All goods are now more expensive. This is to protect the economy, apparently. Consumers are paying the price â€” literally.",policy_punitiveTargiffs_off:"Tariffs removed. Trade barriers down. Prices begin to normalize.",policy_guaranteedJobs_on:"A guaranteed jobs program is active. Every unemployed citizen now works for the government. Unemployment is officially zero. The budget is officially catastrophic.",policy_guaranteedJobs_off:"Guaranteed jobs program ended. Government workers are being released back to the private market.",pandemic:"A pandemic has struck. Health is dropping, businesses are closing, and workers are staying home.",cropFailure:"Crop failure. Poor harvests are causing food prices to spike. The poorest citizens are suffering most.",techBreakthrough:"Technology breakthrough! Productivity in the tech sector has doubled â€” but automation is threatening other jobs.",financialBubble:"A financial bubble is growing. Asset prices are inflating rapidly â€” and history suggests what comes next.",corruption:"Corruption scandal. Government tax revenue is being diverted. Public services are beginning to collapse.",immigrationWave:"An immigration wave has arrived. Skilled workers are boosting productivity, but job competition is increasing.",recession:"Recession begins. Consumer demand is falling, businesses are struggling, and unemployment is rising.",boom:"Economic boom! Consumer confidence has surged. Businesses are hiring and wages are growing.",hyperinflation:"Hyperinflation. Prices are doubling faster than wages can keep up. The currency is becoming worthless. Wheelbarrows of cash are not yet required â€” but give it time.",generalStrike:"General strike! Workers across every sector have walked off the job. Production has stopped. The economy is frozen. History will judge what you do next.",bankRun:"Bank run! Panic is spreading. Citizens are lining up to withdraw everything. The financial system has hours before it collapses. Decide fast.",brainDrain:"Brain drain underway. Your most skilled citizens are packing their bags. Once expertise leaves, it rarely comes back. The productivity gap will compound for decades."};async function ge(){if(I)return I;if(F)return new Promise(e=>$.push(e));F=!0;try{const{KokoroTTS:e}=await Gt(async()=>{const{KokoroTTS:o}=await import("./kokoro-CqRZUw5m.js");return{KokoroTTS:o}},[]);return I=await e.from_pretrained(Ot,{dtype:"q4",device:"wasm"}),$.forEach(o=>o(I)),$=[],F=!1,I}catch(e){return console.warn("[Narrator] Failed to load Kokoro TTS:",e),F=!1,null}}function Ut(){return G||(G=new(window.AudioContext||window.webkitAudioContext)),G}let B=null;async function _(e,o={}){if(e){be();try{const n=await ge();if(!n)return;const a=await n.generate(e,{voice:o.voice||zt}),i=Ut(),s=i.createBuffer(1,a.audio.length,a.sampling_rate);s.copyToChannel(a.audio,0);const r=i.createBufferSource();return r.buffer=s,o.rate&&(r.playbackRate.value=o.rate),r.connect(i.destination),r.start(),B=r,new Promise(l=>{r.onended=()=>{B=null,l()}})}catch(n){console.warn("[Narrator] Narration error:",n)}}}function be(){if(B){try{B.stop()}catch{}B=null}}function qt(e){const o=M[e];o&&_(o)}function Yt(e){const o=M[e];o&&_(o)}function Vt(e,o){const n=`policy_${e}_on`,a=`policy_${e}_off`;if(o===!0||o===!1){const i=o?M[n]:M[a];i&&_(i);return}o>0&&M[n]&&_(M[n])}function Kt(){ge()}function Jt(){return I!==null}function Xt(){const[e,o]=c.useState(!1),[n,a]=c.useState(!1),[i,s]=c.useState(!1),r=c.useRef(!1),l=c.useCallback(async()=>{o(!0),r.current=!0,a(!0),Kt();const f=setInterval(()=>{Jt()&&(s(!0),a(!1),clearInterval(f),_("Economy simulator narrator ready."))},500);setTimeout(()=>clearInterval(f),3e4)},[]),u=c.useCallback(()=>{o(!1),r.current=!1,be()},[]),d=c.useCallback(f=>{r.current&&qt(f)},[]),h=c.useCallback(f=>{r.current&&Yt(f)},[]),m=c.useCallback(f=>{r.current&&_(f)},[]),g=c.useCallback((f,x)=>{r.current&&Vt(f,x)},[]);return{enabled:e,loading:n,ready:i,enable:l,disable:u,onInsight:d,onEvent:h,speak:m,onPolicy:g}}const ce=["dashboard","objectives","policies","histogram"];function Zt(){var J,X;const e=Xt(),o=c.useRef(null),[n,a]=c.useState(null),[i,s]=c.useState(!1),[r,l]=c.useState(5),[u,d]=c.useState(Ht()),[h,m]=c.useState(!1),[g,f]=c.useState(null),[x,v]=c.useState(null),[b,w]=c.useState("dashboard"),[j,S]=c.useState(null),[Y,E]=c.useState(null);c.useEffect(()=>{const p=new Worker(new URL("/ecomsim/assets/simWorker-CIVaesr3.js",import.meta.url),{type:"module"});return p.addEventListener("message",k=>{const{type:A,state:P,event:W,insight:Z,report:Pe}=k.data;switch(A){case"STATE_UPDATE":a(P);break;case"EVENT":e.onEvent(W==null?void 0:W.type);break;case"CHOICE_REQUIRED":S(W),s(!0);break;case"INSIGHT":f(Z),e.onInsight(Z.id);break;case"SCENARIO_COMPLETE":E(Pe),s(!0);break}}),p.postMessage({type:"INIT",scenarioId:u}),o.current=p,()=>p.terminate()},[]);const y=c.useCallback(p=>{var k;(k=o.current)==null||k.postMessage(p)},[]),xe=c.useCallback(()=>{s(!0),y({type:"PAUSE"})},[y]),ye=c.useCallback(()=>{s(!1),y({type:"RESUME"})},[y]),H=c.useCallback(()=>{a(null),f(null),v(null),S(null),E(null),y({type:"RESET",scenarioId:u}),s(!1)},[y,u]),ve=c.useCallback(p=>{l(p),y({type:"SET_SPEED",speed:p})},[y]),we=c.useCallback((p,k)=>{const A=Ft(p,k);y({type:"SET_POLICY",policy:p,value:A}),a(P=>P&&{...P,policies:{...P.policies,[p]:A}}),e.onPolicy(p,A)},[y,e]),ke=c.useCallback(p=>{var k;d(p),Dt(p),a(null),f(null),v(null),S(null),E(null),y({type:"RESET",scenarioId:p}),s(!1),(k=U[p])!=null&&k.isHistorical&&w("objectives")},[y]),je=c.useCallback(()=>{y({type:"SET_POLICY",policy:"_forceShock",value:!0})},[y]),Ne=c.useCallback((p,k)=>{S(null),y({type:"RESOLVE_CHOICE",eventId:p,choiceId:k}),s(!1)},[y]),Ce=c.useCallback(()=>{E(null),H()},[H]),Te=c.useCallback(()=>{E(null),m(!0)},[]),V=((J=U[u])==null?void 0:J.name)||"Free Market",K=((X=n==null?void 0:n.objectives)==null?void 0:X.length)>0,Se=K?ce:ce.filter(p=>p!=="objectives");return t.jsxs("div",{className:"h-screen flex flex-col bg-[#0a0a0f] text-[#e2e8f0] overflow-hidden font-mono",children:[t.jsx(pt,{paused:i,speed:r,onPause:xe,onResume:ye,onReset:H,onSpeedChange:ve,onScenarioOpen:()=>m(!0),onShockMe:je,scenarioName:V,year:n==null?void 0:n.year,narratorEnabled:e.enabled,narratorLoading:e.loading,onNarratorToggle:e.enabled?e.disable:e.enable}),t.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[t.jsxs("div",{className:"flex-1 relative bg-[#0a0a0f]",children:[t.jsx(it,{simState:n,onAgentClick:v,selectedAgentId:x==null?void 0:x.id}),x&&t.jsx(Nt,{agent:x,onClose:()=>v(null)})]}),t.jsxs("div",{className:"w-72 flex flex-col border-l border-[#1e1e2e] bg-[#0a0a0f]",children:[t.jsx("div",{className:"flex border-b border-[#1e1e2e]",children:Se.map(p=>t.jsx("button",{onClick:()=>w(p),className:`flex-1 py-2 text-xs font-mono capitalize transition-colors ${b===p?"text-[#6366f1] border-b border-[#6366f1]":"text-[#475569] hover:text-[#94a3b8]"}`,children:p==="objectives"&&K?`ðŸŽ¯ ${n.objectives.filter(k=>k.completed).length}/${n.objectives.length}`:p},p))}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-3",children:[b==="dashboard"&&t.jsx(lt,{metrics:n==null?void 0:n.metrics,market:n==null?void 0:n.market,activeEvents:n==null?void 0:n.activeEvents}),b==="objectives"&&t.jsx(Pt,{objectives:n==null?void 0:n.objectives,scenarioDurationYears:n==null?void 0:n.scenarioDurationYears,year:n==null?void 0:n.year,scenarioName:V}),b==="policies"&&t.jsx(ht,{policies:n==null?void 0:n.policies,onPolicyChange:we}),b==="histogram"&&t.jsx(St,{agents:n==null?void 0:n.agents})]})]})]}),g&&t.jsx(wt,{insight:g,onDismiss:()=>f(null)}),j&&t.jsx(_t,{event:j,onChoose:Ne}),Y&&t.jsx(Wt,{report:Y,onRetry:Ce,onNextScenario:Te}),h&&t.jsx(yt,{current:u,onSelect:ke,onClose:()=>m(!1)})]})}O.createRoot(document.getElementById("root")).render(t.jsx(We.StrictMode,{children:t.jsx(Zt,{})}));

import{r as c,a as qe,R as N,A as U,b as q,B as Ce,X as S,Y as T,T as M,c as Se,C as ue,L as X,d as E,e as A,f as G,S as Ke,g as Ye,h as Ve}from"./charts-CV9kRm1S.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function o(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(s){if(s.ep)return;s.ep=!0;const i=o(s);fetch(s.href,i)}})();var Te={exports:{}},ae={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Je=c,Xe=Symbol.for("react.element"),Ze=Symbol.for("react.fragment"),Qe=Object.prototype.hasOwnProperty,et=Je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tt={key:!0,ref:!0,__self:!0,__source:!0};function Me(e,n,o){var a,s={},i=null,r=null;o!==void 0&&(i=""+o),n.key!==void 0&&(i=""+n.key),n.ref!==void 0&&(r=n.ref);for(a in n)Qe.call(n,a)&&!tt.hasOwnProperty(a)&&(s[a]=n[a]);if(e&&e.defaultProps)for(a in n=e.defaultProps,n)s[a]===void 0&&(s[a]=n[a]);return{$$typeof:Xe,type:e,key:i,ref:r,props:s,_owner:et.current}}ae.Fragment=Ze;ae.jsx=Me;ae.jsxs=Me;Te.exports=ae;var t=Te.exports,ce={},be=qe;ce.createRoot=be.createRoot,ce.hydrateRoot=be.hydrateRoot;function ot(e,n,o){return Math.max(n,Math.min(o,e))}function nt(e,n=20){if(!e||e.length===0)return[];const o=[...e].sort((i,r)=>i-r),a=o.reduce((i,r)=>i+r,0);if(a===0)return[];const s=[{population:0,wealth:0}];for(let i=1;i<=n;i++){const r=Math.floor(i/n*o.length),l=o.slice(0,r).reduce((u,d)=>u+d,0);s.push({population:i/n*100,wealth:l/a*100})}return s}const D=[{threshold:0,color:[220,38,38]},{threshold:100,color:[234,88,12]},{threshold:300,color:[100,116,139]},{threshold:800,color:[59,130,246]},{threshold:2e3,color:[6,182,212]},{threshold:5e3,color:[234,179,8]},{threshold:1e4,color:[251,191,36]}];function Pe(e){const n=Math.max(0,e);let o=D[0],a=D[D.length-1];for(let d=0;d<D.length-1;d++)if(n>=D[d].threshold&&n<D[d+1].threshold){o=D[d],a=D[d+1];break}const s=a.threshold-o.threshold,i=s>0?(n-o.threshold)/s:1,r=Math.round(o.color[0]+(a.color[0]-o.color[0])*i),l=Math.round(o.color[1]+(a.color[1]-o.color[1])*i),u=Math.round(o.color[2]+(a.color[2]-o.color[2])*i);return`rgb(${r},${l},${u})`}const fe={food:"#22c55e",housing:"#f59e0b",tech:"#6366f1",luxury:"#ec4899"},at=800,st=600,it=4;function rt(e,n,o,a){for(const s of n)s.alive&&lt(e,s,s.id===o,a)}function lt(e,n,o,a){const{x:s,y:i,state:r,wealth:l,happiness:u,unrest:d,employed:h,isOwner:m,age:x}=n,f=it;e.save(),d>.5?(e.shadowColor="rgba(239,68,68,0.7)",e.shadowBlur=8):l>5e3&&(e.shadowColor="rgba(251,191,36,0.5)",e.shadowBlur=6);const p=Pe(l);if(e.beginPath(),m||r==="owner"?(e.moveTo(s,i-f*1.4),e.lineTo(s+f*1,i),e.lineTo(s,i+f*1.4),e.lineTo(s-f*1,i),e.closePath()):r==="child"||x<18*52?e.arc(s,i,f*.65,0,Math.PI*2):r==="retired"?e.rect(s-f*.9,i-f*.9,f*1.8,f*1.8):e.arc(s,i,f,0,Math.PI*2),e.fillStyle=p,e.fill(),r==="unemployed"?(e.strokeStyle="#ef4444",e.lineWidth=1.5,e.setLineDash([2,2]),e.stroke(),e.setLineDash([])):(h||m)&&(e.strokeStyle="rgba(255,255,255,0.6)",e.lineWidth=1,e.stroke()),l<100&&r!=="child"){const w=.3+.3*Math.sin(a*.1);e.strokeStyle=`rgba(239,68,68,${w})`,e.lineWidth=2,e.setLineDash([]),e.beginPath(),e.arc(s,i,f+3,0,Math.PI*2),e.stroke()}o&&(e.strokeStyle="#ffffff",e.lineWidth=2,e.setLineDash([]),e.beginPath(),e.arc(s,i,f+4,0,Math.PI*2),e.stroke()),e.restore()}function ct(e,n,o,a=.12){e.save(),e.lineWidth=.5;for(const s of n){if(!s.alive||!s.employed||!s.employerId)continue;const i=o.find(r=>r.id===s.employerId);i&&(e.beginPath(),e.strokeStyle=`rgba(99,102,241,${a})`,e.moveTo(s.x,s.y),e.lineTo(i.x,i.y),e.stroke())}e.restore()}function dt(e,n,o){for(const a of n)a.alive&&ut(e,a,o)}function ut(e,n,o){const{x:a,y:s,sector:i,employeeCount:r,radius:l,pulse:u,dominance:d,capital:h}=n,m=fe[i]||"#94a3b8";e.save(),d>.4?(e.shadowColor=m,e.shadowBlur=15+d*20):h>2e3&&(e.shadowColor=m,e.shadowBlur=8);const x=l||10;if(e.beginPath(),ye(e,a,s,x),e.fillStyle=m+"33",e.fill(),e.strokeStyle=m,e.lineWidth=2,e.stroke(),e.fillStyle=m,e.font=`${Math.max(8,x*.8)}px sans-serif`,e.textAlign="center",e.textBaseline="middle",e.fillText(ft[i]||"?",a,s),r>0&&(e.fillStyle="rgba(0,0,0,0.7)",e.beginPath(),e.arc(a+x*.8,s-x*.8,6,0,Math.PI*2),e.fill(),e.fillStyle="#ffffff",e.font="7px sans-serif",e.fillText(r,a+x*.8,s-x*.8)),h<100){const f=.4+.4*Math.sin(o*.15);e.strokeStyle=`rgba(239,68,68,${f})`,e.lineWidth=2,e.beginPath(),ye(e,a,s,x+4),e.stroke()}e.restore()}function ye(e,n,o,a){e.beginPath();for(let s=0;s<6;s++){const i=Math.PI/3*s-Math.PI/6,r=n+a*Math.cos(i),l=o+a*Math.sin(i);s===0?e.moveTo(r,l):e.lineTo(r,l)}e.closePath()}const ft={food:"ðŸŒ¾",housing:"ðŸ ",tech:"ðŸ’»",luxury:"ðŸ’Ž"};function ht(e,n,o,a){e.save();for(const s of n){if(!s.alive)continue;const i=fe[s.sector]||"#94a3b8",r=30+s.employeeCount*5,l=e.createRadialGradient(s.x,s.y,0,s.x,s.y,r);l.addColorStop(0,i+"15"),l.addColorStop(1,"transparent"),e.fillStyle=l,e.beginPath(),e.arc(s.x,s.y,r,0,Math.PI*2),e.fill()}e.restore()}const V=[];function pt(e,n){for(let o=0;o<6;o++){const a=Math.PI*2/6*o;V.push({type:"sparkle",x:e,y:n,vx:Math.cos(a)*2,vy:Math.sin(a)*2,life:1,color:"#22c55e",size:3})}}function mt(e,n){for(let o=0;o<8;o++){const a=Math.random()*Math.PI*2;V.push({type:"fade",x:e+(Math.random()-.5)*10,y:n+(Math.random()-.5)*10,vx:Math.cos(a)*1.5,vy:Math.sin(a)*1.5,life:1,color:"#ef4444",size:2})}}function xt(e){for(let n=V.length-1;n>=0;n--){const o=V[n];switch(e.save(),e.globalAlpha=o.life,o.type){case"sparkle":e.fillStyle=o.color,e.beginPath(),e.arc(o.x,o.y,o.size*o.life,0,Math.PI*2),e.fill(),o.x+=o.vx,o.y+=o.vy,o.vx*=.95,o.vy*=.95,o.life-=.04;break;case"fade":e.fillStyle=o.color,e.beginPath(),e.arc(o.x,o.y,o.size,0,Math.PI*2),e.fill(),o.x+=o.vx,o.y+=o.vy,o.life-=.06;break;case"wave":e.strokeStyle=o.color,e.lineWidth=1.5,e.beginPath(),e.arc(o.x,o.y,o.radius,0,Math.PI*2),e.stroke(),o.radius=o.radius+(o.maxRadius-o.radius)*.08,o.life-=.03;break}e.restore(),o.life<=0&&V.splice(n,1)}}function gt({simState:e,onAgentClick:n,selectedAgentId:o}){const a=c.useRef(null),s=c.useRef(null),i=c.useRef(0),r=c.useRef(new Set),l=c.useCallback(()=>{const d=a.current;if(!d)return;const h=d.getContext("2d");i.current++;const m=i.current;if(h.fillStyle="#0a0a0f",h.fillRect(0,0,d.width,d.height),!e){h.fillStyle="#334155",h.font="14px monospace",h.textAlign="center",h.fillText("Initializing simulation...",d.width/2,d.height/2);return}const{agents:x=[],businesses:f=[]}=e,p=new Set(x.filter(b=>b.alive).map(b=>b.id)),w=r.current;for(const b of w)if(!p.has(b)){const y=x.find(k=>k.id===b);y&&mt(y.x,y.y)}for(const b of p)if(!w.has(b)){const y=x.find(k=>k.id===b);y&&pt(y.x,y.y)}r.current=p,ht(h,f,d.width,d.height),ct(h,x,f),dt(h,f,m),rt(h,x,o,m),xt(h),s.current=requestAnimationFrame(l)},[e,o]);c.useEffect(()=>(s.current=requestAnimationFrame(l),()=>{s.current&&cancelAnimationFrame(s.current)}),[l]);const u=c.useCallback(d=>{if(!(e!=null&&e.agents)||!n)return;const h=a.current,m=h.getBoundingClientRect(),x=h.width/m.width,f=h.height/m.height,p=(d.clientX-m.left)*x,w=(d.clientY-m.top)*f;let b=null,y=12;for(const k of e.agents){if(!k.alive)continue;const _=Math.sqrt((k.x-p)**2+(k.y-w)**2);_<y&&(y=_,b=k)}n(b)},[e,n]);return t.jsx("canvas",{ref:a,width:at,height:st,className:"w-full h-full cursor-crosshair",style:{imageRendering:"pixelated",display:"block"},onClick:u})}function W({label:e,value:n,unit:o="",trend:a,color:s="#6366f1",history:i=[],format:r="number"}){const l=c.useMemo(()=>r==="percent"?(n*100).toFixed(1)+"%":r==="currency"?"$"+ve(n):r==="index"?n.toFixed(1):ve(n),[n,r]),u=i.slice(-40).map((d,h)=>({i:h,v:d}));return t.jsxs("div",{className:"bg-[#12121a] border border-[#1e1e2e] rounded-lg p-3 flex flex-col gap-1",children:[t.jsx("div",{className:"text-[#64748b] text-xs uppercase tracking-wider font-mono",children:e}),t.jsxs("div",{className:"flex items-end gap-2",children:[t.jsx("span",{className:"text-white text-xl font-bold font-mono",style:{color:s},children:l}),o&&t.jsx("span",{className:"text-[#64748b] text-xs mb-1",children:o}),a!==void 0&&t.jsxs("span",{className:`text-xs mb-1 ${a>=0?"text-green-400":"text-red-400"}`,children:[a>=0?"â†‘":"â†“"," ",Math.abs(a*100).toFixed(1),"%"]})]}),u.length>5&&t.jsx("div",{className:"h-8 w-full",children:t.jsx(N,{width:"100%",height:"100%",children:t.jsx(U,{data:u,margin:{top:0,right:0,bottom:0,left:0},children:t.jsx(q,{type:"monotone",dataKey:"v",stroke:s,fill:s+"22",strokeWidth:1,dot:!1,isAnimationActive:!1})})})})]})}function bt({prices:e,supply:n,demand:o}){return t.jsxs("div",{className:"bg-[#12121a] border border-[#1e1e2e] rounded-lg p-3",children:[t.jsx("div",{className:"text-[#64748b] text-xs uppercase tracking-wider font-mono mb-2",children:"Market Prices"}),t.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:Object.entries(e||{}).map(([a,s])=>{const i=(n==null?void 0:n[a])||0,r=(o==null?void 0:o[a])||0,l=r>i?"text-red-400":"text-green-400",u=r>i?"â†‘":"â†“";return t.jsxs("div",{className:"flex justify-between items-center text-xs",children:[t.jsx("span",{style:{color:fe[a]},className:"font-mono capitalize",children:a}),t.jsxs("span",{className:`font-mono font-bold ${l}`,children:["$",s.toFixed(1)," ",u]})]},a)})})]})}function yt({value:e}){const n=(e*100).toFixed(1),o=e>.5?"#ef4444":e>.35?"#f59e0b":"#22c55e";return t.jsxs("div",{className:"bg-[#12121a] border border-[#1e1e2e] rounded-lg p-3",children:[t.jsxs("div",{className:"text-[#64748b] text-xs uppercase tracking-wider font-mono mb-2",children:["Inequality (Gini) â€” ",n]}),t.jsx("div",{className:"w-full bg-[#1e1e2e] rounded-full h-2 mb-1",children:t.jsx("div",{className:"h-2 rounded-full transition-all duration-500",style:{width:`${Math.min(100,e*100)}%`,backgroundColor:o}})}),t.jsxs("div",{className:"flex justify-between text-[10px] text-[#475569]",children:[t.jsx("span",{children:"Perfect Equality (0)"}),t.jsx("span",{children:"Total Inequality (1)"})]})]})}function vt({event:e}){return t.jsxs("div",{className:"bg-[#1e1e2e] border border-[#334155] rounded px-2 py-1 text-xs flex items-center gap-1",children:[t.jsx("span",{children:e.icon}),t.jsx("span",{className:"text-[#e2e8f0] font-mono",children:e.name})]})}function wt({metrics:e,market:n,activeEvents:o=[]}){if(!e)return t.jsx("div",{className:"text-[#475569] text-sm font-mono p-4",children:"Loading metrics..."});const{history:a={}}=e;return t.jsxs("div",{className:"flex flex-col gap-2 overflow-y-auto h-full",children:[o.length>0&&t.jsx("div",{className:"flex flex-wrap gap-1 px-1",children:o.map(s=>t.jsx(vt,{event:s},s.id))}),t.jsxs("div",{className:"text-[#475569] text-xs font-mono px-1",children:["Year ",e.year," Â· Tick ",e.tick," Â· Pop ",e.population]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx(W,{label:"GDP",value:e.gdp,format:"currency",trend:e.gdpGrowth,color:"#6366f1",history:a.gdp||[]}),t.jsx(W,{label:"Unemployment",value:e.unemployment,format:"percent",color:e.unemployment>.15?"#ef4444":"#22c55e",history:a.unemployment||[]}),t.jsx(W,{label:"Inflation (CPI)",value:e.cpi,format:"index",color:e.cpi>120?"#f97316":"#e2e8f0",history:a.cpi||[]}),t.jsx(W,{label:"Avg Wage",value:e.avgWage,format:"currency",color:"#06b6d4"})]}),t.jsx(yt,{value:e.gini}),t.jsx(bt,{prices:n==null?void 0:n.prices,supply:n==null?void 0:n.supply,demand:n==null?void 0:n.demand}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx(W,{label:"Poverty Rate",value:e.povertyRate,format:"percent",color:e.povertyRate>.25?"#ef4444":"#94a3b8"}),t.jsx(W,{label:"Social Unrest",value:e.socialUnrest,format:"percent",color:e.socialUnrest>.5?"#ef4444":"#94a3b8",history:a.unrest||[]}),t.jsx(W,{label:"Businesses",value:e.businessCount,color:"#f59e0b"}),t.jsx(W,{label:"Gov Debt",value:Math.abs(e.govDebt||0),format:"currency",color:(e.govDebt||0)>1e3?"#ef4444":"#64748b"})]})]})}function ve(e){return e==null||isNaN(e)?"0":Math.abs(e)>=1e9?(e/1e9).toFixed(1)+"B":Math.abs(e)>=1e6?(e/1e6).toFixed(1)+"M":Math.abs(e)>=1e3?(e/1e3).toFixed(1)+"K":Math.round(e).toString()}const jt=[{id:"incomeTax",name:"Income Tax",category:"fiscal",type:"slider",min:0,max:.6,step:.01,format:"percent",icon:"ðŸ›ï¸",description:"Tax on worker wages. Funds public spending. Too high reduces work incentive.",tradeoff:"â†‘ Revenue but â†“ Worker take-home pay"},{id:"corporateTax",name:"Corporate Tax",category:"fiscal",type:"slider",min:0,max:.5,step:.01,format:"percent",icon:"ðŸ¢",description:"Tax on business profits. High rates may deter investment.",tradeoff:"â†‘ Revenue but â†“ Business investment"},{id:"minWage",name:"Minimum Wage",category:"labor",type:"slider",min:0,max:30,step:1,format:"currency",icon:"ðŸ’¼",description:"Floor on wages. Protects workers but may price out low-skill labor.",tradeoff:"â†‘ Worker wages but â†‘ Unemployment risk"},{id:"ubi",name:"Universal Basic Income",category:"welfare",type:"slider",min:0,max:500,step:10,format:"currency",icon:"ðŸŽ",description:"Unconditional payment to all citizens. Eliminates poverty floor. Very expensive.",tradeoff:"â†‘ Equality but â†‘â†‘ Government spending"},{id:"interestRate",name:"Interest Rate",category:"monetary",type:"slider",min:0,max:.2,step:.005,format:"percent",icon:"ðŸ¦",description:"Cost of borrowing money. High rates fight inflation but slow growth.",tradeoff:"â†‘ Fights inflation but â†“ Business investment"},{id:"antiMonopoly",name:"Anti-Monopoly Laws",category:"regulation",type:"toggle",icon:"âš–ï¸",description:"Break up businesses that dominate a market. Prevents price gouging.",tradeoff:"â†‘ Competition but â†“ Economies of scale"},{id:"educationFunding",name:"Education Spending",category:"public",type:"slider",min:0,max:1,step:.05,format:"percent",icon:"ðŸ“š",description:"Invests in workforce quality over time. Slow payoff, lasting effect.",tradeoff:"â†‘ Long-term productivity but â†‘ Government spending now"},{id:"unemploymentBenefit",name:"Unemployment Benefits",category:"welfare",type:"slider",min:0,max:300,step:10,format:"currency",icon:"ðŸ›¡ï¸",description:"Payments to unemployed workers. Maintains demand but may reduce job search urgency.",tradeoff:"â†‘ Stability but may â†‘ Unemployment duration"},{id:"priceControlFood",name:"Food Price Controls",category:"regulation",type:"toggle",icon:"ðŸŒ¾",description:"Caps food prices to protect the poor. May cause shortages if price is too low.",tradeoff:"â†‘ Affordability but â†“ Farm investment"},{id:"priceControlHousing",name:"Rent Controls",category:"regulation",type:"toggle",icon:"ðŸ ",description:"Limits housing rent increases. Helps existing tenants, discourages new supply.",tradeoff:"â†‘ Affordability but â†“ New housing construction"},{id:"printMoney",name:"Quantitative Easing",category:"monetary",type:"slider",min:0,max:50,step:1,format:"number",icon:"ðŸ–¨ï¸",description:"Inject money into the economy. Boosts demand but causes inflation.",tradeoff:"â†‘ Short-term demand but â†‘â†‘ Inflation risk"},{id:"publicHealthcare",name:"Public Healthcare",category:"public",type:"toggle",icon:"ðŸ¥",description:"Government-funded health. Improves health, reduces death rate, increases happiness.",tradeoff:"â†‘ Health + happiness but â†‘â†‘ Government spending"},{id:"wealthTax",name:"Wealth Tax",category:"fiscal",type:"slider",min:0,max:.05,step:.001,format:"percent",icon:"ðŸ’Ž",description:"Annual tax on total wealth above threshold. Directly reduces inequality.",tradeoff:"â†‘ Equality but â†“ Capital accumulation"},{id:"openBorders",name:"Open Immigration",category:"labor",type:"toggle",icon:"ðŸŒ",description:"Allow skilled immigrants. Boosts labor supply and productivity, may suppress wages.",tradeoff:"â†‘ Productivity but â†‘ Job competition"},{id:"subsidiesFarming",name:"Farm Subsidies",category:"fiscal",type:"toggle",icon:"ðŸšœ",description:"Government support for food production. Lowers food prices but costs taxpayers.",tradeoff:"â†‘ Food supply + lower prices but â†‘ Spending"},{id:"fourDayWeek",name:"4-Day Work Week",category:"weird",type:"toggle",icon:"ðŸ—“ï¸",description:"Mandate a 4-day work week for all businesses. Workers are happier and healthier â€” but businesses get 20% less output per worker.",tradeoff:"â†‘ Worker health & morale but â†“ Business productivity"},{id:"robotTax",name:"Robot Tax",category:"weird",type:"slider",min:0,max:.5,step:.05,format:"percent",icon:"ðŸ¤–",description:"Tax on automated production in the tech sector. Slows job displacement and funds redistribution.",tradeoff:"â†‘ Employment but â†“ Tech sector growth"},{id:"breadAndCircuses",name:"Bread & Circuses",category:"weird",type:"toggle",icon:"ðŸŽª",description:"Government-funded free food and entertainment for all. Romans used it to keep the masses pacified. Crushes unrest â€” briefly.",tradeoff:"â†“ Unrest now but â†‘ Gov spending + dependency risk"},{id:"mandatoryProfitShare",name:"Mandatory Profit Sharing",category:"weird",type:"slider",min:0,max:.3,step:.05,format:"percent",icon:"ðŸ¤",description:"Businesses must share a percentage of profits with all employees. Reduces inequality, may deter investment.",tradeoff:"â†‘ Worker wealth + lower Gini but â†“ Business capital"},{id:"landValueTax",name:"Land Value Tax",category:"weird",type:"slider",min:0,max:.05,step:.005,format:"percent",icon:"ðŸŒ",description:"Annual tax on land value only (not buildings). Georgist reform â€” discourages speculation, funds government efficiently.",tradeoff:"â†‘ Gov revenue + lower housing prices but unpopular with landowners"},{id:"banAdvertising",name:"Ban Advertising",category:"weird",type:"toggle",icon:"ðŸš«",description:"Outlaws all commercial advertising. Luxury demand collapses. People only buy what they actually need. Businesses struggle to grow.",tradeoff:"â†“ Luxury consumption + lower Gini but â†“ Business growth"},{id:"debtJubilee",name:"Debt Jubilee",category:"weird",type:"toggle",icon:"ðŸŽº",description:"One-time Biblical-style cancellation of all debts. Agents with negative wealth are reset to zero. Happens once then turns off.",tradeoff:"Massive one-time equality reset â€” may destabilize lenders"},{id:"lotteryRedistribution",name:"Wealth Lottery",category:"weird",type:"toggle",icon:"ðŸŽ°",description:'Each tick, a random wealthy citizen pays a "luck tax" directly to a random poor citizen. Chaotic but surprisingly equalizing.',tradeoff:"â†“ Extreme wealth concentration but unpredictable and arbitrary"},{id:"sumptuary",name:"Sumptuary Laws",category:"weird",type:"toggle",icon:"ðŸ‘‘",description:"Legal limits on luxury spending for the wealthy. Medieval kings used these. Luxury sector collapses but inequality drops.",tradeoff:"â†“ Inequality + â†“ Gini but luxury sector destruction"},{id:"degrowth",name:"Degrowth Policy",category:"weird",type:"toggle",icon:"ðŸŒ±",description:"Deliberately slow economic growth. Less GDP obsession means less stress, more stability, better health â€” but economists freak out.",tradeoff:"â†“ GDP growth + â†‘ Health & stability but controversial"},{id:"algoCentralPlanning",name:"Algorithmic Planning",category:"weird",type:"toggle",icon:"ðŸ§®",description:"An AI algorithm sets all prices and wages. Eliminates market volatility. Cold, efficient, and slightly dystopian.",tradeoff:"â†“ Price chaos but removes market discovery + creepy"},{id:"universalBankAccount",name:"Universal Bank Account",category:"weird",type:"toggle",icon:"ðŸ§",description:"Every citizen gets a free government bank account. Reduces financial exclusion, enables direct transfers, improves savings rates.",tradeoff:"â†‘ Financial inclusion + savings but â†‘ Gov infrastructure cost"},{id:"helicopterMoney",name:"Helicopter Money",category:"chaos",type:"slider",min:0,max:500,step:10,format:"currency",icon:"ðŸš",description:"Drop cash directly into every citizen's pocket every tick. Milton Friedman's thought experiment. Pure demand stimulus â€” with pure inflation consequences.",tradeoff:"â†‘â†‘ Demand and spending but â†‘â†‘â†‘ Inflation â€” eventually hyperinflation"},{id:"maximumWage",name:"Maximum Wage",category:"chaos",type:"slider",min:0,max:500,step:10,format:"currency",icon:"ðŸ”’",description:"Hard cap on how much anyone can earn. Income above the limit is confiscated. No CEO mega-salaries allowed. Brain drain incoming.",tradeoff:"â†“ Inequality and Gini but â†‘ Risk of skill emigration and talent suppression"},{id:"wealthConfiscation",name:"Wealth Confiscation",category:"chaos",type:"slider",min:0,max:.5,step:.05,format:"percent",icon:"ðŸª“",description:"Seize a portion of all wealth above $1000. Not a tax â€” an outright seizure. The rich will not be happy. Capital flight begins immediately.",tradeoff:"â†“â†“ Gini immediately but â†‘ Capital flight, investment collapse, and rich agent rage"},{id:"nationalizeIndustries",name:"Nationalize Industries",category:"chaos",type:"toggle",icon:"ðŸ­",description:'The government takes over all private businesses. Workers get flat wages. Production is "planned." The invisible hand is replaced by a five-year plan.',tradeoff:"â†“ Unemployment but â†“â†“ Productivity, â†‘ Gov costs, and businesses stop innovating"},{id:"punitiveTargiffs",name:"Punitive Tariffs",category:"chaos",type:"slider",min:0,max:2,step:.1,format:"percent",icon:"ðŸš§",description:'Slap a massive surcharge on all goods. "Protecting" the economy. In practice: prices skyrocket, consumers suffer, trading partners retaliate.',tradeoff:"â†‘â†‘ Prices (inflation) and â†“ Real wages â€” the Smoot-Hawley special"},{id:"guaranteedJobs",name:"Guaranteed Jobs Program",category:"chaos",type:"toggle",icon:"ðŸ‘·",description:"The government employs every unemployed citizen at minimum wage. Unemployment vanishes on paper. The government payroll explodes.",tradeoff:"â†“ Unemployment to 0% but â†‘â†‘â†‘ Government spending and budget deficit"}],kt={fiscal:{label:"Fiscal Policy",color:"#3b82f6"},monetary:{label:"Monetary Policy",color:"#f59e0b"},labor:{label:"Labor Market",color:"#22c55e"},welfare:{label:"Welfare",color:"#ec4899"},regulation:{label:"Regulation",color:"#8b5cf6"},public:{label:"Public Services",color:"#06b6d4"},weird:{label:"âš—ï¸ Weird Laws",color:"#f97316"},chaos:{label:"ðŸ’£ Chaos Levers",color:"#dc2626"}};function Nt({policy:e,value:n,onChange:o}){const a=s=>e.format==="percent"?(s*100).toFixed(0)+"%":e.format==="currency"?"$"+s:s;return t.jsxs("div",{className:"group",children:[t.jsxs("div",{className:"flex justify-between items-center mb-1",children:[t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx("span",{className:"text-sm",children:e.icon}),t.jsx("span",{className:"text-xs text-[#e2e8f0] font-mono",children:e.name})]}),t.jsx("span",{className:"text-xs font-bold font-mono text-[#6366f1]",children:a(n)})]}),t.jsx("input",{type:"range",min:e.min,max:e.max,step:e.step,value:n,onChange:s=>o(e.id,parseFloat(s.target.value)),className:"w-full h-1.5 rounded-full appearance-none cursor-pointer",style:{background:`linear-gradient(to right, #6366f1 0%, #6366f1 ${(n-e.min)/(e.max-e.min)*100}%, #1e1e2e ${(n-e.min)/(e.max-e.min)*100}%, #1e1e2e 100%)`},title:e.description}),t.jsx("div",{className:"hidden group-hover:block text-[10px] text-[#475569] mt-1 leading-tight",children:e.tradeoff})]})}function Ct({policy:e,value:n,onChange:o}){return t.jsxs("div",{className:"flex items-center justify-between group",children:[t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx("span",{className:"text-sm",children:e.icon}),t.jsx("span",{className:"text-xs text-[#e2e8f0] font-mono",children:e.name})]}),t.jsx("button",{onClick:()=>o(e.id,!n),className:`relative w-9 h-5 rounded-full transition-colors duration-200 flex-shrink-0 ${n?"bg-[#6366f1]":"bg-[#334155]"}`,children:t.jsx("span",{className:`absolute top-0.5 w-4 h-4 bg-white rounded-full shadow transition-transform duration-200 ${n?"translate-x-4":"translate-x-0.5"}`})})]})}function St({policies:e,onPolicyChange:n}){const[o,a]=c.useState("fiscal"),[s,i]=c.useState(!0),r=jt.filter(l=>l.category===o);return t.jsxs("div",{className:"flex flex-col h-full",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h3",{className:"text-xs uppercase tracking-widest text-[#64748b] font-mono",children:"Policy Controls"}),t.jsx("button",{onClick:()=>i(!s),className:"text-[#475569] hover:text-[#e2e8f0] text-xs",children:s?"â–¼":"â–¶"})]}),s&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:Object.entries(kt).map(([l,u])=>t.jsx("button",{onClick:()=>a(l),className:`text-[10px] px-2 py-0.5 rounded font-mono transition-colors ${o===l?"text-white":"text-[#475569] hover:text-[#94a3b8]"}`,style:{backgroundColor:o===l?u.color+"33":"transparent",borderColor:u.color+"44",border:"1px solid"},children:u.label},l))}),t.jsx("div",{className:"flex flex-col gap-3 overflow-y-auto flex-1",children:r.map(l=>t.jsx("div",{children:l.type==="slider"?t.jsx(Nt,{policy:l,value:(e==null?void 0:e[l.id])??0,onChange:n}):t.jsx(Ct,{policy:l,value:(e==null?void 0:e[l.id])??!1,onChange:n})},l.id))})]})]})}const Tt=[{label:"1Ã—",value:1,title:"Slow â€” watch individual agents"},{label:"5Ã—",value:5,title:"Normal play"},{label:"20Ã—",value:20,title:"Fast-forward"},{label:"Max",value:60,title:"Stress test"}];function Mt({paused:e,speed:n,onPause:o,onResume:a,onReset:s,onSpeedChange:i,onScenarioOpen:r,onShockMe:l,onStatsOpen:u,scenarioName:d,year:h,narratorEnabled:m,narratorLoading:x,onNarratorToggle:f}){const[p,w]=c.useState(!1),b=()=>{navigator.clipboard&&(navigator.clipboard.writeText(window.location.href),w(!0),setTimeout(()=>w(!1),2e3))};return t.jsxs("header",{className:"flex items-center justify-between px-4 py-2 bg-[#0a0a0f] border-b border-[#1e1e2e] flex-wrap gap-2",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-lg",children:"ðŸ¾"}),t.jsx("span",{className:"text-[#e2e8f0] font-bold font-mono text-sm hidden sm:block",children:"EconSim"})]}),t.jsxs("button",{onClick:r,className:"text-xs font-mono text-[#6366f1] hover:text-[#818cf8] border border-[#6366f133] hover:border-[#6366f166] rounded px-2 py-1 transition-colors",children:[d||"Free Market"," â–¾"]}),h!==void 0&&t.jsxs("span",{className:"text-[#475569] text-xs font-mono",children:["Year ",h]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"flex items-center gap-0.5 bg-[#12121a] border border-[#1e1e2e] rounded px-1",children:Tt.map(y=>t.jsx("button",{onClick:()=>i(y.value),title:y.title,className:`text-xs font-mono px-2 py-1 rounded transition-colors ${n===y.value?"bg-[#6366f1] text-white":"text-[#64748b] hover:text-[#e2e8f0]"}`,children:y.label},y.value))}),t.jsx("button",{onClick:e?a:o,className:`flex items-center gap-1 text-xs font-mono px-3 py-1.5 rounded border transition-colors
            border-[#1e1e2e] text-[#e2e8f0] hover:border-[#6366f1] hover:text-[#6366f1]`,children:e?"â–¶ Play":"â¸ Pause"}),t.jsx("button",{onClick:s,className:`text-xs font-mono px-3 py-1.5 rounded border border-[#1e1e2e] text-[#64748b]
            hover:border-[#ef4444] hover:text-[#ef4444] transition-colors`,title:"Reset simulation",children:"â†º Reset"}),t.jsx("button",{onClick:l,className:`text-xs font-mono px-3 py-1.5 rounded border border-[#f59e0b33] text-[#f59e0b]
            hover:bg-[#f59e0b11] transition-colors`,title:"Trigger a random economic event",children:"âš¡ Shock"}),t.jsx("button",{onClick:b,className:`text-xs font-mono px-3 py-1.5 rounded border border-[#1e1e2e] text-[#64748b]
            hover:border-[#22c55e] hover:text-[#22c55e] transition-colors`,title:"Copy shareable link",children:p?"âœ“ Copied!":"ðŸ”— Share"}),t.jsx("button",{onClick:u,className:`text-xs font-mono px-3 py-1.5 rounded border border-[#1e1e2e] text-[#64748b]
            hover:border-[#6366f1] hover:text-[#6366f1] transition-colors`,title:"Open macroeconomic statistics",children:"ðŸ“Š Stats"}),t.jsx("button",{onClick:f,disabled:x,className:`text-xs font-mono px-3 py-1.5 rounded border transition-colors ${m?"border-[#06b6d4] text-[#06b6d4] bg-[#06b6d411]":"border-[#1e1e2e] text-[#475569] hover:border-[#06b6d4] hover:text-[#06b6d4]"} ${x?"opacity-50 cursor-wait":""}`,title:m?"Disable narration":"Enable AI narration (loads ~40MB model)",children:x?"â³ Loadingâ€¦":m?"ðŸ”Š Voice On":"ðŸ”‡ Voice"})]})]})}const de={freeMarket:{id:"freeMarket",name:"Free Market Utopia",subtitle:"No rules. Pure capitalism.",description:"Zero regulation. No minimum wage, no taxes, no safety net. Watch monopolies form naturally and see who wins â€” and who gets left behind.",icon:"ðŸ¦…",difficulty:"Observe",color:"#3b82f6",isHistorical:!1,policies:{incomeTax:0,corporateTax:0,minWage:0,ubi:0,interestRate:.02,antiMonopoly:!1,educationFunding:0,unemploymentBenefit:0,priceControlFood:!1,priceControlHousing:!1,printMoney:0,publicHealthcare:!1,wealthTax:0,openBorders:!1,subsidiesFarming:!1},agentCount:200,businessCount:20,wealthMultiplier:1.2,wealthInequality:1.5,avgSkill:.5,lesson:"Natural monopolies emerge quickly. The rich get richer. But GDP grows fast at first."},debtSpiral:{id:"debtSpiral",name:"The Debt Spiral",subtitle:"Borrowed too much. Now what?",description:"The government spent heavily on social programs. Debt is high, deficit is growing. Austerity or default â€” pick your poison.",icon:"ðŸ’¸",difficulty:"Hard",color:"#ef4444",isHistorical:!1,policies:{incomeTax:.45,corporateTax:.35,minWage:15,ubi:200,interestRate:.12,antiMonopoly:!0,educationFunding:.8,unemploymentBenefit:150,priceControlFood:!1,priceControlHousing:!1,printMoney:5,publicHealthcare:!0,wealthTax:.02,openBorders:!1,subsidiesFarming:!1},agentCount:200,businessCount:18,wealthMultiplier:.8,wealthInequality:.8,avgSkill:.55,startGovDebt:5e3,lesson:"Cutting programs causes pain now. Keeping them causes pain later. The political economy of austerity."},techDisruption:{id:"techDisruption",name:"Tech Disruption",subtitle:"Automation is coming for jobs.",description:"A stable, balanced economy. Then a tech breakthrough hits â€” half the jobs can be automated. Will you adapt or collapse?",icon:"ðŸ¤–",difficulty:"Medium",color:"#8b5cf6",isHistorical:!1,policies:{incomeTax:.28,corporateTax:.21,minWage:12,ubi:0,interestRate:.05,antiMonopoly:!1,educationFunding:.5,unemploymentBenefit:80,priceControlFood:!1,priceControlHousing:!1,printMoney:0,publicHealthcare:!1,wealthTax:0,openBorders:!1,subsidiesFarming:!1},agentCount:200,businessCount:20,wealthMultiplier:1,wealthInequality:1,avgSkill:.5,scheduledEvents:[{type:"techBreakthrough",atTick:200}],lesson:"Automation creates wealth but destroys jobs. UBI or retraining â€” which policy saves more people?"},greatDepression:{id:"greatDepression",name:"The Great Depression",subtitle:"October 1929. The markets have collapsed.",description:'GDP has fallen 30%. Unemployment is climbing toward 25%. Banks are failing daily. Hoover says "be patient." Do you agree?',icon:"ðŸ“‰",difficulty:"Very Hard",color:"#78716c",isHistorical:!0,era:"1929â€“1939 Â· United States",durationYears:15,policies:{incomeTax:.02,corporateTax:.12,minWage:0,ubi:0,interestRate:.06,antiMonopoly:!1,educationFunding:.1,unemploymentBenefit:0,priceControlFood:!1,priceControlHousing:!1,printMoney:0,publicHealthcare:!1,wealthTax:0,openBorders:!1,subsidiesFarming:!1},agentCount:200,businessCount:12,wealthMultiplier:.35,wealthInequality:2,avgSkill:.4,scheduledEvents:[{type:"recession",atTick:1},{type:"financialBubble",atTick:80}],lesson:"Austerity deepened the Depression. FDR's New Deal proved government spending could restart demand."},weimarHyperinflation:{id:"weimarHyperinflation",name:"Weimar Hyperinflation",subtitle:"A loaf of bread costs a wheelbarrow of cash.",description:"Post-WWI Germany is printing money to pay reparations. Inflation is doubling daily. The middle class is being wiped out. Can you stabilize the currency before society collapses?",icon:"ðŸ’¹",difficulty:"Expert",color:"#dc2626",isHistorical:!0,era:"1921â€“1924 Â· Germany",durationYears:10,policies:{incomeTax:.15,corporateTax:.1,minWage:0,ubi:0,interestRate:.01,antiMonopoly:!1,educationFunding:.2,unemploymentBenefit:0,priceControlFood:!0,priceControlHousing:!1,printMoney:40,publicHealthcare:!1,wealthTax:0,openBorders:!1,subsidiesFarming:!1},agentCount:180,businessCount:15,wealthMultiplier:.5,wealthInequality:1.8,avgSkill:.45,scheduledEvents:[],lesson:"Stopping hyperinflation requires cold turkey: halt money printing, issue new credible currency, accept short-term pain."},stagflation1970s:{id:"stagflation1970s",name:"1970s Stagflation",subtitle:"Inflation up. Unemployment up. Nothing works.",description:"OPEC's oil embargo just hit. Prices are surging but the economy is stagnating. Your standard policy tools are pointing in opposite directions. What do you do?",icon:"â›½",difficulty:"Hard",color:"#d97706",isHistorical:!0,era:"1973â€“1982 Â· United States",durationYears:12,policies:{incomeTax:.3,corporateTax:.48,minWage:8,ubi:0,interestRate:.06,antiMonopoly:!1,educationFunding:.4,unemploymentBenefit:100,priceControlFood:!1,priceControlHousing:!1,printMoney:8,publicHealthcare:!1,wealthTax:0,openBorders:!1,subsidiesFarming:!1},agentCount:200,businessCount:18,wealthMultiplier:.85,wealthInequality:1.1,avgSkill:.5,scheduledEvents:[{type:"cropFailure",atTick:20},{type:"recession",atTick:150}],lesson:"Stagflation broke Keynesian consensus. Volcker's painful rate hikes eventually worked â€” but cost millions their jobs."},crisisOf2008:{id:"crisisOf2008",name:"2008 Financial Crisis",subtitle:"Lehman just failed. The banks are frozen.",description:"The US housing bubble has burst. Banks are insolvent. Credit is frozen. The global economy is in freefall. Bail out the banks, let them fail, or something else?",icon:"ðŸ¦",difficulty:"Hard",color:"#7c3aed",isHistorical:!0,era:"2008â€“2015 Â· Global",durationYears:10,policies:{incomeTax:.28,corporateTax:.35,minWage:10,ubi:0,interestRate:.05,antiMonopoly:!1,educationFunding:.4,unemploymentBenefit:100,priceControlFood:!1,priceControlHousing:!1,printMoney:0,publicHealthcare:!1,wealthTax:0,openBorders:!1,subsidiesFarming:!1},agentCount:200,businessCount:16,wealthMultiplier:.7,wealthInequality:1.6,avgSkill:.5,scheduledEvents:[{type:"financialBubble",atTick:1},{type:"recession",atTick:30}],lesson:"Bailouts prevented a depression but rewarded recklessness. The political consequences lasted a decade."},japanLostDecade:{id:"japanLostDecade",name:"Japan's Lost Decade",subtitle:"Zero rates. Zero growth. Zero inflation.",description:"Japan's asset bubble burst in 1991. Interest rates are near zero. Stimulus packages come and go. Nothing works. Can you escape the deflationary trap that trapped Japan for 20 years?",icon:"ðŸ—¾",difficulty:"Expert",color:"#0891b2",isHistorical:!0,era:"1991â€“2010 Â· Japan",durationYears:15,policies:{incomeTax:.33,corporateTax:.38,minWage:6,ubi:0,interestRate:.005,antiMonopoly:!1,educationFunding:.6,unemploymentBenefit:80,priceControlFood:!1,priceControlHousing:!1,printMoney:2,publicHealthcare:!0,wealthTax:0,openBorders:!1,subsidiesFarming:!1},agentCount:200,businessCount:20,wealthMultiplier:.9,wealthInequality:.9,avgSkill:.65,scheduledEvents:[{type:"financialBubble",atTick:1},{type:"recession",atTick:10}],lesson:"Half-measures and zombie banks prolonged Japan's stagnation for 20 years. Swift, decisive action matters."},nordicMiracle:{id:"nordicMiracle",name:"Build the Nordic Model",subtitle:"High taxes. High trust. High happiness.",description:"You're building a new nation. Can you achieve the Nordic balance: low inequality, high productivity, strong safety net, and sustained growth? This is what success looks like.",icon:"ðŸŒ",difficulty:"Blueprint",color:"#059669",isHistorical:!0,era:"Reference Model Â· Scandinavia",durationYears:20,policies:{incomeTax:.45,corporateTax:.25,minWage:18,ubi:0,interestRate:.03,antiMonopoly:!0,educationFunding:.9,unemploymentBenefit:200,priceControlFood:!1,priceControlHousing:!1,printMoney:0,publicHealthcare:!0,wealthTax:.01,openBorders:!1,subsidiesFarming:!0},agentCount:200,businessCount:22,wealthMultiplier:1,wealthInequality:.7,avgSkill:.6,avgEducation:.65,scheduledEvents:[],lesson:"The Nordic model requires high institutional trust, universal services, AND open competitive markets. All three."}},Ae=Object.values(de),Pt=Ae.filter(e=>!e.isHistorical),At=Ae.filter(e=>e.isHistorical);function Ft({scenario:e,onSelect:n,current:o}){const a=o===e.id;return t.jsx("button",{onClick:()=>n(e.id),className:`w-full text-left p-4 rounded-xl border transition-all ${a?"":"border-[#1e1e2e] bg-[#12121a] hover:border-[#334155]"}`,style:{borderColor:a?e.color:void 0,backgroundColor:a?e.color+"10":void 0},children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("span",{className:"text-2xl",children:e.icon}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-0.5",children:[t.jsx("span",{className:"text-white font-bold text-sm",children:e.name}),t.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded font-mono",style:{backgroundColor:e.color+"22",color:e.color},children:e.difficulty}),e.durationYears&&t.jsxs("span",{className:"text-[10px] px-1.5 py-0.5 rounded font-mono bg-[#1e1e2e] text-[#64748b]",children:[e.durationYears,"yr challenge"]})]}),e.era&&t.jsx("div",{className:"text-[10px] font-mono text-[#475569] mb-1",children:e.era}),t.jsx("p",{className:"text-[#64748b] text-xs leading-relaxed",children:e.description}),t.jsxs("div",{className:"mt-2 text-[10px] font-mono text-[#475569] border-l-2 pl-2",style:{borderColor:e.color+"55"},children:["ðŸ’¡ ",e.lesson]})]})]})})}function we({title:e,subtitle:n,scenarios:o,current:a,onSelect:s}){return t.jsxs("div",{children:[t.jsxs("div",{className:"mb-3",children:[t.jsx("h3",{className:"text-white font-bold text-sm",children:e}),n&&t.jsx("p",{className:"text-[#475569] text-xs mt-0.5",children:n})]}),t.jsx("div",{className:"flex flex-col gap-2",children:o.map(i=>t.jsx(Ft,{scenario:i,current:a,onSelect:s},i.id))})]})}function It({current:e,onSelect:n,onClose:o}){return t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/75 backdrop-blur-sm",children:t.jsxs("div",{className:"bg-[#0d0d14] border border-[#1e1e2e] rounded-2xl p-6 max-w-2xl w-full mx-4 max-h-[92vh] overflow-y-auto shadow-2xl",children:[t.jsxs("div",{className:"flex items-start justify-between mb-6",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-white font-bold text-xl font-mono",children:"Choose Scenario"}),t.jsx("p",{className:"text-[#64748b] text-sm mt-1",children:"Sandbox: experiment freely. Historical Crises: can you do better than history did?"})]}),t.jsx("button",{onClick:o,className:"text-[#475569] hover:text-white text-xl ml-4 flex-shrink-0",children:"âœ•"})]}),t.jsxs("div",{className:"flex flex-col gap-6",children:[t.jsx(we,{title:"ðŸ§ª Sandbox",subtitle:"No time limit. Experiment with policy freely.",scenarios:Pt,current:e,onSelect:a=>{n(a),o()}}),t.jsx("div",{className:"border-t border-[#1e1e2e] pt-6",children:t.jsx(we,{title:"ðŸ“œ Historical Crises â€” Can You Do Better?",subtitle:"Real economic crises, simulated. Each has objectives and a report card. Your outcome is compared to what actually happened.",scenarios:At,current:e,onSelect:a=>{n(a),o()}})})]}),t.jsx("div",{className:"mt-4 text-center text-[#334155] text-xs font-mono",children:"Changing scenario resets the simulation"})]})})}const _t={monopoly_forming:{title:"Monopoly Alert",emoji:"ðŸ¢",body:"One business now controls over 60% of its market. Without competition, prices rise and quality drops.",realWorld:"Standard Oil controlled 91% of US oil in 1904. The Sherman Antitrust Act (1890) broke it up. Today, similar debates surround Big Tech.",color:"#ef4444"},high_inequality:{title:"Inequality Spike",emoji:"ðŸ“Š",body:"Wealth concentration is extreme. The Gini coefficient measures this: 0 = perfect equality, 1 = one person owns everything.",realWorld:"The US Gini is ~0.41. Scandinavia: ~0.28. Brazil: ~0.53. High inequality correlates with lower social mobility and higher crime.",color:"#f59e0b"},high_unemployment:{title:"Unemployment Crisis",emoji:"ðŸ“‰",body:"Mass unemployment creates a vicious cycle: fewer workers â†’ less spending â†’ fewer sales â†’ more layoffs.",realWorld:"Keynes' insight: in a recession, government spending can break this cycle by creating demand when the private sector won't.",color:"#ef4444"},inflation_spiral:{title:"Inflation Warning",emoji:"ðŸ”¥",body:"Prices are rising faster than wages. Your money buys less each day. The purchasing power of savings erodes.",realWorld:"Zimbabwe's hyperinflation (2008) reached 89.7 sextillion % monthly. The cure: independent central banks that raise rates.",color:"#f97316"},min_wage_tradeoff:{title:"Minimum Wage Tradeoff",emoji:"âš–ï¸",body:"A higher minimum wage raised living standards â€” but some businesses can no longer afford to hire.",realWorld:"Seattle's $15 minimum wage (2015) study: restaurant employment rose in some areas, fell in others. Context matters enormously.",color:"#6366f1"},budget_surplus:{title:"Fiscal Surplus!",emoji:"ðŸ’°",body:"Tax revenue exceeds spending. The government can pay down debt or invest in future growth.",realWorld:"The US ran surpluses 1998-2001. Norway's oil fund (built from surpluses) now exceeds $1.4 trillion.",color:"#22c55e"},stagnation:{title:"Stagflation Risk",emoji:"ðŸ˜°",body:"The economy is shrinking AND unemployment is rising â€” the worst of both worlds. Traditional policy tools conflict.",realWorld:"The 1970s oil crisis created stagflation. Volcker killed it (1980) by raising interest rates to 20% â€” causing a painful recession.",color:"#8b5cf6"},poverty_trap:{title:"Poverty Trap",emoji:"ðŸª¤",body:"Workers in poverty can't afford better nutrition, education, or healthcare â€” which keeps them in poverty.",realWorld:"The poverty trap: every dollar earned reduces welfare by $1. Effective marginal tax rates for the poor can exceed 80%.",color:"#ef4444"},dutch_disease:{title:"Resource Dependency",emoji:"â›½",body:"One sector dominates, crowding out others. High-earning sectors attract all workers, leaving other industries struggling.",realWorld:`The "Dutch Disease": Netherlands' 1960s natural gas discovery boosted the guilder, making exports uncompetitive.`,color:"#f59e0b"},ubi_effect:{title:"UBI Effect Observed",emoji:"ðŸŽ¯",body:"Universal Basic Income is reducing poverty and providing security. Some people are taking more risks â€” starting businesses.",realWorld:"Finland's UBI experiment (2017-18): recipients reported better wellbeing, mental health improved. Employment was neutral.",color:"#22c55e"}};function Et({insight:e,onDismiss:n}){const[o,a]=c.useState(!1);if(c.useEffect(()=>{e&&a(!0)},[e]),!e||!o)return null;const s=_t[e.id]||{title:e.title,emoji:"ðŸ’¡",body:e.body,realWorld:e.realWorld,color:"#6366f1"},i=()=>{a(!1),setTimeout(()=>n==null?void 0:n(),300)};return t.jsx("div",{className:`fixed bottom-6 right-6 z-40 max-w-sm transition-all duration-300 ${o?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:t.jsx("div",{className:"bg-[#0d0d14] border rounded-xl p-4 shadow-2xl",style:{borderColor:s.color+"66"},children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("span",{className:"text-2xl flex-shrink-0",children:s.emoji}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsx("h4",{className:"text-white font-bold text-sm",children:s.title}),t.jsx("button",{onClick:i,className:"text-[#475569] hover:text-white text-sm ml-2",children:"âœ•"})]}),t.jsx("p",{className:"text-[#94a3b8] text-xs leading-relaxed mb-2",children:s.body}),t.jsxs("div",{className:"text-[10px] text-[#64748b] leading-relaxed border-l-2 pl-2 italic",style:{borderColor:s.color+"66"},children:["ðŸŒ ",s.realWorld]}),t.jsxs("div",{className:"text-[9px] text-[#334155] mt-2 font-mono",children:["Year ",e.year," Â· ",e.id]})]})]})})})}const Rt={working:"Employed",unemployed:"Unemployed",child:"Child",retired:"Retired",owner:"Business Owner",dead:"Deceased"},Dt={working:"#22c55e",unemployed:"#ef4444",child:"#94a3b8",retired:"#64748b",owner:"#f59e0b",dead:"#374151"};function Wt({agent:e,onClose:n}){if(!e)return null;const o=Math.floor(e.age/52),a=Pe(e.wealth);return t.jsxs("div",{className:"fixed top-20 left-1/2 -translate-x-1/2 z-40 bg-[#0d0d14] border border-[#1e1e2e] rounded-xl p-4 shadow-2xl max-w-xs w-full",children:[t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"w-4 h-4 rounded-full border border-white/20",style:{backgroundColor:a}}),t.jsxs("span",{className:"text-white font-bold font-mono text-sm",children:["Agent #",e.id]})]}),t.jsx("button",{onClick:n,className:"text-[#475569] hover:text-white text-sm",children:"âœ•"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1.5 text-xs mb-3",children:[t.jsx(I,{label:"Age",value:`${o} yrs`}),t.jsx(I,{label:"Status",value:Rt[e.state]||e.state,color:Dt[e.state]}),t.jsx(I,{label:"Wealth",value:`$${Math.round(e.wealth)}`,color:a}),t.jsx(I,{label:"Wage",value:e.wage>0?`$${e.wage.toFixed(1)}/tick`:"â€”"}),t.jsx(I,{label:"Skill",value:`${(e.skill*100).toFixed(0)}%`}),t.jsx(I,{label:"Education",value:`${(e.education*100).toFixed(0)}%`}),t.jsx(I,{label:"Health",value:`${(e.health*100).toFixed(0)}%`}),t.jsx(I,{label:"Happiness",value:`${(e.happiness*100).toFixed(0)}%`,color:e.happiness>.6?"#22c55e":e.happiness<.3?"#ef4444":"#e2e8f0"}),e.jobSector&&t.jsx(I,{label:"Sector",value:e.jobSector}),t.jsx(I,{label:"Class",value:e.socialClass,color:e.socialClass==="rich"?"#f59e0b":e.socialClass==="poor"?"#ef4444":"#e2e8f0"})]}),e.events&&e.events.length>0&&t.jsxs("div",{children:[t.jsx("div",{className:"text-[#475569] text-[10px] uppercase tracking-wider font-mono mb-1.5",children:"Life History"}),t.jsx("ul",{className:"space-y-0.5 max-h-24 overflow-y-auto",children:e.events.map((s,i)=>t.jsxs("li",{className:"text-[10px] text-[#64748b] font-mono leading-tight",children:["â€¢ ",s]},i))})]})]})}function I({label:e,value:n,color:o}){return t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"text-[#475569] font-mono",children:e}),t.jsx("span",{className:"font-mono font-medium",style:{color:o||"#e2e8f0"},children:n})]})}function Bt(e){return e<100?"<$100":e<300?"$100-300":e<800?"$300-800":e<2e3?"$800-2K":e<5e3?"$2K-5K":">$5K"}const je=["<$100","$100-300","$300-800","$800-2K","$2K-5K",">$5K"],$t=["#ef4444","#f97316","#eab308","#22c55e","#06b6d4","#f59e0b"];function Gt({agents:e}){const n=c.useMemo(()=>{if(!(e!=null&&e.length))return[];const a={};je.forEach(s=>{a[s]=0});for(const s of e){if(!s.alive)continue;const i=Bt(s.wealth);a[i]=(a[i]||0)+1}return je.map((s,i)=>({name:s,count:a[s]||0,fill:$t[i]}))},[e]),o=c.useMemo(()=>{if(!(e!=null&&e.length))return[];const a=e.filter(s=>s.alive).map(s=>Math.max(0,s.wealth));return nt(a,20)},[e]);return t.jsxs("div",{className:"flex flex-col gap-3",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-[#64748b] text-xs uppercase tracking-wider font-mono mb-2",children:"Wealth Distribution"}),t.jsx("div",{className:"h-28",children:t.jsx(N,{width:"100%",height:"100%",children:t.jsxs(Ce,{data:n,margin:{top:0,right:0,bottom:0,left:-20},children:[t.jsx(S,{dataKey:"name",tick:{fontSize:8,fill:"#475569",fontFamily:"monospace"},axisLine:!1,tickLine:!1}),t.jsx(T,{tick:{fontSize:8,fill:"#475569",fontFamily:"monospace"},axisLine:!1,tickLine:!1}),t.jsx(M,{contentStyle:{background:"#12121a",border:"1px solid #1e1e2e",fontSize:10},labelStyle:{color:"#e2e8f0"},itemStyle:{color:"#6366f1"}}),t.jsx(Se,{dataKey:"count",radius:[2,2,0,0],children:n.map((a,s)=>t.jsx(ue,{fill:a.fill},s))})]})})})]}),o.length>2&&t.jsxs("div",{children:[t.jsx("div",{className:"text-[#64748b] text-xs uppercase tracking-wider font-mono mb-2",children:"Lorenz Curve"}),t.jsx("div",{className:"h-24",children:t.jsx(N,{width:"100%",height:"100%",children:t.jsxs(X,{data:o,margin:{top:0,right:0,bottom:0,left:-20},children:[t.jsx(S,{dataKey:"population",tick:{fontSize:8,fill:"#475569"},axisLine:!1,tickLine:!1,tickFormatter:a=>a+"%"}),t.jsx(T,{tick:{fontSize:8,fill:"#475569"},axisLine:!1,tickLine:!1,tickFormatter:a=>a+"%"}),t.jsx(E,{data:[{population:0,perfect:0},{population:100,perfect:100}],type:"linear",dataKey:"perfect",stroke:"#334155",strokeWidth:1,dot:!1,strokeDasharray:"3 3"}),t.jsx(E,{type:"monotone",dataKey:"wealth",stroke:"#6366f1",strokeWidth:1.5,dot:!1,isAnimationActive:!1}),t.jsx(M,{contentStyle:{background:"#12121a",border:"1px solid #1e1e2e",fontSize:10},formatter:a=>a.toFixed(1)+"%"})]})})}),t.jsx("div",{className:"text-[10px] text-[#334155] text-center font-mono",children:"Area between lines = Gini coefficient"})]})]})}function Ht({objectives:e=[],scenarioDurationYears:n,year:o,scenarioName:a}){if(!e.length)return t.jsxs("div",{className:"text-[#334155] text-xs font-mono p-2 text-center",children:["No objectives in sandbox mode.",t.jsx("br",{}),t.jsx("span",{className:"text-[#475569]",children:"Pick a Historical Crisis for a timed challenge."})]});const s=n?Math.max(0,n-(o||0)):null,i=e.filter(r=>r.completed).length;return t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"text-[#64748b] text-xs font-mono",children:[i,"/",e.length," objectives met"]}),s!==null&&t.jsxs("div",{className:`text-xs font-mono font-bold ${s<3?"text-[#ef4444]":"text-[#94a3b8]"}`,children:[s,"yr left"]})]}),n&&t.jsx("div",{className:"w-full bg-[#1e1e2e] rounded-full h-1",children:t.jsx("div",{className:"h-1 rounded-full transition-all duration-500 bg-[#6366f1]",style:{width:`${Math.min(100,(o||0)/n*100)}%`}})}),e.map(r=>{const l=r.completed?"#22c55e":r.met?"#f59e0b":"#ef4444",u=r.completed?"Complete":r.met?"Activeâ€¦":"Not met";return t.jsxs("div",{className:"bg-[#12121a] border rounded-lg p-3",style:{borderColor:l+"44"},children:[t.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1.5",children:[t.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-mono text-[#e2e8f0]",children:[t.jsx("span",{children:r.icon}),t.jsx("span",{children:r.label})]}),t.jsx("span",{className:"text-[10px] font-mono flex-shrink-0",style:{color:l},children:u})]}),t.jsx("div",{className:"text-[10px] text-[#475569] mb-1.5",children:r.description}),t.jsx("div",{className:"w-full bg-[#0a0a0f] rounded-full h-1.5 mb-1",children:t.jsx("div",{className:"h-1.5 rounded-full transition-all duration-500",style:{width:`${Math.round(r.progress*100)}%`,backgroundColor:l}})}),r.met&&!r.completed&&r.sustainProgress>0&&t.jsxs("div",{className:"text-[9px] text-[#475569] font-mono",children:["Sustaining: ",Math.round(r.sustainProgress*100),"%"]}),!r.completed&&t.jsxs("div",{className:"text-[9px] text-[#334155] mt-1 leading-tight italic",children:["ðŸ’¡ ",r.tip]})]},r.id)})]})}function Lt(e){const n=e.id,o=e.effectOverride||{},a=[];return o.demandMultiplier!==void 0&&a.push(o.demandMultiplier>.7?"â†‘ GDP recovery":"â†“ GDP contraction"),o.wealthCrashPhase!==void 0&&a.push(o.wealthCrashPhase>.5?"â†— Softer crash":"â†˜ Hard crash"),o.deathRateMultiplier!==void 0&&a.push(o.deathRateMultiplier>2?"â†‘â†‘ Deaths":"â†‘ Fewer deaths"),o.techProductivityMultiplier!==void 0&&(a.push(o.techProductivityMultiplier>1.5?"â†‘ GDP spike":"â†’ Moderate growth"),a.push(o.otherJobsAutomatedRate>.1?"â†“â†“ Jobs lost":"â†“ Some jobs lost")),o.foodSupplyMultiplier!==void 0&&a.push(o.foodPriceMultiplier>1.8?"â†‘â†‘ Food prices":"â†‘ Food prices"),e.govDebtPenalty&&a.push(`â†‘ Debt +${e.govDebtPenalty}`),n==="do_nothing"&&(a.push("â†’ Default market response"),a.push("? Outcome uncertain")),a}function Ot({choice:e,selected:n,onSelect:o}){const a=Lt(e),s=e.id==="do_nothing";return t.jsx("button",{onClick:()=>o(e.id),className:`w-full text-left p-4 rounded-xl border-2 transition-all ${n?"border-[#6366f1] bg-[#6366f111]":s?"border-[#334155] border-dashed bg-[#12121a] hover:border-[#475569]":"border-[#1e1e2e] bg-[#12121a] hover:border-[#334155] hover:bg-[#1a1a28]"}`,children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("span",{className:"text-2xl flex-shrink-0 mt-0.5",children:e.emoji}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"font-bold text-white text-sm mb-1",children:e.label}),t.jsx("p",{className:"text-[#94a3b8] text-xs leading-relaxed mb-2",children:e.description}),t.jsxs("div",{className:"flex items-start gap-1.5 mb-2",children:[t.jsx("span",{className:"text-[#f59e0b] text-[10px] flex-shrink-0 mt-0.5",children:"âš "}),t.jsx("span",{className:"text-[#f59e0b] text-[10px] leading-relaxed",children:e.tradeoff})]}),a.length>0&&t.jsx("div",{className:"flex flex-wrap gap-1",children:a.map((i,r)=>t.jsx("span",{className:`text-[9px] font-mono px-1.5 py-0.5 rounded ${i.startsWith("â†‘")||i.startsWith("â†—")?"bg-[#22c55e22] text-[#22c55e]":i.startsWith("â†“")||i.startsWith("â†˜")?"bg-[#ef444422] text-[#ef4444]":"bg-[#1e1e2e] text-[#64748b]"}`,children:i},r))})]})]})})}function zt({event:e,onChoose:n}){var u,d;const[o,a]=c.useState(null),[s,i]=c.useState(!1);if(!e)return null;const r=()=>{if(o){if(!s){i(!0);return}n(e.id,o)}},l=(u=e.choices)==null?void 0:u.find(h=>h.id===o);return t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:t.jsxs("div",{className:"bg-[#0d0d14] border border-[#334155] rounded-2xl p-6 max-w-xl w-full mx-4 max-h-[90vh] overflow-y-auto shadow-2xl",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[t.jsx("span",{className:"text-4xl",children:e.icon}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-white font-bold text-lg",children:e.name}),t.jsx("p",{className:"text-[#94a3b8] text-sm",children:e.description})]})]}),t.jsxs("div",{className:"border-t border-[#1e1e2e] pt-4 mb-4",children:[t.jsx("p",{className:"text-[#64748b] text-xs font-mono uppercase tracking-wider mb-3",children:"âš¡ Simulation paused â€” your decision required"}),t.jsx("div",{className:"flex flex-col gap-2",children:(d=e.choices)==null?void 0:d.map(h=>t.jsx(Ot,{choice:h,selected:o===h.id,onSelect:a},h.id))})]}),s&&l&&t.jsxs("div",{className:"mb-4 p-3 bg-[#1e1e2e] rounded-lg border border-[#334155]",children:[t.jsx("div",{className:"text-[#64748b] text-[10px] uppercase tracking-wider font-mono mb-1",children:"ðŸ“š What history did"}),t.jsx("p",{className:"text-[#94a3b8] text-xs leading-relaxed italic",children:l.historicalNote})]}),t.jsx("button",{onClick:r,disabled:!o,className:`w-full py-3 rounded-xl font-mono font-bold text-sm transition-colors ${o?"bg-[#6366f1] hover:bg-[#818cf8] text-white":"bg-[#1e1e2e] text-[#475569] cursor-not-allowed"}`,children:o?s?"â–¶ Apply and continue":"Confirm â€” see what history did â†’":"Select a response"})]})})}const Ut={greatDepression:{summary:"The US experienced 10 years of contraction. GDP fell 46% peak-to-trough. Unemployment peaked at 25% in 1933. Deflation wiped out savings.",turningPoint:"FDR's New Deal (1933): bank reform, work programs (CCC, WPA), agricultural relief, and abandoning the gold standard.",whatWorked:"Government spending restarted demand. Banking reform restored confidence. Devaluing the dollar stopped deflation.",whatFailed:"Initial Hoover austerity and Smoot-Hawley tariffs deepened the slump. Balanced-budget orthodoxy was catastrophically wrong.",historicalGrade:"D+",metrics:{gdpChangePercent:-46,peakUnemployment:25,inflationAvg:-6,gini:.63,povertyRate:35,recoveryYears:10},quote:'"The only thing we have to fear is fear itself." â€” FDR, 1933'},weimarHyperinflation:{summary:"Germany printed money to pay WWI reparations. By Nov 1923 a loaf of bread cost 200 billion marks. The middle class was wiped out.",turningPoint:"The Rentenmark (Nov 1923): a new currency backed by land assets, issued by an independent body. Printing stopped cold.",whatWorked:"Completely stopping money creation. Issuing a credible new currency. International loans (Dawes Plan) stabilized reparations.",whatFailed:"There was no painless exit. Savings were permanently destroyed. The political fallout helped fuel the rise of extremism.",historicalGrade:"C",metrics:{gdpChangePercent:-25,peakUnemployment:30,inflationAvg:29500,gini:.7,povertyRate:45,recoveryYears:6},quote:'"Inflation is the most important single factor in the politico-economic history of the Weimar Republic." â€” Adam Fergusson'},stagflation1970s:{summary:"OPEC oil embargo (1973) triggered both high inflation AND high unemployment simultaneously â€” violating Keynesian assumptions.",turningPoint:"Volcker Shock (1979â€“82): Federal Reserve raised rates to 20%, deliberately causing a recession to break inflationary expectations.",whatWorked:"Aggressive interest rate hikes eventually tamed inflation. Supply-side reforms improved productivity.",whatFailed:"Wage-price controls (Nixon 1971) temporarily masked inflation then made it worse. Easy money in the early 70s was a mistake.",historicalGrade:"C+",metrics:{gdpChangePercent:-3,peakUnemployment:13,inflationAvg:11,gini:.4,povertyRate:15,recoveryYears:8},quote:'"Inflation is always and everywhere a monetary phenomenon." â€” Milton Friedman'},crisisOf2008:{summary:"US housing bubble collapsed. Lehman Brothers failed Sep 2008. Global credit froze. Worst recession since the Great Depression.",turningPoint:"TARP bank bailouts ($700B), Fed QE programs ($4T), Obama stimulus ($787B). Slow but sustained recovery 2009â€“2019.",whatWorked:"Massive fiscal stimulus, quantitative easing, and bank recapitalization prevented a second Great Depression.",whatFailed:"Austerity in Europe caused a double-dip recession. Too little debt relief for homeowners prolonged household balance sheet repair.",historicalGrade:"B-",metrics:{gdpChangePercent:-4.3,peakUnemployment:10,inflationAvg:1.5,gini:.47,povertyRate:15,recoveryYears:6},quote:'"We came very close to a complete collapse of the financial system." â€” Ben Bernanke'},japanLostDecade:{summary:"Japan's asset bubble burst in 1991. Despite near-zero rates and stimulus, GDP stagnated for 20+ years. Deflation became entrenched.",turningPoint:"Abenomics (2012): aggressive QE, fiscal stimulus, structural reforms. Partially effective â€” ended deflation but growth remained weak.",whatWorked:"Eventually: currency devaluation, quantitative easing at scale, negative interest rates.",whatFailed:"Years of half-measures and zombie bank forbearance. Failure to force bad debt write-offs kept the economy in stasis.",historicalGrade:"D",metrics:{gdpChangePercent:10,peakUnemployment:5.5,inflationAvg:-.2,gini:.34,povertyRate:16,recoveryYears:20},quote:`"Japan's experience suggests that it's very hard to escape deflation once it becomes entrenched." â€” Ben Bernanke`},nordicMiracle:{summary:"Nordic countries (esp. Sweden 1990s) combined high taxes, strong unions, universal welfare, and open markets into sustained prosperity.",turningPoint:"Sweden's 1990s bank crisis resolution: swift bank nationalization, transparent debt writedowns, then re-privatization. Full recovery in 3 years.",whatWorked:"Universal education and healthcare create a productive workforce. Strong safety nets allow risk-taking. Transparent institutions reduce corruption.",whatFailed:"Model requires high trust, homogeneity, and strong institutions to function. Difficult to replicate in larger, more diverse economies.",historicalGrade:"A",metrics:{gdpChangePercent:35,peakUnemployment:8,inflationAvg:2.1,gini:.27,povertyRate:8,recoveryYears:3},quote:`"The Nordic model is not socialism. It's a highly competitive market economy with strong social insurance." â€” Daron Acemoglu`}};function qt(e){return Ut[e]||null}const Fe={"A+":"#22c55e",A:"#22c55e",B:"#84cc16",C:"#eab308",D:"#f97316",F:"#ef4444"};function ie({label:e,score:n}){const o=n>=70?"#22c55e":n>=45?"#eab308":"#ef4444";return t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-1 text-xs font-mono",children:[t.jsx("span",{className:"text-[#94a3b8]",children:e}),t.jsxs("span",{style:{color:o},children:[n,"/100"]})]}),t.jsx("div",{className:"w-full bg-[#1e1e2e] rounded-full h-1.5",children:t.jsx("div",{className:"h-1.5 rounded-full transition-all duration-700",style:{width:`${n}%`,backgroundColor:o}})})]})}function Kt({obj:e}){const n=e.completed?"âœ…":e.met?"ðŸ”„":"âŒ",o=e.completed?"#22c55e":e.met?"#f59e0b":"#ef4444";return t.jsxs("div",{className:"flex items-start gap-2 py-1.5 border-b border-[#1e1e2e] last:border-0",children:[t.jsx("span",{className:"text-sm flex-shrink-0 mt-0.5",children:n}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("span",{className:"text-xs font-mono text-[#e2e8f0]",children:[e.icon," ",e.label]}),t.jsx("span",{className:"text-xs font-mono",style:{color:o},children:e.completed?"Done":e.met?"In progress":`${Math.round(e.progress*100)}%`})]}),t.jsx("div",{className:"text-[10px] text-[#475569] mt-0.5",children:e.description})]})]})}function Yt({playerOutcome:e,historicalOutcome:n}){var a;if(!n)return null;const o=[{label:"GDP Change",player:`${e.gdpChangePercent>0?"+":""}${e.gdpChangePercent}%`,history:`${n.metrics.gdpChangePercent}%`,betterIfHigher:!0,playerVal:e.gdpChangePercent,histVal:n.metrics.gdpChangePercent},{label:"Peak Unemployment",player:`${e.peakUnemployment}%`,history:`${n.metrics.peakUnemployment}%`,betterIfHigher:!1,playerVal:e.peakUnemployment,histVal:n.metrics.peakUnemployment},{label:"Avg Inflation",player:`${e.inflationAvg}%`,history:`${n.metrics.inflationAvg}%`,betterIfHigher:null,playerVal:Math.abs(e.inflationAvg),histVal:Math.abs(n.metrics.inflationAvg)},{label:"Gini Coefficient",player:e.gini.toFixed(2),history:n.metrics.gini.toFixed(2),betterIfHigher:!1,playerVal:e.gini,histVal:n.metrics.gini},{label:"Poverty Rate",player:`${e.povertyRate}%`,history:`${n.metrics.povertyRate}%`,betterIfHigher:!1,playerVal:e.povertyRate,histVal:n.metrics.povertyRate}];return t.jsxs("div",{children:[t.jsx("div",{className:"text-[#64748b] text-xs uppercase tracking-wider font-mono mb-3",children:"You vs History"}),t.jsxs("div",{className:"bg-[#0d0d14] rounded-xl overflow-hidden border border-[#1e1e2e]",children:[t.jsxs("div",{className:"grid grid-cols-3 text-[10px] font-mono text-[#475569] px-3 py-1.5 border-b border-[#1e1e2e]",children:[t.jsx("span",{children:"Metric"}),t.jsx("span",{className:"text-center text-[#6366f1]",children:"You"}),t.jsx("span",{className:"text-center",children:"History"})]}),o.map(s=>{let i="#e2e8f0";return s.betterIfHigher===!0?i=s.playerVal>=s.histVal?"#22c55e":"#ef4444":s.betterIfHigher===!1&&(i=s.playerVal<=s.histVal?"#22c55e":"#ef4444"),t.jsxs("div",{className:"grid grid-cols-3 px-3 py-1.5 text-xs font-mono border-b border-[#0a0a0f] last:border-0",children:[t.jsx("span",{className:"text-[#64748b]",children:s.label}),t.jsx("span",{className:"text-center font-bold",style:{color:i},children:s.player}),t.jsx("span",{className:"text-center text-[#475569]",children:s.history})]},s.label)})]}),t.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs font-mono text-[#475569] px-1",children:[t.jsxs("span",{children:["History's grade: ",t.jsx("span",{style:{color:Fe[n.historicalGrade]||"#94a3b8"},className:"font-bold",children:n.historicalGrade})]}),t.jsxs("span",{className:"text-[10px] italic",children:['"',(a=n.quote)==null?void 0:a.slice(0,50),'â€¦"']})]})]})}function Vt({report:e,onRetry:n,onNextScenario:o}){var r;if(!e)return null;const a=qt(e.scenarioId),s=Fe[e.grade]||"#94a3b8",i=a&&e.finalScore>({"A+":95,A:85,B:70,C:55,D:40,F:20}[a.historicalGrade]||50);return t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/85 backdrop-blur-sm",children:t.jsxs("div",{className:"bg-[#0d0d14] border border-[#1e1e2e] rounded-2xl p-6 max-w-lg w-full mx-4 max-h-[92vh] overflow-y-auto shadow-2xl",children:[t.jsxs("div",{className:"text-center mb-5",children:[t.jsx("div",{className:"text-6xl font-bold font-mono mb-1",style:{color:s},children:e.grade}),t.jsx("div",{className:"text-white font-bold text-lg",children:e.scenarioName}),t.jsxs("div",{className:"text-[#64748b] text-sm",children:["Year ",e.year," Â· Score ",e.finalScore,"/100"]}),i&&t.jsx("div",{className:"mt-2 text-[#22c55e] text-sm font-mono",children:"ðŸ† You did better than history!"})]}),t.jsxs("div",{className:"bg-[#12121a] rounded-xl p-4 mb-4 flex flex-col gap-2.5",children:[t.jsx(ie,{label:"Equality",score:e.domains.equality.score}),t.jsx(ie,{label:"Growth",score:e.domains.growth.score}),t.jsx(ie,{label:"Stability",score:e.domains.stability.score})]}),((r=e.objectives)==null?void 0:r.length)>0&&t.jsxs("div",{className:"bg-[#12121a] rounded-xl p-4 mb-4",children:[t.jsx("div",{className:"text-[#64748b] text-xs uppercase tracking-wider font-mono mb-2",children:"Objectives"}),e.objectives.map(l=>t.jsx(Kt,{obj:l},l.id))]}),a&&t.jsxs("div",{className:"bg-[#12121a] rounded-xl p-4 mb-4",children:[t.jsx(Yt,{playerOutcome:e.playerOutcome,historicalOutcome:a}),t.jsxs("div",{className:"mt-3 border-t border-[#1e1e2e] pt-3",children:[t.jsx("div",{className:"text-[10px] text-[#475569] font-mono uppercase tracking-wider mb-1",children:"What worked in history"}),t.jsx("p",{className:"text-[#64748b] text-xs leading-relaxed",children:a.whatWorked})]})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx("button",{onClick:n,className:"flex-1 py-3 rounded-xl border border-[#1e1e2e] text-[#94a3b8] hover:border-[#6366f1] hover:text-[#6366f1] font-mono text-sm transition-colors",children:"â†º Try Again"}),t.jsx("button",{onClick:o,className:"flex-1 py-3 rounded-xl bg-[#6366f1] hover:bg-[#818cf8] text-white font-mono font-bold text-sm transition-colors",children:"Next Challenge â†’"})]})]})})}const F={contentStyle:{background:"#0d0d14",border:"1px solid #334155",borderRadius:8,fontSize:11,fontFamily:"monospace"},labelStyle:{color:"#94a3b8"},itemStyle:{color:"#e2e8f0"}},v={tick:{fill:"#475569",fontSize:9,fontFamily:"monospace"},axisLine:{stroke:"#1e1e2e"},tickLine:!1};function P({title:e,subtitle:n,color:o="#6366f1",children:a,wide:s=!1}){return t.jsxs("div",{className:`bg-[#0d0d14] border border-[#1e1e2e] rounded-xl p-3 flex flex-col gap-2 ${s?"col-span-2":""}`,children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-xs font-mono font-bold text-[#e2e8f0]",style:{color:o},children:e}),n&&t.jsx("div",{className:"text-[10px] font-mono text-[#475569]",children:n})]}),t.jsx("div",{className:"flex-1",style:{minHeight:150},children:a})]})}function Jt({history:e}){const n=(e.gdp||[]).map((o,a)=>({i:a,gdp:o}));return t.jsx(N,{width:"100%",height:"100%",children:t.jsxs(U,{data:n,margin:{top:4,right:4,left:0,bottom:0},children:[t.jsx("defs",{children:t.jsxs("linearGradient",{id:"gdpGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"5%",stopColor:"#6366f1",stopOpacity:.4}),t.jsx("stop",{offset:"95%",stopColor:"#6366f1",stopOpacity:.02})]})}),t.jsx(A,{strokeDasharray:"3 3",stroke:"#1e1e2e"}),t.jsx(S,{dataKey:"i",...v,tickFormatter:o=>`${Math.round(o/52)}y`,interval:Math.floor((n.length-1)/5)}),t.jsx(T,{...v,tickFormatter:o=>o>=1e6?`${(o/1e6).toFixed(0)}M`:o>=1e3?`${(o/1e3).toFixed(0)}K`:o,width:36}),t.jsx(M,{...F,formatter:o=>["$"+ne(o),"GDP"],labelFormatter:o=>`Year ${Math.round(o/52)}`}),t.jsx(q,{type:"monotone",dataKey:"gdp",stroke:"#6366f1",fill:"url(#gdpGrad)",strokeWidth:2,dot:!1,isAnimationActive:!1})]})})}function Xt({history:e}){const n=Math.min((e.unemployment||[]).length,(e.inflation||[]).length),o=Array.from({length:n},(a,s)=>({i:s,unemployment:e.unemployment[s],inflation:e.inflation[s]}));return t.jsx(N,{width:"100%",height:"100%",children:t.jsxs(X,{data:o,margin:{top:4,right:4,left:0,bottom:0},children:[t.jsx(A,{strokeDasharray:"3 3",stroke:"#1e1e2e"}),t.jsx(S,{dataKey:"i",...v,tickFormatter:a=>`${Math.round(a/52)}y`,interval:Math.floor((o.length-1)/5)}),t.jsx(T,{...v,tickFormatter:a=>a.toFixed(0)+"%",width:36}),t.jsx(M,{...F,formatter:(a,s)=>[a.toFixed(1)+"%",s==="unemployment"?"Unemployment":"Inflation"],labelFormatter:a=>`Year ${Math.round(a/52)}`}),t.jsx(G,{y:5,stroke:"#475569",strokeDasharray:"3 3"}),t.jsx(E,{type:"monotone",dataKey:"unemployment",stroke:"#f59e0b",strokeWidth:2,dot:!1,isAnimationActive:!1}),t.jsx(E,{type:"monotone",dataKey:"inflation",stroke:"#ef4444",strokeWidth:2,dot:!1,isAnimationActive:!1})]})})}const oe={food:"#22c55e",housing:"#06b6d4",tech:"#6366f1",luxury:"#f59e0b"};function Zt({sectorPrices:e}){const n=e||{},o=Math.max(...Object.values(n).map(s=>(s==null?void 0:s.length)||0),0),a=Array.from({length:o},(s,i)=>{var r,l,u,d;return{i,food:(r=n.food)==null?void 0:r[i],housing:(l=n.housing)==null?void 0:l[i],tech:(u=n.tech)==null?void 0:u[i],luxury:(d=n.luxury)==null?void 0:d[i]}});return t.jsx(N,{width:"100%",height:"100%",children:t.jsxs(X,{data:a,margin:{top:4,right:4,left:0,bottom:0},children:[t.jsx(A,{strokeDasharray:"3 3",stroke:"#1e1e2e"}),t.jsx(S,{dataKey:"i",...v,tickFormatter:s=>`${Math.round(s/52)}y`,interval:Math.floor((a.length-1)/5)}),t.jsx(T,{...v,tickFormatter:s=>"$"+(s==null?void 0:s.toFixed(0)),width:36}),t.jsx(M,{...F,formatter:(s,i)=>["$"+(s||0).toFixed(1),i],labelFormatter:s=>`Year ${Math.round(s/52)}`}),Object.entries(oe).map(([s,i])=>t.jsx(E,{type:"monotone",dataKey:s,stroke:i,strokeWidth:1.5,dot:!1,isAnimationActive:!1},s))]})})}function Qt({history:e}){const n=Math.min((e.gini||[]).length,(e.poverty||[]).length),o=Array.from({length:n},(a,s)=>({i:s,gini:e.gini[s]*100,poverty:e.poverty[s]}));return t.jsx(N,{width:"100%",height:"100%",children:t.jsxs(X,{data:o,margin:{top:4,right:4,left:0,bottom:0},children:[t.jsx(A,{strokeDasharray:"3 3",stroke:"#1e1e2e"}),t.jsx(S,{dataKey:"i",...v,tickFormatter:a=>`${Math.round(a/52)}y`,interval:Math.floor((o.length-1)/5)}),t.jsx(T,{...v,tickFormatter:a=>a.toFixed(0),width:28,domain:[0,100]}),t.jsx(M,{...F,formatter:(a,s)=>[a.toFixed(1),s==="gini"?"Gini Ã—100":"Poverty %"],labelFormatter:a=>`Year ${Math.round(a/52)}`}),t.jsx(G,{y:50,stroke:"#ef444444",strokeDasharray:"3 3"}),t.jsx(E,{type:"monotone",dataKey:"gini",stroke:"#ec4899",strokeWidth:2,dot:!1,isAnimationActive:!1}),t.jsx(E,{type:"monotone",dataKey:"poverty",stroke:"#f97316",strokeWidth:2,dot:!1,isAnimationActive:!1})]})})}function eo({history:e}){const n=(e.govBudget||[]).map((o,a)=>({i:a,budget:o,fill:o>=0?"#22c55e":"#ef4444"}));return t.jsx(N,{width:"100%",height:"100%",children:t.jsxs(Ce,{data:n,margin:{top:4,right:4,left:0,bottom:0},children:[t.jsx(A,{strokeDasharray:"3 3",stroke:"#1e1e2e"}),t.jsx(S,{dataKey:"i",...v,tickFormatter:o=>`${Math.round(o/52)}y`,interval:Math.floor((n.length-1)/5)}),t.jsx(T,{...v,tickFormatter:o=>o>=1e3?`${(o/1e3).toFixed(0)}K`:o,width:36}),t.jsx(M,{...F,formatter:o=>[ne(o),o>=0?"Surplus":"Deficit"],labelFormatter:o=>`Year ${Math.round(o/52)}`}),t.jsx(G,{y:0,stroke:"#475569"}),t.jsx(Se,{dataKey:"budget",radius:[1,1,0,0],isAnimationActive:!1,children:n.map((o,a)=>t.jsx(ue,{fill:o.fill},a))})]})})}function to({history:e}){const n=(e.population||[]).map((o,a)=>({i:a,pop:o}));return t.jsx(N,{width:"100%",height:"100%",children:t.jsxs(U,{data:n,margin:{top:4,right:4,left:0,bottom:0},children:[t.jsx("defs",{children:t.jsxs("linearGradient",{id:"popGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"5%",stopColor:"#06b6d4",stopOpacity:.4}),t.jsx("stop",{offset:"95%",stopColor:"#06b6d4",stopOpacity:.02})]})}),t.jsx(A,{strokeDasharray:"3 3",stroke:"#1e1e2e"}),t.jsx(S,{dataKey:"i",...v,tickFormatter:o=>`${Math.round(o/52)}y`,interval:Math.floor((n.length-1)/5)}),t.jsx(T,{...v,width:28}),t.jsx(M,{...F,formatter:o=>[o,"Population"],labelFormatter:o=>`Year ${Math.round(o/52)}`}),t.jsx(q,{type:"monotone",dataKey:"pop",stroke:"#06b6d4",fill:"url(#popGrad)",strokeWidth:2,dot:!1,isAnimationActive:!1})]})})}function oo({history:e}){const n=e.unemployment||[],o=e.inflation||[],a=Math.min(n.length,o.length),s=Array.from({length:a},(i,r)=>({x:n[r],y:o[r],age:r/a})).slice(-120);return t.jsx(N,{width:"100%",height:"100%",children:t.jsxs(Ke,{margin:{top:4,right:4,left:0,bottom:0},children:[t.jsx(A,{strokeDasharray:"3 3",stroke:"#1e1e2e"}),t.jsx(S,{dataKey:"x",...v,name:"Unemployment",tickFormatter:i=>(i==null?void 0:i.toFixed(0))+"%",label:{value:"Unemployment %",position:"insideBottom",offset:-2,style:{fill:"#475569",fontSize:9}}}),t.jsx(T,{dataKey:"y",...v,name:"Inflation",tickFormatter:i=>(i==null?void 0:i.toFixed(0))+"%",width:28}),t.jsx(M,{...F,formatter:(i,r)=>[(i==null?void 0:i.toFixed(1))+"%",r==="x"?"Unemployment":"Inflation"]}),t.jsx(G,{y:0,stroke:"#47556999"}),t.jsx(Ye,{data:s,isAnimationActive:!1,children:s.map((i,r)=>t.jsx(ue,{fill:`hsl(${240+i.age*90}, 80%, ${30+i.age*40}%)`},r))})]})})}function no({history:e}){const n=(e.businessCount||[]).map((o,a)=>({i:a,count:o}));return t.jsx(N,{width:"100%",height:"100%",children:t.jsxs(U,{data:n,margin:{top:4,right:4,left:0,bottom:0},children:[t.jsx("defs",{children:t.jsxs("linearGradient",{id:"bizGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"5%",stopColor:"#f59e0b",stopOpacity:.4}),t.jsx("stop",{offset:"95%",stopColor:"#f59e0b",stopOpacity:.02})]})}),t.jsx(A,{strokeDasharray:"3 3",stroke:"#1e1e2e"}),t.jsx(S,{dataKey:"i",...v,tickFormatter:o=>`${Math.round(o/52)}y`,interval:Math.floor((n.length-1)/5)}),t.jsx(T,{...v,width:28}),t.jsx(M,{...F,formatter:o=>[o,"Businesses"],labelFormatter:o=>`Year ${Math.round(o/52)}`}),t.jsx(q,{type:"monotone",dataKey:"count",stroke:"#f59e0b",fill:"url(#bizGrad)",strokeWidth:2,dot:!1,isAnimationActive:!1})]})})}function ao({history:e}){const n=Math.min((e.wages||[]).length,(e.medianWealth||[]).length),o=Array.from({length:n},(a,s)=>({i:s,wage:e.wages[s],median:e.medianWealth[s]}));return t.jsx(N,{width:"100%",height:"100%",children:t.jsxs(X,{data:o,margin:{top:4,right:4,left:0,bottom:0},children:[t.jsx(A,{strokeDasharray:"3 3",stroke:"#1e1e2e"}),t.jsx(S,{dataKey:"i",...v,tickFormatter:a=>`${Math.round(a/52)}y`,interval:Math.floor((o.length-1)/5)}),t.jsx(T,{...v,tickFormatter:a=>"$"+(a==null?void 0:a.toFixed(0)),width:36}),t.jsx(M,{...F,formatter:(a,s)=>["$"+(a||0).toFixed(1),s==="wage"?"Avg Wage":"Median Wealth"],labelFormatter:a=>`Year ${Math.round(a/52)}`}),t.jsx(E,{type:"monotone",dataKey:"wage",stroke:"#22c55e",strokeWidth:2,dot:!1,isAnimationActive:!1}),t.jsx(E,{type:"monotone",dataKey:"median",stroke:"#8b5cf6",strokeWidth:2,dot:!1,isAnimationActive:!1})]})})}function so({history:e}){var a;const n=(e.cpi||[]).map((s,i)=>({i,cpi:s})),o=((a=n[0])==null?void 0:a.cpi)||100;return t.jsx(N,{width:"100%",height:"100%",children:t.jsxs(U,{data:n,margin:{top:4,right:4,left:0,bottom:0},children:[t.jsx("defs",{children:t.jsxs("linearGradient",{id:"cpiGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"5%",stopColor:"#f97316",stopOpacity:.4}),t.jsx("stop",{offset:"95%",stopColor:"#f97316",stopOpacity:.02})]})}),t.jsx(A,{strokeDasharray:"3 3",stroke:"#1e1e2e"}),t.jsx(S,{dataKey:"i",...v,tickFormatter:s=>`${Math.round(s/52)}y`,interval:Math.floor((n.length-1)/5)}),t.jsx(T,{...v,domain:["auto","auto"],width:36}),t.jsx(M,{...F,formatter:s=>[s.toFixed(1),"CPI Index"],labelFormatter:s=>`Year ${Math.round(s/52)}`}),t.jsx(G,{y:o,stroke:"#47556966",strokeDasharray:"3 3",label:{value:"Baseline",style:{fill:"#475569",fontSize:9}}}),t.jsx(G,{y:o*2,stroke:"#ef444444",strokeDasharray:"3 3"}),t.jsx(q,{type:"monotone",dataKey:"cpi",stroke:"#f97316",fill:"url(#cpiGrad)",strokeWidth:2,dot:!1,isAnimationActive:!1})]})})}function B({label:e,value:n,color:o="#94a3b8",bg:a="#1e1e2e"}){return t.jsxs("div",{className:"flex flex-col items-center px-3 py-2 rounded-lg",style:{backgroundColor:a+"44"},children:[t.jsx("span",{className:"text-[10px] font-mono text-[#64748b] uppercase tracking-wider",children:e}),t.jsx("span",{className:"text-sm font-bold font-mono mt-0.5",style:{color:o},children:n})]})}function $({color:e,label:n}){return t.jsxs("span",{className:"flex items-center gap-1 text-[10px] font-mono text-[#64748b]",children:[t.jsx("span",{className:"w-2 h-2 rounded-full inline-block flex-shrink-0",style:{background:e}}),n]})}function io({metrics:e,market:n,onClose:o}){const a=(e==null?void 0:e.history)||{},s=(e==null?void 0:e.year)??0,i=(((e==null?void 0:e.gini)??0)*100).toFixed(1),r=((e==null?void 0:e.gini)??0)>.5?"#ef4444":((e==null?void 0:e.gini)??0)>.35?"#f59e0b":"#22c55e";((e==null?void 0:e.cpi)??100).toFixed(1);const l=((e==null?void 0:e.inflation)??0).toFixed(2),u=(((e==null?void 0:e.unemployment)??0)*100).toFixed(1),d=(((e==null?void 0:e.povertyRate)??0)*100).toFixed(1),h="$"+ne((e==null?void 0:e.gdp)??0),m="$"+ne(Math.abs((e==null?void 0:e.govDebt)??0)),x=(e==null?void 0:e.population)??0,f=(e==null?void 0:e.businessCount)??0;return t.jsx("div",{className:"fixed inset-0 z-50 bg-black/90 backdrop-blur-sm overflow-y-auto",children:t.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-white font-bold text-xl font-mono",children:"ðŸ“Š Macroeconomic Dashboard"}),t.jsxs("p",{className:"text-[#64748b] text-sm font-mono",children:["Year ",s," Â· Live simulation statistics"]})]}),t.jsx("button",{onClick:o,className:"text-[#475569] hover:text-white text-2xl transition-colors leading-none",children:"âœ•"})]}),t.jsxs("div",{className:"grid grid-cols-4 sm:grid-cols-8 gap-2 mb-4",children:[t.jsx(B,{label:"GDP",value:h,color:"#6366f1",bg:"#6366f1"}),t.jsx(B,{label:"Growth",value:(((e==null?void 0:e.gdpGrowth)??0)*100).toFixed(2)+"%",color:((e==null?void 0:e.gdpGrowth)??0)>=0?"#22c55e":"#ef4444",bg:((e==null?void 0:e.gdpGrowth)??0)>=0?"#22c55e":"#ef4444"}),t.jsx(B,{label:"Unemploy",value:u+"%",color:parseFloat(u)>15?"#ef4444":"#f59e0b",bg:"#f59e0b"}),t.jsx(B,{label:"Inflation",value:l+"%",color:parseFloat(l)>5?"#ef4444":"#94a3b8",bg:"#f97316"}),t.jsx(B,{label:"Gini",value:i,color:r,bg:r}),t.jsx(B,{label:"Poverty",value:d+"%",color:parseFloat(d)>25?"#ef4444":"#94a3b8",bg:"#ec4899"}),t.jsx(B,{label:"Gov Debt",value:m,color:((e==null?void 0:e.govDebt)??0)>2e3?"#ef4444":"#94a3b8",bg:"#64748b"}),t.jsx(B,{label:"Pop / Biz",value:`${x} / ${f}`,color:"#06b6d4",bg:"#06b6d4"})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-3",children:[t.jsx(P,{title:"GDP",subtitle:"Total economic output over time",color:"#6366f1",children:t.jsx(Jt,{history:a})}),t.jsxs(P,{title:"Unemployment & Inflation",subtitle:"â€” unemployment  â€” inflation",color:"#f59e0b",children:[t.jsx(Xt,{history:a}),t.jsxs("div",{className:"flex gap-3 mt-1",children:[t.jsx($,{color:"#f59e0b",label:"Unemployment %"}),t.jsx($,{color:"#ef4444",label:"Inflation %"})]})]}),t.jsx(P,{title:"CPI Index",subtitle:"Consumer price index â€” baseline = 100",color:"#f97316",children:t.jsx(so,{history:a})}),t.jsxs(P,{title:"Sector Prices",subtitle:"Food Â· Housing Â· Tech Â· Luxury",color:"#22c55e",children:[t.jsx(Zt,{sectorPrices:a.sectorPrices}),t.jsx("div",{className:"flex flex-wrap gap-3 mt-1",children:Object.entries(oe).map(([p,w])=>t.jsx($,{color:w,label:p},p))})]}),t.jsxs(P,{title:"Inequality",subtitle:"â€” Gini Ã—100  â€” Poverty %",color:"#ec4899",children:[t.jsx(Qt,{history:a}),t.jsxs("div",{className:"flex gap-3 mt-1",children:[t.jsx($,{color:"#ec4899",label:"Gini Ã—100"}),t.jsx($,{color:"#f97316",label:"Poverty %"})]})]}),t.jsx(P,{title:"Gov Budget",subtitle:"Green = surplus Â· Red = deficit",color:"#22c55e",children:t.jsx(eo,{history:a})}),t.jsx(P,{title:"Phillips Curve",subtitle:"Inflation vs unemployment â€” color = time (dark=old)",color:"#8b5cf6",children:t.jsx(oo,{history:a})}),t.jsx(P,{title:"Population",subtitle:"Total alive agents",color:"#06b6d4",children:t.jsx(to,{history:a})}),t.jsxs(P,{title:"Wages & Wealth",subtitle:"â€” avg wage  â€” median wealth",color:"#22c55e",children:[t.jsx(ao,{history:a}),t.jsxs("div",{className:"flex gap-3 mt-1",children:[t.jsx($,{color:"#22c55e",label:"Avg Wage"}),t.jsx($,{color:"#8b5cf6",label:"Median Wealth"})]})]}),t.jsx(P,{title:"Business Count",subtitle:"Active firms over time",color:"#f59e0b",children:t.jsx(no,{history:a})}),t.jsx(P,{title:"Sector Snapshot",subtitle:"Current supply vs demand",color:"#06b6d4",children:t.jsx("div",{className:"flex flex-col gap-2 mt-2",children:["food","housing","tech","luxury"].map(p=>{var R,Q,K;const w=((R=n==null?void 0:n.prices)==null?void 0:R[p])??0,b=((Q=n==null?void 0:n.supply)==null?void 0:Q[p])??0,y=((K=n==null?void 0:n.demand)==null?void 0:K[p])??0,k=y/Math.max(b,1),_=k>1.2?"#ef4444":k<.8?"#22c55e":"#f59e0b",Z=Math.min(100,b/Math.max(y,1)*50);return t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center mb-0.5",children:[t.jsx("span",{className:"text-xs font-mono capitalize",style:{color:oe[p]},children:p}),t.jsxs("span",{className:"text-xs font-mono font-bold",style:{color:_},children:["$",w.toFixed(1)]})]}),t.jsxs("div",{className:"flex gap-1 items-center",children:[t.jsx("div",{className:"flex-1 h-1.5 bg-[#1e1e2e] rounded-full overflow-hidden",children:t.jsx("div",{className:"h-1.5 rounded-full transition-all duration-500",style:{width:`${Z}%`,backgroundColor:oe[p]}})}),t.jsxs("span",{className:"text-[9px] font-mono text-[#475569] w-16 text-right",children:["S:",b.toFixed(0)," D:",y.toFixed(0)]})]})]},p)})})}),t.jsx(P,{title:"Social Unrest",subtitle:"% of population in unrest",color:"#ef4444",children:t.jsx(N,{width:"100%",height:"100%",children:t.jsxs(U,{data:(a.unrest||[]).map((p,w)=>({i:w,unrest:p})),margin:{top:4,right:4,left:0,bottom:0},children:[t.jsx("defs",{children:t.jsxs("linearGradient",{id:"unrestGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"5%",stopColor:"#ef4444",stopOpacity:.4}),t.jsx("stop",{offset:"95%",stopColor:"#ef4444",stopOpacity:.02})]})}),t.jsx(A,{strokeDasharray:"3 3",stroke:"#1e1e2e"}),t.jsx(S,{dataKey:"i",...v,tickFormatter:p=>`${Math.round(p/52)}y`,interval:Math.floor(((a.unrest||[]).length-1)/5)}),t.jsx(T,{...v,tickFormatter:p=>p.toFixed(0)+"%",width:32,domain:[0,100]}),t.jsx(M,{...F,formatter:p=>[p.toFixed(1)+"%","Unrest"],labelFormatter:p=>`Year ${Math.round(p/52)}`}),t.jsx(G,{y:50,stroke:"#ef444466",strokeDasharray:"3 3"}),t.jsx(q,{type:"monotone",dataKey:"unrest",stroke:"#ef4444",fill:"url(#unrestGrad)",strokeWidth:2,dot:!1,isAnimationActive:!1})]})})})]}),t.jsxs("div",{className:"mt-4 text-center text-[#334155] text-xs font-mono pb-4",children:["Data updates every 10 ticks Â· Last ",(a.gdp||[]).length," data points shown"]})]})})}function ne(e){return e==null||isNaN(e)?"0":Math.abs(e)>=1e9?(e/1e9).toFixed(1)+"B":Math.abs(e)>=1e6?(e/1e6).toFixed(1)+"M":Math.abs(e)>=1e3?(e/1e3).toFixed(1)+"K":Math.round(e).toString()}function ro(e,n){const o={incomeTax:[0,.6],corporateTax:[0,.5],minWage:[0,50],ubi:[0,1e3],interestRate:[0,.2],educationFunding:[0,1],unemploymentBenefit:[0,500],printMoney:[0,100],wealthTax:[0,.05],robotTax:[0,.5],mandatoryProfitShare:[0,.3],landValueTax:[0,.05],helicopterMoney:[0,500],maximumWage:[0,500],wealthConfiscation:[0,.5],punitiveTargiffs:[0,2]};if(e in o){const[a,s]=o[e];return ot(Number(n),a,s)}return n}const Ie="ecomsim_save";function lo(e){try{localStorage.setItem(Ie+"_scenario",e)}catch{}}function co(){try{return localStorage.getItem(Ie+"_scenario")||"freeMarket"}catch{return"freeMarket"}}const uo="modulepreload",fo=function(e){return"/ecomsim/"+e},ke={},ho=function(n,o,a){let s=Promise.resolve();if(o&&o.length>0){document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),l=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));s=Promise.allSettled(o.map(u=>{if(u=fo(u),u in ke)return;ke[u]=!0;const d=u.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":uo,d||(m.as="script"),m.crossOrigin="",m.href=u,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((x,f)=>{m.addEventListener("load",x),m.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(r){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=r,window.dispatchEvent(l),!l.defaultPrevented)throw r}return s.then(r=>{for(const l of r||[])l.status==="rejected"&&i(l.reason);return n().catch(i)})};let L=null,te=!1,re=[],le=null;const po="af_sky",mo="onnx-community/Kokoro-82M-v1.0-ONNX",O={monopoly_forming:"Warning. One company now dominates the market. Without competition, prices are rising and innovation is slowing.",high_inequality:"Inequality has reached extreme levels. The Gini coefficient indicates the top few now own most of the wealth.",high_unemployment:"Mass unemployment is spreading. A vicious cycle: fewer workers means less spending, which means even more layoffs.",inflation_spiral:"Inflation warning. Prices are rising faster than wages. Your population's purchasing power is eroding.",min_wage_tradeoff:"Minimum wage tradeoff observed. Living standards improved, but some small businesses can no longer afford to hire.",budget_surplus:"Fiscal surplus achieved. Tax revenue now exceeds government spending.",stagnation:"Stagflation risk. The economy is shrinking while unemployment rises â€” the classic policy dilemma.",poverty_trap:"Poverty trap forming. Workers in poverty cannot afford education or healthcare, keeping them trapped.",ubi_effect:"Universal Basic Income is reducing poverty. Some residents are using the security to start new businesses.",policy_fourDayWeek_on:"The four-day work week is now law. Workers rejoice. Friday afternoons are sacred. Economists nervously check productivity spreadsheets.",policy_fourDayWeek_off:"The four-day work week has been repealed. Monday through Friday, back to the grind.",policy_robotTax_on:"A robot tax has been introduced. For every job automated away, the tech sector must pay. Silicon Valley is not pleased.",policy_breadAndCircuses_on:"Bread and circuses for all! The government is handing out free food and entertainment. Unrest is falling. Economists are horrified.",policy_breadAndCircuses_off:"The bread and circuses program has ended. Let's see how long the calm lasts.",policy_mandatoryProfitShare_on:"Mandatory profit sharing is now law. Businesses must distribute a cut of profits to every worker. Workers approve. Shareholders do not.",policy_mandatoryProfitShare_off:"Mandatory profit sharing repealed. The windfall stays with the owners again.",policy_landValueTax_on:"A land value tax has been enacted. Henry George would be proud. Landowners are furious. Economists say this is actually the most efficient tax possible.",policy_banAdvertising_on:"Advertising is banned. No more billboards, no more commercials, no more targeted manipulation. The luxury sector is experiencing an identity crisis.",policy_banAdvertising_off:"The advertising ban is lifted. The bombardment of commercial messages resumes immediately.",policy_debtJubilee_on:"DEBT JUBILEE! All debts are cancelled â€” right now, this instant. It is a Biblical reset. The slate is wiped clean. This happens only once.",policy_lotteryRedistribution_on:"The wealth lottery is running. Random rich citizens are paying a luck tax directly to random poor ones. It's chaotic. It's arbitrary. It's weirdly effective.",policy_lotteryRedistribution_off:"The wealth lottery has ended. The rich breathe a sigh of relief.",policy_sumptuary_on:"Sumptuary laws are in effect. The wealthy may no longer spend freely on luxury goods. Medieval rulers used this to maintain social order. It also destroyed the luxury economy.",policy_sumptuary_off:"Sumptuary laws repealed. The luxury market roars back to life.",policy_degrowth_on:"Degrowth policy enacted. The government has officially stopped chasing GDP growth. Economists are having a meltdown. Everyone else is working less and feeling healthier.",policy_degrowth_off:"Degrowth policy abandoned. Back to the infinite growth imperative.",policy_algoCentralPlanning_on:"Algorithmic central planning is online. An AI now sets all prices. The market volatility disappears. So does the spontaneous order. It is efficient. It is cold. It is watching.",policy_algoCentralPlanning_off:"The algorithm has been shut down. Prices will now rediscover chaos on their own.",policy_universalBankAccount_on:"Universal bank accounts issued to every citizen. No one is unbanked. The poorest residents finally have somewhere safe to store their savings.",policy_universalBankAccount_off:"Universal bank accounts discontinued. Financial exclusion returns for the poorest citizens.",policy_helicopterMoney_on:"Helicopter money is airborne. Cash is literally raining from the sky. Every citizen is richer â€” briefly. Inflation is watching from below, grinning.",policy_helicopterMoney_off:"The helicopter has landed. The free money spigot is closed. Prices remain elevated.",policy_maximumWage_on:"A maximum wage is now law. No one earns above the cap. Executives are furious. Economists are concerned about brain drain. The people are delighted.",policy_maximumWage_off:"Maximum wage repealed. Compensation limits removed. The talent exodus risk is over.",policy_wealthConfiscation_on:"Wealth confiscation is in effect. Government agents are seizing assets above the threshold. The rich are moving money offshore as fast as they can.",policy_wealthConfiscation_off:"Wealth confiscation has ended. Assets are safe again â€” for now.",policy_nationalizeIndustries_on:"All industries are now nationalized. The government owns the means of production. Five-year plans are being drafted. Entrepreneurs are unemployed. Productivity is in freefall.",policy_nationalizeIndustries_off:"Privatization has begun. Industries are returning to private hands. Markets are chaotic but slowly returning to life.",policy_punitiveTargiffs_on:"Punitive tariffs are in place. All goods are now more expensive. This is to protect the economy, apparently. Consumers are paying the price â€” literally.",policy_punitiveTargiffs_off:"Tariffs removed. Trade barriers down. Prices begin to normalize.",policy_guaranteedJobs_on:"A guaranteed jobs program is active. Every unemployed citizen now works for the government. Unemployment is officially zero. The budget is officially catastrophic.",policy_guaranteedJobs_off:"Guaranteed jobs program ended. Government workers are being released back to the private market.",pandemic:"A pandemic has struck. Health is dropping, businesses are closing, and workers are staying home.",cropFailure:"Crop failure. Poor harvests are causing food prices to spike. The poorest citizens are suffering most.",techBreakthrough:"Technology breakthrough! Productivity in the tech sector has doubled â€” but automation is threatening other jobs.",financialBubble:"A financial bubble is growing. Asset prices are inflating rapidly â€” and history suggests what comes next.",corruption:"Corruption scandal. Government tax revenue is being diverted. Public services are beginning to collapse.",immigrationWave:"An immigration wave has arrived. Skilled workers are boosting productivity, but job competition is increasing.",recession:"Recession begins. Consumer demand is falling, businesses are struggling, and unemployment is rising.",boom:"Economic boom! Consumer confidence has surged. Businesses are hiring and wages are growing.",hyperinflation:"Hyperinflation. Prices are doubling faster than wages can keep up. The currency is becoming worthless. Wheelbarrows of cash are not yet required â€” but give it time.",generalStrike:"General strike! Workers across every sector have walked off the job. Production has stopped. The economy is frozen. History will judge what you do next.",bankRun:"Bank run! Panic is spreading. Citizens are lining up to withdraw everything. The financial system has hours before it collapses. Decide fast.",brainDrain:"Brain drain underway. Your most skilled citizens are packing their bags. Once expertise leaves, it rarely comes back. The productivity gap will compound for decades."};async function _e(){if(L)return L;if(te)return new Promise(e=>re.push(e));te=!0;try{const{KokoroTTS:e}=await ho(async()=>{const{KokoroTTS:n}=await import("./kokoro-CqRZUw5m.js");return{KokoroTTS:n}},[]);return L=await e.from_pretrained(mo,{dtype:"q4",device:"wasm"}),re.forEach(n=>n(L)),re=[],te=!1,L}catch(e){return console.warn("[Narrator] Failed to load Kokoro TTS:",e),te=!1,null}}function xo(){return le||(le=new(window.AudioContext||window.webkitAudioContext)),le}let J=null;async function z(e,n={}){if(e){Ee();try{const o=await _e();if(!o)return;const a=await o.generate(e,{voice:n.voice||po}),s=xo(),i=s.createBuffer(1,a.audio.length,a.sampling_rate);i.copyToChannel(a.audio,0);const r=s.createBufferSource();return r.buffer=i,n.rate&&(r.playbackRate.value=n.rate),r.connect(s.destination),r.start(),J=r,new Promise(l=>{r.onended=()=>{J=null,l()}})}catch(o){console.warn("[Narrator] Narration error:",o)}}}function Ee(){if(J){try{J.stop()}catch{}J=null}}function go(e){const n=O[e];n&&z(n)}function bo(e){const n=O[e];n&&z(n)}function yo(e,n){const o=`policy_${e}_on`,a=`policy_${e}_off`;if(n===!0||n===!1){const s=n?O[o]:O[a];s&&z(s);return}n>0&&O[o]&&z(O[o])}function vo(){_e()}function wo(){return L!==null}function jo(){const[e,n]=c.useState(!1),[o,a]=c.useState(!1),[s,i]=c.useState(!1),r=c.useRef(!1),l=c.useCallback(async()=>{n(!0),r.current=!0,a(!0),vo();const f=setInterval(()=>{wo()&&(i(!0),a(!1),clearInterval(f),z("Economy simulator narrator ready."))},500);setTimeout(()=>clearInterval(f),3e4)},[]),u=c.useCallback(()=>{n(!1),r.current=!1,Ee()},[]),d=c.useCallback(f=>{r.current&&go(f)},[]),h=c.useCallback(f=>{r.current&&bo(f)},[]),m=c.useCallback(f=>{r.current&&z(f)},[]),x=c.useCallback((f,p)=>{r.current&&yo(f,p)},[]);return{enabled:e,loading:o,ready:s,enable:l,disable:u,onInsight:d,onEvent:h,speak:m,onPolicy:x}}const Ne=["dashboard","objectives","policies","histogram"];function ko(){var me,xe;const e=jo(),n=c.useRef(null),[o,a]=c.useState(null),[s,i]=c.useState(!1),[r,l]=c.useState(5),[u,d]=c.useState(co()),[h,m]=c.useState(!1),[x,f]=c.useState(null),[p,w]=c.useState(null),[b,y]=c.useState("dashboard"),[k,_]=c.useState(null),[Z,R]=c.useState(null),[Q,K]=c.useState(!1);c.useEffect(()=>{const g=new Worker(new URL("/ecomsim/assets/simWorker-DAXMadOc.js",import.meta.url),{type:"module"});return g.addEventListener("message",C=>{const{type:Y,state:H,event:ee,insight:ge,report:Ue}=C.data;switch(Y){case"STATE_UPDATE":a(H);break;case"EVENT":e.onEvent(ee==null?void 0:ee.type);break;case"CHOICE_REQUIRED":_(ee),i(!0);break;case"INSIGHT":f(ge),e.onInsight(ge.id);break;case"SCENARIO_COMPLETE":R(Ue),i(!0);break}}),g.postMessage({type:"INIT",scenarioId:u}),n.current=g,()=>g.terminate()},[]);const j=c.useCallback(g=>{var C;(C=n.current)==null||C.postMessage(g)},[]),Re=c.useCallback(()=>{i(!0),j({type:"PAUSE"})},[j]),De=c.useCallback(()=>{i(!1),j({type:"RESUME"})},[j]),se=c.useCallback(()=>{a(null),f(null),w(null),_(null),R(null),j({type:"RESET",scenarioId:u}),i(!1)},[j,u]),We=c.useCallback(g=>{l(g),j({type:"SET_SPEED",speed:g})},[j]),Be=c.useCallback((g,C)=>{const Y=ro(g,C);j({type:"SET_POLICY",policy:g,value:Y}),a(H=>H&&{...H,policies:{...H.policies,[g]:Y}}),e.onPolicy(g,Y)},[j,e]),$e=c.useCallback(g=>{var C;d(g),lo(g),a(null),f(null),w(null),_(null),R(null),j({type:"RESET",scenarioId:g}),i(!1),(C=de[g])!=null&&C.isHistorical&&y("objectives")},[j]),Ge=c.useCallback(()=>{j({type:"SET_POLICY",policy:"_forceShock",value:!0})},[j]),He=c.useCallback((g,C)=>{_(null),j({type:"RESOLVE_CHOICE",eventId:g,choiceId:C}),i(!1)},[j]),Le=c.useCallback(()=>{R(null),se()},[se]),Oe=c.useCallback(()=>{R(null),m(!0)},[]),he=((me=de[u])==null?void 0:me.name)||"Free Market",pe=((xe=o==null?void 0:o.objectives)==null?void 0:xe.length)>0,ze=pe?Ne:Ne.filter(g=>g!=="objectives");return t.jsxs("div",{className:"h-screen flex flex-col bg-[#0a0a0f] text-[#e2e8f0] overflow-hidden font-mono",children:[t.jsx(Mt,{paused:s,speed:r,onPause:Re,onResume:De,onReset:se,onSpeedChange:We,onScenarioOpen:()=>m(!0),onShockMe:Ge,onStatsOpen:()=>K(!0),scenarioName:he,year:o==null?void 0:o.year,narratorEnabled:e.enabled,narratorLoading:e.loading,onNarratorToggle:e.enabled?e.disable:e.enable}),t.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[t.jsxs("div",{className:"flex-1 relative bg-[#0a0a0f]",children:[t.jsx(gt,{simState:o,onAgentClick:w,selectedAgentId:p==null?void 0:p.id}),p&&t.jsx(Wt,{agent:p,onClose:()=>w(null)})]}),t.jsxs("div",{className:"w-72 flex flex-col border-l border-[#1e1e2e] bg-[#0a0a0f]",children:[t.jsx("div",{className:"flex border-b border-[#1e1e2e]",children:ze.map(g=>t.jsx("button",{onClick:()=>y(g),className:`flex-1 py-2 text-xs font-mono capitalize transition-colors ${b===g?"text-[#6366f1] border-b border-[#6366f1]":"text-[#475569] hover:text-[#94a3b8]"}`,children:g==="objectives"&&pe?`ðŸŽ¯ ${o.objectives.filter(C=>C.completed).length}/${o.objectives.length}`:g},g))}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-3",children:[b==="dashboard"&&t.jsx(wt,{metrics:o==null?void 0:o.metrics,market:o==null?void 0:o.market,activeEvents:o==null?void 0:o.activeEvents}),b==="objectives"&&t.jsx(Ht,{objectives:o==null?void 0:o.objectives,scenarioDurationYears:o==null?void 0:o.scenarioDurationYears,year:o==null?void 0:o.year,scenarioName:he}),b==="policies"&&t.jsx(St,{policies:o==null?void 0:o.policies,onPolicyChange:Be}),b==="histogram"&&t.jsx(Gt,{agents:o==null?void 0:o.agents})]})]})]}),x&&t.jsx(Et,{insight:x,onDismiss:()=>f(null)}),k&&t.jsx(zt,{event:k,onChoose:He}),Z&&t.jsx(Vt,{report:Z,onRetry:Le,onNextScenario:Oe}),Q&&t.jsx(io,{metrics:o==null?void 0:o.metrics,market:o==null?void 0:o.market,onClose:()=>K(!1)}),h&&t.jsx(It,{current:u,onSelect:$e,onClose:()=>m(!1)})]})}ce.createRoot(document.getElementById("root")).render(t.jsx(Ve.StrictMode,{children:t.jsx(ko,{})}));

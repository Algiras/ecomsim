const i="onnx-community/Kokoro-82M-v1.0-ONNX",p="af_sky";let a=null;self.onmessage=async o=>{const{type:r,id:s}=o.data;switch(r){case"INIT":{try{const{KokoroTTS:e}=await import("./kokoro-BBmgbqDm.js");a=await e.from_pretrained(i,{dtype:"q4",device:"wasm"}),self.postMessage({type:"READY",id:s})}catch(e){self.postMessage({type:"ERROR",id:s,error:e.message})}break}case"GENERATE":{if(!a){self.postMessage({type:"ERROR",id:s,error:"Model not loaded"});return}try{const{text:e,voice:c}=o.data,t=await a.generate(e,{voice:c||p}),n=t.audio.buffer;self.postMessage({type:"AUDIO",id:s,buffer:t.audio,samplingRate:t.sampling_rate},[n])}catch(e){self.postMessage({type:"ERROR",id:s,error:e.message})}break}}};
